<!doctype html>
<html class="theme-next use-motion ">
<head>
  

<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />








  <link rel="stylesheet" type="text/css" href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5"/>



  
    <link href='//fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
  


<link rel="stylesheet" type="text/css" href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" />

<link rel="stylesheet" type="text/css" href="/css/main.css?v=0.4.5.2"/>




  <meta name="keywords" content="Hexo,next" />





  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=0.4.5.2" />


<meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="Jason Wang's Notes">
<meta property="og:url" content="https://quarkchaos.github.com/index.html">
<meta property="og:site_name" content="Jason Wang's Notes">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Jason Wang's Notes">
<meta name="twitter:description">


<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: '',
    sidebar: 'always'
  };
</script>



<script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "//hm.baidu.com/hm.js?ea2c42d3a5f14cd212a7a74fe032f86d";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
  })();
</script>

  <title> Jason Wang's Notes </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->
  






  <div class="container one-column 
   page-home 
">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Jason Wang's Notes</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu ">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404.html" rel="section">
            
              <i class="menu-item-icon fa fa-heartbeat"></i> <br />
            
            公益404
          </a>
        </li>
      

      
      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content"> 
  <section id="posts" class="posts-expand">
    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="/2016/03/24/introduction-of-json/" itemprop="url">
                  Introduction of JSON
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            Posted on
            <time itemprop="dateCreated" datetime="2016-03-24T20:32:32+08:00" content="2016-03-24">
              2016-03-24
            </time>
          </span>

          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h1 id="1-JSON-简介"><a href="#1-JSON-简介" class="headerlink" title="1 JSON 简介"></a>1 JSON 简介</h1><p>JSON：JavaScript 对象表示法（JavaScript Object Notation）。</p>
<p>它基于ECMAScript的一个子集，采用完全独立于语言的文本格式。易于人阅读和编写，同时也易于机器解析和生成(一般用于提升网络传输速率)。<br>类似于 XML，但比 XML 更小、更快，更易解析。是一种理想的数据交换语言。</p>
<h2 id="特点："><a href="#特点：" class="headerlink" title="特点："></a>特点：</h2><ul>
<li>JSON 指的是 JavaScript 对象表示法（JavaScript Object Notation）</li>
<li>JSON 是轻量级的文本数据交换格式</li>
<li>JSON 独立于语言</li>
<li>JSON 具有自我描述性，易理解</li>
</ul>
<h2 id="Example"><a href="#Example" class="headerlink" title="Example:"></a>Example:</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  name: <span class="string">"World"</span></span><br><span class="line">  countries: [</span><br><span class="line">    &#123;</span><br><span class="line">      name: <span class="string">"United States"</span>,</span><br><span class="line">      capital: <span class="string">"Washington, D.C."</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">      name: <span class="string">"United Kingdom"</span>,</span><br><span class="line">      capital: <span class="string">"London"</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="2-JSON-语法"><a href="#2-JSON-语法" class="headerlink" title="2 JSON 语法"></a>2 JSON 语法</h1><h2 id="JSON-语法规则"><a href="#JSON-语法规则" class="headerlink" title="JSON 语法规则"></a>JSON 语法规则</h2><p>JSON 语法是 JavaScript 对象表示语法的子集。</p>
<ul>
<li><p>数据在键值对中</p>
<blockquote>
<p>“firstName”:”John”</p>
</blockquote>
</li>
<li><p>数据由逗号分隔</p>
<blockquote>
<p>“firstName”:”John”, “lastName”:”Lock”</p>
</blockquote>
</li>
<li><p>花括号保存对象</p>
<blockquote>
<p>{“firstName”:”John”}</p>
</blockquote>
</li>
<li><p>方括号保存数组</p>
<blockquote>
<p>[“id”:1}, {“id”:2}]</p>
</blockquote>
</li>
</ul>
<h2 id="JSON-名称-值对"><a href="#JSON-名称-值对" class="headerlink" title="JSON 名称/值对"></a>JSON 名称/值对</h2><p>JSON 数据的书写格式是：名称/值对。<br>名称/值对组合中的名称写在前面（在双引号中），值对写在后面(同样在双引号中)，中间用冒号隔开：</p>
<pre><code>&quot;firstName&quot;:&quot;John&quot;
</code></pre><p>等价于这条 JavaScript 语句：</p>
<pre><code>firstName = &quot;John&quot;;
</code></pre><p><strong>JSON 值</strong></p>
<p>JSON 值可以是：</p>
<ul>
<li><p>数字（整数或浮点数）</p>
<blockquote>
<p>height: 8848</p>
</blockquote>
</li>
<li><p>字符串（在双引号中）</p>
<blockquote>
<p>firstName: “John”</p>
</blockquote>
</li>
<li><p>逻辑值（true 或 false）</p>
<blockquote>
<p>is_installed: false</p>
</blockquote>
</li>
<li><p>数组（在方括号中）</p>
</li>
<li>对象（在花括号中）</li>
<li>null<blockquote>
<p>name: null</p>
</blockquote>
</li>
</ul>
<blockquote>
<p>即除了以上几种形式的JS对象不是合法的JSON值，如<em>function</em>就不是合法的JSON值</p>
</blockquote>
<h2 id="基础结构"><a href="#基础结构" class="headerlink" title="基础结构"></a>基础结构</h2><p>JSON结构有两种结构，简单说就是javascript中的对象和数组，所以这两种结构就是对象和数组两种结构，通过这两种结构可以表示各种复杂的结构。</p>
<p>1、对象</p>
<p>对象在js中表示为“{}”括起来的内容，数据结构为 {key：value,key：value,…}的键值对的结构。</p>
<p>在面向对象的语言中，key为对象的属性，value为对应的属性值，所以很容易理解，取值方法为 对象 .key 获取属性值，这个属性值的类型可以是 数字、字符串、数组、对象几种。</p>
<p>2、数组</p>
<p>数组在js中是中括号“[]”括起来的内容，数据结构为 [“java”,”javascript”,”vb”,…]，取值方式和所有语言中一样，使用索引获取，字段值的类型可以是 数字、字符串、数组、对象几种。</p>
<p>经过对象、数组2种结构就可以组合成复杂的数据结构了。</p>
<h1 id="3-JSON-使用"><a href="#3-JSON-使用" class="headerlink" title="3 JSON 使用"></a>3 JSON 使用</h1><h2 id="3-1-在JavaScript中使用JSON"><a href="#3-1-在JavaScript中使用JSON" class="headerlink" title="3.1 在JavaScript中使用JSON"></a>3.1 在JavaScript中使用JSON</h2><p>在JavaScript中，处理JSON不需要任何特殊的API或工具包。</p>
<h3 id="序列化与反序列化"><a href="#序列化与反序列化" class="headerlink" title="序列化与反序列化"></a>序列化与反序列化</h3><p>较新的浏览器中，可以通过 <em>JSON.stringify</em> 和 <em>JSON.parse</em> 来实现序列化和反序列化。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> world = &#123;</span><br><span class="line">  name: <span class="string">"World"</span>,</span><br><span class="line">  countries: [</span><br><span class="line">    &#123;</span><br><span class="line">      name: <span class="string">"United States"</span>,</span><br><span class="line">      capital: <span class="string">"Washington, D.C."</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">      name: <span class="string">"United Kingdom"</span>,</span><br><span class="line">      capital: <span class="string">"London"</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Serialization</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="built_in">JSON</span>.stringify(world);</span><br><span class="line"><span class="built_in">console</span>.log(str);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Deserialization</span></span><br><span class="line"><span class="keyword">var</span> parsedWorld = <span class="built_in">JSON</span>.parse(str);</span><br></pre></td></tr></table></figure></p>
<h3 id="访问JSON元素"><a href="#访问JSON元素" class="headerlink" title="访问JSON元素"></a>访问JSON元素</h3><p><strong>访问元素</strong></p>
<p>通过 <em>.key</em> 访问对象属性<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(world.name);</span><br></pre></td></tr></table></figure></p>
<p>通过 [index] 访问数组元素<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(world.countries[<span class="number">0</span>]);</span><br></pre></td></tr></table></figure></p>
<p><strong>遍历元素</strong></p>
<p>通过 <em>for-in</em> 来遍历 JSON 数据<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> world) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'key: '</span> + <span class="built_in">JSON</span>.stringify(world[key]));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="修改JSON元素"><a href="#修改JSON元素" class="headerlink" title="修改JSON元素"></a>修改JSON元素</h3><p><strong>增加元素</strong></p>
<p>通过 <em>obj.key</em> 的方法增加属性<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">world.planet = <span class="string">"Earth"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(world));</span><br></pre></td></tr></table></figure></p>
<p>通过 <em>obj[index]</em> 的方法增加数组元素，（index不在已有数组索引范围内）<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">world.countries[<span class="number">2</span>] = &#123;</span><br><span class="line">  name: <span class="string">"Japan"</span>,</span><br><span class="line">  capital: <span class="string">"Tokyo"</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(world));</span><br></pre></td></tr></table></figure></p>
<p><strong>删除元素</strong></p>
<p>通过 <em>delete obj.key</em> 的方式来删除属性:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> world.planet;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(world));</span><br></pre></td></tr></table></figure></p>
<p>通过 <em>array.splice</em> 删除数组元素<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">world.countries.splice(<span class="number">2</span>, <span class="number">1</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(world));</span><br></pre></td></tr></table></figure></p>
<p><strong>修改元素</strong></p>
<p>在访问时直接赋新值即可完成修改</p>
<h2 id="3-2-在-NET中使用JSON"><a href="#3-2-在-NET中使用JSON" class="headerlink" title="3.2 在.NET中使用JSON"></a>3.2 在.NET中使用JSON</h2><p>在.NET中有三种常用的JSON序列化的类，分别是</p>
<ul>
<li>System.Web.Script.Serialization.JavaScriptSerializer类</li>
<li>System.Runtime.Serialization.Json.DataContractJsonSerializer类</li>
<li>Newtonsoft.Json.JsonConvert类</li>
</ul>
<h3 id="定义JSON数据格式类"><a href="#定义JSON数据格式类" class="headerlink" title="定义JSON数据格式类"></a>定义JSON数据格式类</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">[DataContract]</span><br><span class="line"><span class="keyword">class</span> <span class="title">Country</span></span><br><span class="line">&#123;</span><br><span class="line">    [DataMember] </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    [DataMember]</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">string</span> Captital &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Country</span>(<span class="params"></span>)</span><br><span class="line">    </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Country</span> (<span class="params"><span class="keyword">string</span> name, <span class="keyword">string</span> capital</span>)</span><br><span class="line">    </span>&#123;</span><br><span class="line">        Name = name;</span><br><span class="line">        Captital = capital;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[DataContract]</span><br><span class="line"><span class="keyword">class</span> <span class="title">World</span></span><br><span class="line">&#123;</span><br><span class="line">    [DataMember]</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    [DataMember]</span><br><span class="line">    <span class="keyword">public</span> List&lt;Country&gt; Countries &#123;<span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">World</span>(<span class="params"></span>)</span><br><span class="line">    </span>&#123;</span><br><span class="line">        Name = <span class="string">"World"</span>;</span><br><span class="line">        Countries = <span class="keyword">new</span> List&lt;Country&gt;();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="keyword">string</span>[] args</span>)</span><br><span class="line"></span>&#123;</span><br><span class="line">    World world = <span class="keyword">new</span> World();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Add elements</span></span><br><span class="line">    world.Countries.Add(<span class="keyword">new</span> Country(<span class="string">"United States"</span>, <span class="string">"Washington, D.C."</span>));</span><br><span class="line">    world.Countries.Add(<span class="keyword">new</span> Country(<span class="string">"United Kingdom"</span>, <span class="string">"London"</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="使用System-Web-Script-Serialization-JavaScriptSerializer"><a href="#使用System-Web-Script-Serialization-JavaScriptSerializer" class="headerlink" title="使用System.Web.Script.Serialization.JavaScriptSerializer"></a>使用System.Web.Script.Serialization.JavaScriptSerializer</h3><blockquote>
<p>JavaScriptSerializer是.NET自带的处理JSON的类，JavaScriptSerializer类在System.Web.Extensions.dll中，需要添加引用System.Web.Extensions.dll</p>
</blockquote>
<p>示例如下：<br><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Web.Script.Serialization;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">json</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">UseJavaScriptSerializer</span>(<span class="params">World world</span>)</span><br><span class="line">        </span>&#123;</span><br><span class="line">            <span class="comment">// JavaScriptSerializer类在System.Web.Extensions.dll中，需要添加引用System.Web.Extensions.dll</span></span><br><span class="line">            JavaScriptSerializer serializer = <span class="keyword">new</span> JavaScriptSerializer();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//JSON 序列化  </span></span><br><span class="line">            <span class="keyword">string</span> str = serializer.Serialize(world);</span><br><span class="line">            Console.WriteLine(<span class="string">"JavaScriptSerializer: after Serialization: &#123;0&#125;, length: &#123;1&#125;"</span>, str, str.Length);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//JSON 反序列化  </span></span><br><span class="line">            World _world = serializer.Deserialize&lt;World&gt;(str);</span><br><span class="line">            Console.WriteLine(<span class="string">"JavaScriptSerializer: after Deserialization: Name: &#123;0&#125;, Countries Count: &#123;1&#125;"</span>, _world.Name, _world.Countries.Count);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>执行后输出：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">JavaScriptSerializer: after Serialization: &#123;<span class="string">"Name"</span>:<span class="string">"World"</span>,<span class="string">"Countries"</span>:[&#123;<span class="string">"Name"</span>:<span class="string">"United States"</span>,<span class="string">"Captital"</span>:<span class="string">"Washington, D.C."</span>&#125;,&#123;<span class="string">"Name"</span>:<span class="string">"United Kingdom"</span>,<span class="string">"Captita</span><br><span class="line">l"</span>:<span class="string">"London"</span>&#125;]&#125;, length: 131</span><br><span class="line">JavaScriptSerializer: after Deserialization: Name: World, Countries Count: 2</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>注意：</p>
<p>如果不想序列化某个字段，可以在字段前面加[JsonIgnore]标记。</p>
</blockquote>
<h3 id="使用Newtonsoft-Json-JsonConvert"><a href="#使用Newtonsoft-Json-JsonConvert" class="headerlink" title="使用Newtonsoft.Json.JsonConvert"></a>使用Newtonsoft.Json.JsonConvert</h3><p>Newtonsoft.Json.JsonConvert类是非微软提供的一个JSON序列化和反序列的开源免费的类库（下载网址是：<a href="https://github.com/JamesNK/Newtonsoft.Json/releases" target="_blank" rel="external">https://github.com/JamesNK/Newtonsoft.Json/releases</a>），它提供了更灵活的序列化和反序列化控制。并且如果你的开发环境使用的是.NET Framework3.5及以后版本的话，你就可以使用Linq to JSON，只解析出关心的那部分即可，非常方便。 </p>
<blockquote>
<p>需要下载并添加引用Newtonsoft.Json.dll； </p>
</blockquote>
<p>示例如下：<br><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//JSON 序列化  </span></span><br><span class="line"><span class="keyword">string</span> str = JsonConvert.SerializeObject(world);</span><br><span class="line">Console.WriteLine(<span class="string">"SerializeObject: after Serialization: &#123;0&#125;, length: &#123;1&#125;"</span>, str, str.Length);</span><br><span class="line"></span><br><span class="line"><span class="comment">//JSON 反序列化  </span></span><br><span class="line">World _world = JsonConvert.DeserializeObject&lt;World&gt;(str);</span><br><span class="line">Console.WriteLine(<span class="string">"JavaScriptSerializer: after Deserialization: Name: &#123;0&#125;, Countries Count: &#123;1&#125;"</span>, _world.Name, _world.Countries.Count);</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>注意:</p>
<p>如果需要序列化实体</p>
<p>1、类名必须添加[DataContract]标记；</p>
<p>2、类属性添加[DataMember]标记；</p>
<p>如果有不需要序列化的字段，可以给该字段添加[JsonIgnore]标记 </p>
</blockquote>
<h3 id="性能对比"><a href="#性能对比" class="headerlink" title="性能对比"></a>性能对比</h3><p><img src="http://download.codeplex.com/Download?ProjectName=json&amp;DownloadId=669163" alt="image"></p>
<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><p>对JSON数据的操作（如增加、删除、更新）其实就是对C#类的操作。</p>
<h1 id="4-JSON-小结"><a href="#4-JSON-小结" class="headerlink" title="4 JSON 小结"></a>4 JSON 小结</h1><h2 id="JSON文件"><a href="#JSON文件" class="headerlink" title="JSON文件"></a>JSON文件</h2><ul>
<li>通常JSON 文件的文件类型设置为 “.json” ，用于区分其它格式的文本文件。</li>
<li>JSON 文本的 MIME 类型是 “application/json”</li>
</ul>
<h2 id="与-XML-比较"><a href="#与-XML-比较" class="headerlink" title="与 XML 比较"></a>与 XML 比较</h2><ul>
<li><p>可读性</p>
<blockquote>
<p>JSON: 简易的语法， XML: 规范的标签形式</p>
<p>不分胜负</p>
</blockquote>
</li>
<li><p>可扩展性</p>
<blockquote>
<p>不分胜负</p>
</blockquote>
</li>
<li><p>编解码难度</p>
<blockquote>
<p>在JS中，JSON具有优势</p>
</blockquote>
</li>
<li><p>数据效率</p>
<blockquote>
<p>JSON不需要有严格的闭合标签，有效数据量与总数据包比大大提升，从而减少同等数据流量的情况下，网络的传输压力</p>
</blockquote>
</li>
</ul>
<h2 id="相关链接"><a href="#相关链接" class="headerlink" title="相关链接"></a>相关链接</h2><p>在线JSON编辑器：<a href="http://www.atool.org/jsoneditor.php" target="_blank" rel="external">http://www.atool.org/jsoneditor.php</a></p>
<h1 id="5-Reference"><a href="#5-Reference" class="headerlink" title="5 Reference"></a>5 Reference</h1><ol>
<li>JSON_百度百科, <a href="http://baike.baidu.com/link?url=9Xh66e3k3V_8H0GXI2UreQ43jK5tX84PVIT1Bh6tgswhISJG6zzwNRhvryOkvFRp9pyXlJtSUyiId9DaDzHAyK" target="_blank" rel="external">http://baike.baidu.com/link?url=9Xh66e3k3V_8H0GXI2UreQ43jK5tX84PVIT1Bh6tgswhISJG6zzwNRhvryOkvFRp9pyXlJtSUyiId9DaDzHAyK</a></li>
<li>W3School_JSON教程, <a href="http://www.w3school.com.cn/json/index.asp" target="_blank" rel="external">http://www.w3school.com.cn/json/index.asp</a></li>
<li>在.NET使用JSON作为数据交换格式, fangaoxin, <a href="http://blog.csdn.net/fangaoxin/article/details/7618152" target="_blank" rel="external">http://blog.csdn.net/fangaoxin/article/details/7618152</a></li>
</ol>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="/2016/03/22/gbs-build/" itemprop="url">
                  GBS Build
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            Posted on
            <time itemprop="dateCreated" datetime="2016-03-22T21:21:47+08:00" content="2016-03-22">
              2016-03-22
            </time>
          </span>

          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <blockquote>
<p>本文是 Tizen 系统的 gbs build 的用法的中英文对照版，主要内容为如何使用 gbs build 命令</p>
<p><em>Reference: <a href="https://source.tizen.org/documentation/reference/git-build-system/usage/gbs-build" target="_blank" rel="external">https://source.tizen.org/documentation/reference/git-build-system/usage/gbs-build</a></em></p>
</blockquote>
<h1 id="gbs-build"><a href="#gbs-build" class="headerlink" title="gbs build"></a>gbs build</h1><p>PUBLISHED 19 Oct 2014</p>
<p>By using ‘gbs build’, the developer can build the source code and generate rpm packages locally. For instructions on using the build subcommand, use this command: gbs build –help</p>
<blockquote>
<p>开发者可使用gbs build在本地编译源代码然后生成RPM包。使用命令 gbs build –help 可以获取关于子命令 build 的帮助指南</p>
</blockquote>
<pre><code>$ gbs build -h
</code></pre><h2 id="gbs-build-workflow-gbs-build-工作流程"><a href="#gbs-build-workflow-gbs-build-工作流程" class="headerlink" title="gbs build workflow (gbs build 工作流程)"></a>gbs build workflow (gbs build 工作流程)</h2><h3 id="Input-of-gbs-build-gbs-build的输入"><a href="#Input-of-gbs-build-gbs-build的输入" class="headerlink" title="Input of gbs build (gbs build的输入)"></a>Input of gbs build (gbs build的输入)</h3><p>Below is the input for gbs build:</p>
<blockquote>
<p>以下是 gbs build 所需输入：</p>
</blockquote>
<ul>
<li><p>git project(s) which contains rpm packaging files</p>
<blockquote>
<p>包含rpm packing文件的git项目</p>
</blockquote>
</li>
<li><p>binary rpm repositories (remote or local)</p>
<blockquote>
<p>二进制rpm包仓库</p>
</blockquote>
</li>
<li><p>project build configurations (macros, flags, etc)</p>
<blockquote>
<p>项目编译配置，宏定义、标志位等</p>
</blockquote>
</li>
</ul>
<p>The binary rpm repositories contain all the binary rpm packages which are used to create the chroot environment and build packages, which can be remote, like tizen release or snapshot repositories, or local repository. Local repository supports two types:</p>
<blockquote>
<p>二进制rpm包仓库包含所有rpm包，这些rpm包可以用来创建chroot环境和编译软件包。包仓库可以是远程的或者是本地的，远程的如Tizen的发布或快照仓库，本地仓库支持两种类型，如下：</p>
</blockquote>
<ul>
<li><p>A standard repository with repodata exists</p>
<blockquote>
<p>带repodata的标准仓库</p>
</blockquote>
</li>
<li><p>A normal directory contains RPM packages. GBS will find all RPM packages under this directory.</p>
<blockquote>
<p>包含RPM包的普通目录，GBS可以在此目录下找到所有的RPM包</p>
</blockquote>
</li>
</ul>
<p>Please refer to <a href="https://source.tizen.org/documentation/reference/git-build-system/configuration-file" target="_blank" rel="external">Configuration File</a> part to configure a repository.</p>
<blockquote>
<p>请参考<a href="https://source.tizen.org/documentation/reference/git-build-system/configuration-file" target="_blank" rel="external">配置文件</a>来配置一个软件包仓库</p>
</blockquote>
<h3 id="Build-workflow-编译流程"><a href="#Build-workflow-编译流程" class="headerlink" title="Build workflow (编译流程)"></a>Build workflow (编译流程)</h3><p>The input and output of gbs build are all repositories.</p>
<blockquote>
<p>gbs build的输入和输出都是仓库</p>
</blockquote>
<p><strong>Note</strong>: All the rpm packages under the output repository (by default, ~/GBS-ROOT/local/repos/&lt;VERSION&gt;/) will be used when building packages. That is, all the packages under the output repository will be applied to the build environment, so make sure the output repository is clean if you don’t want this behavior.</p>
<blockquote>
<p>注意：输出仓库（默认为~/GBS-ROOT/local/repos/&lt;VERSION&gt;/）下所有的rpm包将会被用于编译，如果你不希望使用这些包，请清理掉输出仓库中的rpm包。</p>
</blockquote>
<p>Here’s the basic gbs build workflow</p>
<blockquote>
<p>gbs build的基本流程</p>
</blockquote>
<pre><code> ____________________
|                    |      ___________
| Source Code (GIT)  |----&gt;|           |      _________________________
|____________________|     |           |     |                         |
 ____________________      |           |     |  Local repository of    |
|                    |     |           |     |                         |
|    Build config    |----&gt;| GBS build |----&gt;|                         |
|____________________|     |           |     |                         |
 ____________________      |           |     |  build RPM packages     |
|                    |     |           |     |(~/GBS-ROOT/local/repos/)|
|Binary repositories |     |           |     |_________________________|
|in GBS conf         |----&gt;|___________|                  |
|(Remote or Local)   |           ^                        |
|____________________|           |________________________|
</code></pre><p>From the above diagram, we can see the input and input are all repositories and the output repository located at ‘~/GBS-ROOT/locals/repos/‘ by default. You can change the repo path by using ‘–buildroot’ to specify a different build root.</p>
<blockquote>
<p>输出仓库默认为：<em>~/GBS-ROOT/local/repos</em>，可以通过 <strong>–buildroot</strong> 指定build root来改变仓库路径。</p>
</blockquote>
<p>Local repos in gbs build root (‘~/GBS-ROOT’ by default) will affect build results, so you must make sure that repos don’t contains old or unnecessary RPM packages. While running gbs build, you can specify ‘–clean-repos’ to clean up local repos, which gbs created, before building. We recommend that gbs users set different gbs build root directories for different profiles. There are several ways:</p>
<blockquote>
<p>gbs build root下的本地仓库会影响编译结果，所以你必须要保证仓库里没有旧的软件包或者无关的软件包。在编译的时候可以用 –clean-repos 选项在实际编译前清理 gbs 创建的本地仓库。建议 gbs 使用者针对不同的场景设置不同的 build root 目录。可以使用以下方法：</p>
</blockquote>
<ul>
<li><p>By default, the GBS build will put all output files under ~/GBS-ROOT/.</p>
<blockquote>
<p>GBS build默认会把所有的输出文件都放在 <em>~/GBS-ROOT/</em> 里</p>
</blockquote>
</li>
<li><p>If the environment variable TIZEN_BUILD_ROOT exists, ${TIZEN_BUILD_ROOT} will be used as output top dir</p>
<blockquote>
<p>如果存在环境变量 TIZEN_BUILD_ROOT，其值 $(TIZEN_BUILD_ROOT) 将会作为 build root</p>
</blockquote>
</li>
<li><p>If -B option is specified, then the specified directory is used, even if ${TIZEN_BUILD_ROOT} exists</p>
<blockquote>
<p>如果使用 -B 选项，那么就其参数将作为 build root ，即使环境变量 $(TIZEN_BUILD_ROOT) 存在</p>
</blockquote>
</li>
</ul>
<h3 id="Output-of-gbs-build-gbs-build-输出"><a href="#Output-of-gbs-build-gbs-build-输出" class="headerlink" title="Output of gbs build (gbs build 输出)"></a>Output of gbs build (gbs build 输出)</h3><p>Structure of a GBS build root directory</p>
<blockquote>
<p>GBS build root的目录结构</p>
</blockquote>
<pre><code>gbs output top dir
|-- local
| |-- cache # repodata and RPMs from remote repositories
| |-- repos # generated local repo top directory
| | |-- tizen # distro one: tizen
| | | |-- armv7l # store armv7l RPM packages
| | | |-- i586 # store x86 RPM packages
| | `-- tizen2.0 # build for distro two: tizen2.0
| | `-- i586 # the same as above
| |-- scratch.armv7l.0 # first build root for arm build
| |-- scratch.i586.0 # second build root for x86 build
| |-- scratch.i586.1 # third build root for x86 build
| |-- scratch.i586.2 # fourth build root for x86 build
| |-- scratch.i586.3 # fifth build root for x86 build
| | # The above build root dir can be used by gbs chroot &lt;build root dir&gt;
| `-- sources # sources generated for build, including tarball, spec, patches, etc.
| |-- tizen
| `-- tizen2.0
`-- meta # meta data used by gbs
</code></pre><h2 id="GBS-Build-Examples-Basic-Usage-GBS-Build示例，基本用法"><a href="#GBS-Build-Examples-Basic-Usage-GBS-Build示例，基本用法" class="headerlink" title="GBS Build Examples (Basic Usage) (GBS Build示例，基本用法)"></a>GBS Build Examples (Basic Usage) (GBS Build示例，基本用法)</h2><p>1 Build a single package.</p>
<blockquote>
<p>编译单个包</p>
</blockquote>
<pre><code>$ cd package1
$ gbs build -A i586
</code></pre><p>2 Build a package for different architectures.</p>
<blockquote>
<p>为不同的架构编译包</p>
</blockquote>
<p><strong>Note</strong>: Supported architectures include: x86_64, i586, armv6l, armv7hl, armv7l, aarch64, mips, mipsel.</p>
<blockquote>
<p>注意：支持的架构有： x86_64, i586, armv6l, armv7hl, armv7l, aarch64, mips, mipsel.</p>
</blockquote>
<pre><code>$ gbs build -A armv7l #build package for armv7l
$ gbs build -A i586 #build package for i586
</code></pre><p>3 Make a clean build by deleting the old build root. This option must be specified if the repo has been changed, for example, changed to another release.</p>
<blockquote>
<p>删除旧的build root，全新编译。当软件包仓库有变化时，必须使用这个选项，比如改成使用另一个发行版的软件仓库时.</p>
</blockquote>
<pre><code>$ gbs build -A armv7l --clean
</code></pre><p>4 Build the package with a specific commit.</p>
<blockquote>
<p>为特定提交编译包</p>
</blockquote>
<pre><code>$ gbs build -A armv7l --commit=&lt;COMMIT_ID&gt;
</code></pre><p>5 Use –overwrite to trigger a rebuild.</p>
<blockquote>
<p>用–overwrite触发一次重新编译</p>
</blockquote>
<p>If you have already built before, and want to rebuild, –overwrite should be specified, or the packages will be skipped.</p>
<blockquote>
<p>如果以前已经编译过，并且想重新编译，应该使用–overwrite，否则已经编过的包会被跳过</p>
</blockquote>
<pre><code>$ gbs build -A i586 --overwrite
</code></pre><p>If you change the commit or specify –include-all option, it will always rebuild, so –overwrite is not needed.</p>
<blockquote>
<p>如果有新提交或者带选项–include-all，则GBS总是会重新编译，此时滴必要使用–overwrite</p>
</blockquote>
<p>6 Output the debug info.</p>
<blockquote>
<p>输出调试信息</p>
</blockquote>
<pre><code>$ gbs build -A i586 --debug
</code></pre><p>7 Build against a local repository. You can config the local repo at .gbs.conf file or through the command line.</p>
<pre><code>$ gbs build -R /path/to/repo/dir/ -A i586
</code></pre><p>8 Use –noinit to build package in offline mode.</p>
<blockquote>
<p>使用 –noinit 选项，在离线模式下编译</p>
</blockquote>
<p>–noinit option can only be used if build root is ready. With –noinit option, gbs will not connect the remote repo, and skip parsing &amp; checking repo and initialize build environment. rpmbuild will be used to build the package directly. Here’s an example:</p>
<blockquote>
<p>在build root准备好的情况下，可以使用选项 –noinit。使用 –noinit 选项时，gbs不会连接远程仓库并且会跳过解析/检查仓库和初始化编译环境，直接使用rpmbuild编译包. </p>
<p><strong>重要</strong>：此选项可用于快速编译</p>
</blockquote>
<pre><code>$ gbs build -A i586 # build first and create build environment
$ gbs build -A i586 --noinit # use --noinit to start building directly
</code></pre><p>9 Build with all uncommitted changes using –include-all.</p>
<blockquote>
<p>使用 –include-all 选项编译所有的未提交的改动</p>
<p><strong>重要</strong>，此选项为常用选项，当用户本地有修改又没有提交时，经常需要使用此选项用于测试新代码</p>
</blockquote>
<p>For example, the git tree contains one modified file and two extra files:</p>
<blockquote>
<p>例如，git目录中包含一个改动的文件和二个新加的文件</p>
</blockquote>
<pre><code>$ git status -s
M ail.pc.in
?? base.repo
?? main.repo
</code></pre><p><strong>Build without the –include-all option</strong></p>
<blockquote>
<p>不用–include-all编译</p>
</blockquote>
<p>Builds committed files only. All the modified files, which are not committed nor added, will NOT be built:</p>
<blockquote>
<p>仅编译已提交的文件。所有未提交或未添加到版本控制的文件都不会被编译:</p>
</blockquote>
<pre><code>$ gbs build -A i586
warning: the following untracked files would NOT be included: base.repo main.repo
warning: the following uncommitted changes would NOT be included: ail.pc.in
warning: you can specify &apos;--include-all&apos; option to include these uncommitted and untracked files.
....
info: Binaries RPM packages can be found here:
/home/test/GBS-ROOT/local/scratch.i586.0/home/abuild/rpmbuild/RPMS/
info: Done
</code></pre><p><strong>Build with the –include-all option builds all the files</strong></p>
<blockquote>
<p>使用–include-all来编译所有的文件</p>
</blockquote>
<pre><code>$ gbs build -A i586 --include-all
info: the following untracked files would be included: base.repo main.repo
info: the following un-committed changes would be included: ail.pc.in
info: export tar ball and packaging files
...
...
[build finished]
</code></pre><p><strong>Use .gitignore to ignore specific files, when using the –include-all option.</strong></p>
<blockquote>
<p>当使用–incldue-all时可以用.gitignore来忽略特定的文件</p>
</blockquote>
<p>If you want to ignore some files types, you can update your .gitignore. For example:</p>
<blockquote>
<p>如果要想忽略某类型文件可以修改.gitignore，例如：</p>
</blockquote>
<pre><code>$ cat .gitignore
.*
*/.*
*.pyc
*.patch*
</code></pre><h2 id="Incremental-build"><a href="#Incremental-build" class="headerlink" title="Incremental build"></a>Incremental build</h2><blockquote>
<p>增量编译</p>
</blockquote>
<h3 id="Incremental-Concept"><a href="#Incremental-Concept" class="headerlink" title="Incremental Concept"></a>Incremental Concept</h3><blockquote>
<p>增量的概念</p>
</blockquote>
<p>Starting from gbs 0.10, the gbs build subcommand supports building incrementally, which can be enabled by specifying the ‘–incremental’ option.</p>
<blockquote>
<p>从gbs 0.10开始，gbs build就支持增量式的编译，通过指定–incremental选项来启用。</p>
</blockquote>
<p>This mode is designed for development and verification of single packages. It is not intended to replace the standard mode. Only one package can be built at a time using this mode.</p>
<blockquote>
<p>这种模式主要用来开发和验证单个软件包，不是用来替代标准的编译模式。在此模式下，一次只能编译一个包。</p>
</blockquote>
<p>This mode will set up the build environment in multiple steps, finishing by mounting the local Git tree of a package in the chroot build environment.</p>
<blockquote>
<p>这种模式分成多步来设置编译环境，把本地的软件包的Git目录绑定到chroot的编译目录后就完成了。</p>
</blockquote>
<p>Note: Because gbs will mount your git tree to the build root, be very careful when you remove your build root. You need to make sure you’ve already umounted the source tree manually before you remove it.</p>
<blockquote>
<p>注意：因为gbs会把git目录绑定到buid root，所以当要删除build root时要非常小心，删除前要确定已经手动地把源码解绑定。</p>
</blockquote>
<p>This has the following benefits:</p>
<blockquote>
<p>这种模式有以下优点：</p>
</blockquote>
<ul>
<li><p>The build environment uses the latest source code and changes to source do not trigger a new build environment (in the chroot).</p>
<blockquote>
<p>编译环境可以使用最新的源代码，并且代码的改动不会修改编译环境</p>
</blockquote>
</li>
<li><p>The Git source tree becomes the source of the builds. Any change made in the Git repository followed by invocation of the build script will build the changed sources</p>
<blockquote>
<p>git目录变成了编译的源目录，只要在git中的任何改动之后，调用编译命令，就可以编译改动过的源代码</p>
</blockquote>
</li>
<li><p>If the build fails for some reason, the build script will continue from the spot where it has failed, once the code has been changed to fix the problem causing the failure.</p>
<blockquote>
<p>编译失败后，一旦导致编译失败的错误被修正，编译脚本会从先前失败的地方接着编译</p>
</blockquote>
</li>
</ul>
<p>This mode is, in many ways, similar to traditional code development, where changes are made to sources, followed by running make to test and compile the changes. However, it enables development using the build environment of the target, instead of the host OS.</p>
<blockquote>
<p>从不同的方面说，这种模式类似于传统的代码开发：修改代码然后运行make编译改动。不同的地方在于，增量编译使用编译环境而不是宿主机器的操作系统</p>
</blockquote>
<p>This method has some limitations, mostly related to packaging and how the sources are maintained. Among others, it depends on how the RPM spec file is composed:</p>
<blockquote>
<p>这种模式有一些限制，都是关于打包和代码的管理。尤其是依赖于RPM的spec文件</p>
</blockquote>
<ul>
<li><p>It does not support patches in the spec file. All source has to be maintained as part of the Git tree</p>
<blockquote>
<p>不支持spec文件中的patches，所有的源码必须是git目录的一部分</p>
</blockquote>
</li>
<li><p>It requires a clean packaging workflow. Exotic workflows in the spec files might not work well, because this mode expects the following model:</p>
<blockquote>
<p>需要一个整洁的打包流程。spec文件中的极特殊的流程可能不会有效，因为这种模式预期以下模型：</p>
</blockquote>
<ol>
<li>Code preparation (%prep) （代码准备）</li>
<li>Code building (%build) （代码编译）</li>
<li>Code installation (%install) （代码安装）</li>
</ol>
</li>
</ul>
<ul>
<li><p>Because we run the %build section every time, if the %build script has configuration scripts (auto-tools), binaries might be regenerated, causing a complete build every time. To avoid this, you are encouraged to use the following macros, which can be overridden using the –no-configure option:</p>
<blockquote>
<p>因为每次都运行编译部分，如果%build脚本有自动配置脚本，二进制文件会被重新生成，导致每次都完全编译。为了避免这样情况发生，推荐使用下面的宏，这些宏能够用–no-configure选项来覆盖</p>
</blockquote>
<ol>
<li>%configure: runs the configure script with pre-defined paths and options.</li>
<li>%reconfigure: regenerates the scripts and runs %configure</li>
<li>%autogen: runs the autogen script</li>
</ol>
</li>
</ul>
<h3 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h3><p>In this example, we use dlog source code. First, we need to build with –incremental, then just modify one source file, and trigger the incremental build again. We will see that only modified source code has been compiled during the incremental build.</p>
<pre><code>$ cd dlog
# first build:
$ gbs build -A i586 --incremental
$ vim log.c # change code
# second build:
$ gbs build -A i586 --incremental
info: generate repositories ...
info: build conf has been downloaded at:
/var/tmp/test-gbs/tizen.conf
info: Start building packages from: /home/test/packages/dlog (git)
info: Prepare sources...
info: Retrieving repo metadata...
info: Parsing package data...
info: *** overwriting dlog-0.4.1-5.1 i586 ***
info: Next pass:
dlog
info: *** building dlog-0.4.1-5.1 i586 tizen (worker: 0) ***
info: Doing incremental build
[ 0s] Memory limit set to 10854336KB
[ 0s] Using BUILD_ROOT=/home/test/GBS-ROOT/local/scratch.i586.0
[ 0s] Using BUILD_ARCH=i686:i586:i486:i386:noarch
[ 0s] test-desktop started &quot;build dlog.spec&quot; at Thu Sep 13 07:36:14 UTC 2012.
[ 0s] -----------------------------------------------------------------
[ 0s] ----- building dlog.spec (user abuild)
[ 0s] -----------------------------------------------------------------
[ 0s] -----------------------------------------------------------------
[ 0s] + rpmbuild --short-circuit -bc /home/abuild/rpmbuild/SOURCES/dlog.spec
[ 0s] Executing(%build): /bin/sh -e /var/tmp/rpm-tmp.XLz8je
[ 0s] + umask 022
[ 0s] + export LD_AS_NEEDED
[ 4s] + make -j4
[ 4s] make all-am
[ 4s] make[1]: Entering directory /home/abuild/rpmbuild/BUILD/dlog-0.4.1
[ 4s] /bin/sh ./libtool --tag=CC --mode=compile gcc -c -o log.lo log.c
[ 4s] mv -f .deps/log.Tpo .deps/log.Plo
[ 4s] /bin/sh ./libtool --tag=CC --mode=link gcc -o libdlog.la /usr/lib log.lo
[ 4s] libtool: link: gcc -shared .libs/log.o -o .libs/libdlog.so.0.0.0
[ 4s] libtool: link: ar cru .libs/libdlog.a log.o
[ 4s] libtool: link: ranlib .libs/libdlog.a
[ 4s] make[1]: Leaving directory /home/abuild/rpmbuild/BUILD/dlog-0.4.1
[ 4s] + exit 0
[ 4s] finished &quot;build dlog.spec&quot; at Thu Sep 13 07:36:18 UTC 2012.
[ 4s]
info: finished incremental building dlog
info: Local repo can be found here:
/home/test/GBS-ROOT/local/repos/tizen/
info: Done
</code></pre><p>From the buildlog, we can see that only log.c has been re-compiled. That’s the incremental build behavior.</p>
<p>–noinit option can be used together with –incremental to make a build more quickly, like:</p>
<pre><code>$ gbs build --incremental --noinit
</code></pre><h3 id="Limitations-of-Incremental-Build"><a href="#Limitations-of-Incremental-Build" class="headerlink" title="Limitations of Incremental Build"></a>Limitations of Incremental Build</h3><blockquote>
<p>增量编译的限制</p>
</blockquote>
<p>Incremental build doesn’t support all packages. Here are some limitations:</p>
<blockquote>
<p>增量编译不支持所有的包。一些限制如下:</p>
</blockquote>
<ul>
<li><p>Incremental build currently supports building only a single package. It doesn’t support building multiple packages in parallel</p>
<blockquote>
<p>只支持单个包</p>
</blockquote>
</li>
<li><p>The tarball’s name in the spec file should be %{name}-%{version}.{tar.gz|tar.bz2|zip|…}, otherwise GBS can’t mount source code to build the root correctly</p>
<blockquote>
<p>spec文件中的压缩包名字必须是%{name}-%{version}.{tar.gz|tar.bz2|zip|…}，否则GBS无法正确把源码绑定到build root中</p>
</blockquote>
</li>
<li><p>%prep section should only contains %setup macro to unpack tarball, and should not contains other source code related operations, such as unpack another source, apply patches, etc.</p>
<blockquote>
<p>%prep部分应该仅包含用于解圧压缩包的%setup宏，而不应该含有对源代码的其他操作，比如解压其他源码或打patch等都不允许</p>
</blockquote>
</li>
</ul>
<h2 id="Multiple-packages-build-dependency-build-多包编译"><a href="#Multiple-packages-build-dependency-build-多包编译" class="headerlink" title="Multiple packages build (dependency build) (多包编译)"></a>Multiple packages build (dependency build) (多包编译)</h2><p>Multiple package build has been supported since gbs 0.10. If packages have dependencies on each other, gbs will build packages in the correct order calculated by dependency relationship. Previously built out RPMs will be used to build the following packages that depend on them, which is the dependency build.</p>
<blockquote>
<p>从gbs 0.10开始就支持多包编译。如果包有相互的依赖，gbs会计算出它们之间的关系然后按正确的顺序来编译。作为依赖编译，先前编译出的RPM包会用来编译后面的有依赖需求的包</p>
</blockquote>
<p>Examples:</p>
<p>1 Build all packages under a specified package directory</p>
<blockquote>
<p>编译指定目录下的所有的包</p>
</blockquote>
<pre><code>$ mkdir tizen-packages
$ cp package1 package2 package3 ... tizen-packages/
$ gbs build -A i586 tizen-packages # build all packages under tizen-packages
</code></pre><p>2 Build multiple packages in parallel with –threads</p>
<blockquote>
<p>使用–threads选项来并行编译多个包</p>
</blockquote>
<pre><code># current directory have multiple packages, --threads can be used to set the max build worker at the same time
$ gbs build -A armv7l --threads=4
</code></pre><p>3 Select a group of packages to be built</p>
<blockquote>
<p>选择编译一组包</p>
</blockquote>
<p>The –binary-from-file option specifies a text file that contains a name list of RPM packages to be built. The format in the text file is one package per line.</p>
<p>The –binary-list option specifies a list in which the package names are separated by comma.</p>
<p>When the number of packages is small, thus the packages can be clearly presented in command line, it is recommended to use the –binary-list option for simplicity.</p>
<pre><code>$ gbs build -A i586 --binary-from-file=/path/to/packages.list
$ gbs build -A i586 --binary-list=&lt;pkg1&gt;,&lt;pkg2&gt;
</code></pre><p>4 Exclude certain packages.</p>
<blockquote>
<p>排除某些包</p>
</blockquote>
<p>The –exclude option specifies a list in which the names of packages to be ignored are separated by comma. The –exclude-from-file option specifies a text file that contains a name list of packages to be ignored.</p>
<pre><code>$ gbs build -A i586 tizen-packages --exclude=&lt;pkg1&gt;
$ gbs build -A i586 tizen-packages --exclude=&lt;pkg1&gt;,&lt;pkg2&gt;
$ gbs build -A i586 tizen-packages --exclude-from-file=/path/to/packages.list
</code></pre><p>5 Build packages based on dependencies.</p>
<blockquote>
<p>基于依赖来编译包</p>
</blockquote>
<p>The –deps option enables GBS to build specific packages, together with all the related packages on which they depend.The –rdep option enables GBS to build specific packages, together with all the related packages that depend on them.</p>
<p>The specific packages can be included by the –binary-from-file option or the –binary-list option, and be excluded by the –exclude option or the –exclude-from-file option.</p>
<p>These two options are compatible. When added at the same time, besides the specific packages, GBS will build not only the related packages on which they depend, but also all the related packages that depend on them.</p>
<pre><code>$ gbs build -A i586 --binary-list=&lt;pkg1&gt;,&lt;pkg2&gt; --deps
$ gbs build -A i586 --binary-list=&lt;pkg1&gt;,&lt;pkg2&gt; --rdeps
$ gbs build -A i586 --binary-list=&lt;pkg1&gt;,&lt;pkg2&gt; --deps --rdeps
</code></pre><h2 id="Other-useful-options-其他有用的选项"><a href="#Other-useful-options-其他有用的选项" class="headerlink" title="Other useful options (其他有用的选项)"></a>Other useful options (其他有用的选项)</h2><h3 id="Install-extra-packages-to-build-root"><a href="#Install-extra-packages-to-build-root" class="headerlink" title="Install extra packages to build root"></a>Install extra packages to build root</h3><blockquote>
<p>安装额外的包到build root中</p>
</blockquote>
<p>–extra-packs=<pkgs list="" sep="" by="" comma=""> can be used to install extra packages:</pkgs></p>
<pre><code>$ gbs build --extra-packs=vim,zypper,gcc,gdb ...
</code></pre><h3 id="Keep-all-packages-in-build-root"><a href="#Keep-all-packages-in-build-root" class="headerlink" title="Keep all packages in build root"></a>Keep all packages in build root</h3><blockquote>
<p>保留所有build root中的包</p>
</blockquote>
<p>Generally, gbs build will remove unnecessary packages in build root. While transferring to build another package, you can use –keep-packs to keep all unnecessary packages, and just install missing build required packages. This option can be used to speed up build multiple packages.</p>
<blockquote>
<p>通常情况下，gbs build会把build root中的不需要的包删除掉。当要编译另外的包时可以使用–keep-packs选项来保留不再需要的包而只安装缺失的依赖包。这个选项可以加速多个包的编译。</p>
<p><strong>重要</strong>：重要选项，可以节省编译时间</p>
</blockquote>
<pre><code>$ gbs build --keep-packs
</code></pre><p>–keep-packs can be used to create one build root for building multiple packages. Once the build root is ready, you can use –noinit to build these packages quickly.</p>
<blockquote>
<p>–keep-packs选项可以用来为多个包创建一个build root。一旦build root准备好，就可以用 –noinit 选项来快速的编译这些包</p>
<p><strong>重要</strong>：–keep-packs 配合 –noinit，可以节省编译时间</p>
</blockquote>
<pre><code>$ gbs build pkg1/ --keep-packs -A i586
$ gbs build pkg2/ --keep-packs -A i586
$ gbs build pkg3/ --keep-packs -A i586
</code></pre><p>Now, the build root (~/GBS-ROOT/local/scratch.i586.0) is ready for building pkg1, pkg2, and pkg3. You can use –noinit to build them offline, and don’t need waste time to check repo updates and build root.</p>
<pre><code>$ gbs build pkg1 --noinit
$ gbs build pkg2 --noinit
$ gbs build pkg3 --noinit
</code></pre><h2 id="Fetch-the-project-build-conf-and-customize-build-root-for-Advanced-Users-（高级用户，获取项目的编译配置和定制build-root）"><a href="#Fetch-the-project-build-conf-and-customize-build-root-for-Advanced-Users-（高级用户，获取项目的编译配置和定制build-root）" class="headerlink" title="Fetch the project build conf and customize build root (for Advanced Users) （高级用户，获取项目的编译配置和定制build root）"></a>Fetch the project build conf and customize build root (for Advanced Users) （高级用户，获取项目的编译配置和定制build root）</h2><p>Project build conf describes the project build configurations for the project, including pre-defined macros/packages/flags in the build environment. In Tizen releases, the build conf is released together with the released repo. You can find an example at: <a href="http://download.tizen.org/releases/daily/trunk/ivi/latest/builddata/xxx-build.conf" target="_blank" rel="external">http://download.tizen.org/releases/daily/trunk/ivi/latest/builddata/xxx-build.conf</a></p>
<pre><code>gbs build will fetch the build conf automatically
</code></pre><p>Starting from gbs 0.7.1, by default, gbs will fetch the build conf from a remote repo, if you specify the remote Tizen repo, and then store it in your temp environment. Here’s the build log:</p>
<pre><code>$ gbs build -A i586
info: generate repositories ...
info: build conf has been downloaded at:
/var/tmp/&lt;user&gt;-gbs/tizen2.0.conf
info: generate tar ball: packaging/acpid-2.0.14.tar.bz2
[sudo] password for &lt;user&gt;:

build the package using your own project build conf, using the -D option
</code></pre><p>You can save it and modify it, and then use it for your purposes:</p>
<pre><code>cp /var/tmp/&lt;user&gt;-gbs/tizen2.0.conf ~/tizen2.0.conf
$ gbs build -A i586 -D ~/tizen2.0.conf
</code></pre><p>If you need to customize the build config, refer to: <a href="http://en.opensuse.org/openSUSE:Build_Service_prjconf" target="_blank" rel="external">http://en.opensuse.org/openSUSE:Build_Service_prjconf</a></p>
<p><em>Reference: <a href="https://source.tizen.org/documentation/reference/git-build-system/usage/gbs-build" target="_blank" rel="external">https://source.tizen.org/documentation/reference/git-build-system/usage/gbs-build</a></em></p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="/2016/03/13/setup-proxy-for-node-gyp/" itemprop="url">
                  node-gyp 设置 Proxy
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            Posted on
            <time itemprop="dateCreated" datetime="2016-03-13T20:24:54+08:00" content="2016-03-13">
              2016-03-13
            </time>
          </span>

          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h1 id="node-gyp-设置-Proxy"><a href="#node-gyp-设置-Proxy" class="headerlink" title="node-gyp 设置 Proxy"></a>node-gyp 设置 Proxy</h1><p>node-gyp 提供 4 种方式通过Proxy连接</p>
<p>1) 使用命令行参数 <code>–proxy=http://proxy_address:proxy_port</code></p>
<p>2) 使用环境变量 <code>http_proxy</code></p>
<p>3) 使用环境变量 <code>HTTP_PROXY</code></p>
<p>4) 使用环境变量 <code>npm_config_proxy</code></p>
<blockquote>
<p><strong>注意</strong>：Proxy的 <strong>http://</strong> 不能省略</p>
</blockquote>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="/2016/03/13/how-to-download-chrome-installation-package/" itemprop="url">
                  如何下载离线版Windows Chrome安装文件
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            Posted on
            <time itemprop="dateCreated" datetime="2016-03-13T19:36:54+08:00" content="2016-03-13">
              2016-03-13
            </time>
          </span>

          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h1 id="如何下载离线版Windows-Chrome安装文件"><a href="#如何下载离线版Windows-Chrome安装文件" class="headerlink" title="如何下载离线版Windows Chrome安装文件"></a>如何下载离线版Windows Chrome安装文件</h1><p><strong>方法如下：</strong></p>
<p>对于Stable Chrome来说，只需要在Chrome的“最终用户许可协议”页面链接后面添加<strong>”?standalone=1″</strong>即可，也就是：</p>
<p><a href="http://www.google.com/chrome/eula.html?standalone=1" target="_blank" rel="external">http://www.google.com/chrome/eula.html?standalone=1</a></p>
<p>对于特定版本的Chrome来说，按以下地址：</p>
<p><a href="http://dl.google.com/chrome/install/{version" target="_blank" rel="external">http://dl.google.com/chrome/install/{version</a> number}/chrome_installer.exe</p>
<p>其中的 <strong>version number</strong> 代表你要下载的Chrome版本号的后面两个数字，比如4.0.223.11的离线包下载地址就是</p>
<p><a href="http://dl.google.com/chrome/install/223.11/chrome_installer.exe" target="_blank" rel="external">http://dl.google.com/chrome/install/223.11/chrome_installer.exe</a></p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="/2016/03/13/design-pattern/" itemprop="url">
                  设计模式
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            Posted on
            <time itemprop="dateCreated" datetime="2016-03-13T19:33:39+08:00" content="2016-03-13">
              2016-03-13
            </time>
          </span>

          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h1 id="Design-Pattern"><a href="#Design-Pattern" class="headerlink" title="Design Pattern"></a>Design Pattern</h1><p>设计模式（Design pattern）是一套被反复使用、多数人知晓的、经过分类编目的、代码设计经验的总结。使用设计模式是为了可重用代码、让代码更容易被他人理解、保证代码可靠性。 毫无疑问，设计模式于己于他人于系统都是多赢的；设计模式使代码编制真正工程化；设计模式是软件工程的基石脉络，如同大厦的结构一样。</p>
<h2 id="设计模式4要素"><a href="#设计模式4要素" class="headerlink" title="设计模式4要素"></a>设计模式4要素</h2><p><strong>1. 模式名称 (pattern name)</strong><br>用一两个词来描述模式的问题、解决方案和效果。</p>
<p><strong>2. 问题(problem)</strong><br>描述了应当在何时使用模式</p>
<p><strong>3. 解决方案(solution)</strong><br>描述了设计的组成部分</p>
<p><strong>4. 效果(consequences)</strong><br>描述了应用模式的效果和使用模式应权衡的问题</p>
<h2 id="设计模式类型"><a href="#设计模式类型" class="headerlink" title="设计模式类型"></a>设计模式类型</h2><p>设计模式分为三种类型，共23种。</p>
<table>
<thead>
<tr>
<th>创建型</th>
<th>结构型</th>
<th>行为型</th>
</tr>
</thead>
<tbody>
<tr>
<td>Factory Method</td>
<td>Bridge</td>
<td>Template Method</td>
</tr>
<tr>
<td>Abstract Factory</td>
<td>Adapter</td>
<td>Strategy</td>
</tr>
<tr>
<td>Singleton</td>
<td>Decorator</td>
<td>Observer</td>
</tr>
<tr>
<td>Builder</td>
<td>Composite</td>
<td>Memento</td>
</tr>
<tr>
<td>Prototype</td>
<td>Flyweight</td>
<td>Mediator</td>
</tr>
<tr>
<td></td>
<td>Facade</td>
<td>Command</td>
</tr>
<tr>
<td></td>
<td>Proxy</td>
<td>Visitor</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Chain of Responsibilty</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Iterator</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Interpreter</td>
</tr>
</tbody>
</table>
<p><strong>创建型模式与对象的创建有关；结构型模式处理类或对象的组合；行为型模式对类或对象怎样交互和怎样分配职责进行描述</strong></p>
<h1 id="创建型模式"><a href="#创建型模式" class="headerlink" title="创建型模式"></a>创建型模式</h1><table>
<thead>
<tr>
<th>Pattern</th>
<th>Descriptions</th>
</tr>
</thead>
<tbody>
<tr>
<td>Factory Method(工厂模式)</td>
<td>定义一个用于创建对象的接口，让子类决定将哪一个类实例化。Factory Method使一个类的实例化延迟到其子类。</td>
</tr>
<tr>
<td>Abstract Factory(抽象工厂模式)</td>
<td>提供一个创建一系列相关或相互依赖对象的接口，而无需指定它们具体的类。</td>
</tr>
<tr>
<td>Singleton(单例模式)</td>
<td>保证一个类仅有一个实例，并提供一个访问它的全局访问点。</td>
</tr>
<tr>
<td>Builder(建造者模式)</td>
<td>将一个复杂对象的构建与它的表示分离，使得同样的构建过程可以创建不同的表示。</td>
</tr>
<tr>
<td>Prototype(原型模式)</td>
<td>用原型实例指定创建对象的种类，并且通过拷贝这个原型来创建新的对象。</td>
</tr>
</tbody>
</table>
<h1 id="结构型模式"><a href="#结构型模式" class="headerlink" title="结构型模式"></a>结构型模式</h1><table>
<thead>
<tr>
<th>Pattern</th>
<th>Descriptions</th>
</tr>
</thead>
<tbody>
<tr>
<td>Bridge(桥接模式)</td>
<td>将抽象部分与它的实现部分分离，使它们都可以独立地变化。</td>
</tr>
<tr>
<td>Adapter(适配器模式)</td>
<td>将一个类的接口转换成客户希望的另外一个接口。Adapter模式使得原本由于接口不兼容而不能一起工作的那些类可以一起工作。</td>
</tr>
<tr>
<td>Decorator(装饰器模式)</td>
<td>动态地给一个对象添加一些额外的职责。就扩展功能而言， 它比生成子类方式更为灵活。</td>
</tr>
<tr>
<td>Composite(组合模式)</td>
<td>将对象组合成树形结构以表示“部分-整体”的层次结构。它使得客户对单个对象和复合对象的使用具有一致性。</td>
</tr>
<tr>
<td>Flyweight(享元模式)</td>
<td>运用共享技术有效地支持大量细粒度的对象。</td>
</tr>
<tr>
<td>Facade(外观模式)</td>
<td>为子系统中的一组接口提供一个一致的界面，Facade模式定义了一个高层接口，这个接口使得这一子系统更加容易使用。</td>
</tr>
<tr>
<td>Proxy(代理模式)</td>
<td>为其他对象提供一个代理以控制对这个对象的访问。</td>
</tr>
</tbody>
</table>
<h1 id="行为型模式"><a href="#行为型模式" class="headerlink" title="行为型模式"></a>行为型模式</h1><table>
<thead>
<tr>
<th>Pattern</th>
<th>Descriptions</th>
</tr>
</thead>
<tbody>
<tr>
<td>Template Method(模板方法模式)</td>
<td>定义一个操作中的算法的骨架，而将一些步骤延迟到子类中。Template Method使得子类可以不改变一个算法的结构即可重定义该算法的某些特定步骤。</td>
</tr>
<tr>
<td>Strategy(策略模式)</td>
<td>定义一系列的算法,把它们一个个封装起来, 并且使它们可相互替换。本模式使得算法的变化可独立于使用它的客户。</td>
</tr>
<tr>
<td>Observer(观察者模式)</td>
<td>定义对象间的一种一对多的依赖关系,以便当一个对象的状态发生改变时,所有依赖于它的对象都得到通知并自动刷新。</td>
</tr>
<tr>
<td>Memento(备忘录模式)</td>
<td>在不破坏封装性的前提下，捕获一个对象的内部状态，并在该对象之外保存这个状态。这样以后就可将该对象恢复到保存的状态。</td>
</tr>
<tr>
<td>Mediator(中介模式)</td>
<td>用一个中介对象来封装一系列的对象交互。中介者使各对象不需要显式地相互引用，从而使其耦合松散，而且可以独立地改变它们之间的交互。</td>
</tr>
<tr>
<td>Command(命令模式)</td>
<td>将一个请求封装为一个对象，从而使你可用不同的请求对客户进行参数化；对请求排队或记录请求日志，以及支持可取消的操作。</td>
</tr>
<tr>
<td>Visitor(访问者模式)</td>
<td>表示一个作用于某对象结构中的各元素的操作。它使你可以在不改变各元素的类的前提下定义作用于这些元素的新操作。</td>
</tr>
<tr>
<td>Chain of Responsibilty(职责链模式)</td>
<td>为解除请求的发送者和接收者之间耦合，而使多个对象都有机会处理这个请求。将这些对象连成一条链，并沿着这条链传递该请求，直到有一个对象处理它。</td>
</tr>
<tr>
<td>Iterator(迭代器模式)</td>
<td>提供一种方法顺序访问一个聚合对象中各个元素，而又不需暴露该对象的内部表示。</td>
</tr>
<tr>
<td>Interpreter(解析器模式)</td>
<td>给定一个语言, 定义它的文法的一种表示，并定义一个解释器, 该解释器使用该表示来解释语言中的句子。</td>
</tr>
</tbody>
</table>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="/2016/03/12/configure-PPTP-VPN-in-Ubuntu/" itemprop="url">
                  Ubuntu下配置PPTP VPN
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            Posted on
            <time itemprop="dateCreated" datetime="2016-03-12T15:22:29+08:00" content="2016-03-12">
              2016-03-12
            </time>
          </span>

          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h1 id="Configure-PPTP-VPN-in-Ubuntu"><a href="#Configure-PPTP-VPN-in-Ubuntu" class="headerlink" title="Configure PPTP VPN in Ubuntu"></a>Configure PPTP VPN in Ubuntu</h1><h2 id="安装pptpd"><a href="#安装pptpd" class="headerlink" title="安装pptpd"></a>安装pptpd</h2><pre><code>$ sudo apt-get install pptpd
</code></pre><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p><strong>编辑pptpd.conf</strong></p>
<pre><code>$ sudo vi /etc/pptpd.conf
</code></pre><p>修改如下两行：</p>
<pre><code>localip xxx.xxx.xxx.xxx
remoteip 192.168.1.100-200
</code></pre><blockquote>
<p>localip: Ubuntu主机的IP</p>
<p>remoteip: 分配给Client的IP段</p>
</blockquote>
<p><strong>设置Windows Client的DNS</strong></p>
<pre><code>$ sudo vi /etc/ppp/pptpd-options
</code></pre><p>修改<code>ms-dns</code>，修改为google的dns：</p>
<pre><code>ms-dns 8.8.8.8
ms-dns 8.8.4.4
</code></pre><p><strong>设置账号</strong></p>
<pre><code>$ sudo vi /etc/ppp/chap-secrets
</code></pre><p>添加一行，依次为：用户名，服务，密码，限制ip：</p>
<pre><code>&quot;user&quot; pptpd &quot;user&quot; *
</code></pre><p>或</p>
<pre><code>username * password *
</code></pre><p><strong>重启服务</strong></p>
<pre><code>$ sudo /etc/init.d/pptpd restart
</code></pre><p>执行以上步骤后VPN即可连接上了，但是还无法上网。</p>
<h2 id="设置IP转发"><a href="#设置IP转发" class="headerlink" title="设置IP转发"></a>设置IP转发</h2><p><strong>允许转发</strong></p>
<pre><code>$ sudo vi /etc/sysctl.conf
</code></pre><p>去掉文件中这一行的注释：</p>
<pre><code>net.ipv4.ip_forward=1
</code></pre><p>使设置生效：</p>
<pre><code>$ sudo sysctl -p
</code></pre><p><strong>设置<code>NAT</code></strong></p>
<pre><code>$ sudo iptables -t nat -A POSTROUTING -s 192.168.1.0/24 -o eth0 -j MASQUERADE
</code></pre><p>设置MTU，防止包过大：</p>
<pre><code>$ sudo iptables -A FORWARD -s 192.168.1.0/24 -p tcp -m tcp --tcp-flags SYN,RST SYN -j TCPMSS --set-mss 1200
</code></pre><p><strong>保存设置</strong></p>
<pre><code>$ sudo iptables-save
</code></pre><p>将输出保存到以下文件中</p>
<pre><code>$ sudo /etc/iptables-rules
</code></pre><p><strong>自动加载规则</strong></p>
<p>编辑网卡文件，加载网卡时自动加载规则</p>
<pre><code>$ sudo vi  /etc/network/interfaces
</code></pre><p>添加一行：</p>
<pre><code>pre-up iptables-restore &lt; /etc/iptables-rules
</code></pre><blockquote>
<p>Fin</p>
</blockquote>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="/2016/03/12/create-github-page-with-hexo/" itemprop="url">
                  在Github上利用Hexo创建博客
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            Posted on
            <time itemprop="dateCreated" datetime="2016-03-12T13:49:00+08:00" content="2016-03-12">
              2016-03-12
            </time>
          </span>

          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h1 id="在Github上利用Hexo创建博客"><a href="#在Github上利用Hexo创建博客" class="headerlink" title="在Github上利用Hexo创建博客"></a>在Github上利用Hexo创建博客</h1><blockquote>
<p><a href="https://hexo.io" title="https://hexo.io" target="_blank" rel="external">Hexo</a>是一款基于Nodejs的，快速、简单且功能强大的博客框架。支持多线程，支持markdown编写文章，可以方便的生成静态网页托管在github上。</p>
</blockquote>
<h2 id="Install-Hexo"><a href="#Install-Hexo" class="headerlink" title="Install Hexo"></a>Install Hexo</h2><p>步骤：</p>
<p>1 安装 Git</p>
<blockquote>
<p>下载并安装 msysgit</p>
</blockquote>
<p>2 安装 node.js 和 npm</p>
<blockquote>
<p>下载并安装 nodejs</p>
</blockquote>
<p>3 安装 Hexo</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-cli -g</span><br></pre></td></tr></table></figure>
<p>4 创建Hexo文件夹</p>
<blockquote>
<p>创建一个文件夹用于编写本地博客，如（<code>E:\hexo</code>）。</p>
</blockquote>
<p>在此文件夹中输入以下命令进行初始化：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo init</span><br></pre></td></tr></table></figure>
<p>5 安装依赖包</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install</span><br></pre></td></tr></table></figure>
<p>至此，我们就安装好Hexo了，并且可以开始撰写本地博客了。</p>
<h2 id="Using-Hexo"><a href="#Using-Hexo" class="headerlink" title="Using Hexo"></a>Using Hexo</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Usage: hexo &lt;<span class="built_in">command</span>&gt;</span><br><span class="line"></span><br><span class="line">Commands:</span><br><span class="line">  clean     Removed generated files and cache.</span><br><span class="line">  config    Get or <span class="built_in">set</span> configurations.</span><br><span class="line">  deploy    Deploy your website.</span><br><span class="line">  generate  Generate static files.</span><br><span class="line">  <span class="built_in">help</span>      Get <span class="built_in">help</span> on a command.</span><br><span class="line">  init      Create a new Hexo folder.</span><br><span class="line">  list      List the information of the site</span><br><span class="line">  migrate   Migrate your site from other system to Hexo.</span><br><span class="line">  new       Create a new post.</span><br><span class="line">  publish   Moves a draft post from _drafts to _posts folder.</span><br><span class="line">  render    Render files with renderer plugins.</span><br><span class="line">  server    Start the server.</span><br><span class="line">  version   Display version information.</span><br></pre></td></tr></table></figure>
<p><strong>常用命令：</strong></p>
<p>创建一篇新的博客</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo new</span><br><span class="line">or</span><br><span class="line">hexo n</span><br></pre></td></tr></table></figure>
<p>生成静态博客文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo generate</span><br><span class="line">or</span><br><span class="line">hexo g</span><br></pre></td></tr></table></figure>
<p>启动本地服务</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo server</span><br><span class="line">or</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure>
<p>执行可以在浏览器中输入<a href="http://localhost:4000" title="localhost:4000" target="_blank" rel="external">localhost:4000</a> 预览博客。</p>
<h2 id="Deploy"><a href="#Deploy" class="headerlink" title="Deploy"></a>Deploy</h2><p>部署之前先要配置一下Hexo。</p>
<p>1 安装<strong>hexo-deployer-git</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>
<p>2 在目录 <code>E:\hexo</code> 下，编辑 <code>_config.yml</code>（将<strong>xyz</strong>换成你自己的github用户名）：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: git</span><br><span class="line">  repository: https://github.com/xyz/xyz.github.io.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure>
<p>执行下列指令即可完成部署。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo generate</span><br><span class="line">hexo deploy</span><br></pre></td></tr></table></figure>
<p>中途会提示输入GitHub账号和密码，正常输入即可。</p>
<h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><ol>
<li>每次修改本地文件后，需要执行 <code>hexo generate</code> 才能生成新的博客文件。</li>
<li>所有hexo命令都要在 hexo 文件目录下执行。</li>
<li>发布后GitHub会有一定的延时</li>
</ol>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="/2016/03/05/shuffle-algorithm/" itemprop="url">
                  Shuffle Algorithm
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            Posted on
            <time itemprop="dateCreated" datetime="2016-03-05T21:22:50+08:00" content="2016-03-05">
              2016-03-05
            </time>
          </span>

          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <html>

<head>
  <meta charset="utf-8">
  <title>Shuffle Algorithm</title>
  <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
  </script>
  <script type="text/javascript" async src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML">
  </script>

  <style>
    /* remove class of theme */
    /*.one-column .main-inner {
      width: 960px; 
    }
    .main-inner {
      width: 960px; 
    }*/
    
    div.shuffle-algorithm {
      background: #fcfcfa;
      color: #333;
      font-family: "Microsoft YaHei", Helvetica, sans-serif;
      margin: 1em auto 4em auto;
      position: relative;
      width: 960px;
    }
    
    .shuffle-algorithm header,
    .shuffle-algorithm footer {
      font-size: small;
    }
    
    .shuffle-algorithm footer {
      margin-top: 8em;
    }
    
    .shuffle-algorithm p,
    .shuffle-algorithm pre {
      width: 720px;
    }
    
    .shuffle-algorithm aside {
      width: 200px;
      position: absolute;
      right: 0;
      font-size: small;
    }
    
    .shuffle-algorithm h1 {
      font-size: 48px;
      font-weight: 100;
      margin-bottom: 1em;
    }
    
    .shuffle-algorithm .lib-name {
      color: firebrick;
    }
    
    .shuffle-algorithm .chart {
      width: 960px;
      height: 80px;
    }
    
    .shuffle-algorithm .naive-shuffle {
      height: 160px;
    }
    
    .shuffle-algorithm .play path {
      stroke: #fff;
      stroke-width: 6px;
      fill: #fc0;
    }
    
    .shuffle-algorithm .play:hover path {
      fill: red;
    }
    
    .shuffle-algorithm .play rect {
      fill: none;
      pointer-events: all;
      cursor: pointer;
    }
  </style>
</head>

<body>
  <div class="shuffle-algorithm">
    <header>
      <p>Febrary 28, 2016 / <a class="author" href="" rel="author">Jason Wang</a></p>
      <h1>洗牌算法</h1>
    </header>
    <div>
      <p>为了保证打牌时的公平性，洗牌后的牌堆应当是完全随机的。</p>
      <p>从概率的角度来说，牌堆可以看成一个编号为 $ 1 $ 到 $ n $ 的数的序列，这个序列的排列组合数为 $ n! $。</p>

      <svg class="chart unshuffled"/>
      <aside>整齐的牌堆</aside>
      <p>完全随机也就是说每一种排列组合出现的概率相等，概率为 $ \frac{1}{n!} $</p>


      <h3>朴素洗牌算法</h3>
      <p>所谓朴素，就是说每次从未取出的数中随机取出一个数，排成序列。</p>

      <svg class="chart naive-shuffle"/>
      <aside>点击开始洗牌</aside>

      <p>JavaScript的代码如下：</p>
      <pre>
        <code class="javascript">
function naiveShuffle(array) {
  var shuffle = [];
  var n = array.length;
  var i;

  while (n) {
    // Pick a random element
    i = Math.floor(Math.random() * n--);

    // Add the element to new pack
    // Re-order the left elements
    shuffle.push(array.splice(i, 1));
  }

  return shuffle;
}
        </code>
      </pre>

      <p>取第一个数时，从 $ n $ 个数中随机取一个数（有 $ n $ 种可能）；取第二个数时，从剩下的 $ n - 1 $ 个数中随机取一个数（有 $n - 1$ 种可能）；如此重复 $n$ 次，则可得到一个序列。</p>
      <p>此序列的概率为 $ \frac{1}{n!} $ ， 与完全随机的概率一致。</p>
      <p>分析一下此算法的性能</p>
      <p>空间: $ O(n) $, 需要一个额外的大小为 $ n $ 的空间存储结果</p>
      <p>时间: $ O(n^{2}) $, while循环的复杂度为 $ O(n) $ , 循环内整理牌堆的复杂度也为 $ O(n) $。</p>


      <h3>Fisher-Yates算法</h3>
      <p>接下来介绍一种更为有效的算法。</p>
      <svg class="chart fisher-yates-shuffle"/>
      <pre>
        <code class="javascript">
function fisherYatesShuffle(array) {
  var n = array.length;
  var i;

  while (n) {
    // Pick a random element
    i = Math.floor(Math.random() * n--);

    // Swap the random element with element in position n.
    t = array[n];
    array[n] = array[i];
    array[i] = t;
  }

  return array;
}
        </code>
      </pre>
      <p>从第 $ 1 $ 到 $ n $ 个数中随机选取一个数，和第 $ n $ 个数交换，每次将 $ n $ 的值减 $ 1 $ ，如此重复 $ n $ 次，则可得到一个序列。</p>
      <p>此序列的概率同样为 $ \frac{1}{n!} $ 。</p>
      <p>同样分析一下此算法的性能</p>
      <p>空间: $ O(0) $, 因为将当前位置的数存放在与之交换的数的位置上，所以不需要额外的空间。</p>
      <p>时间: $ O(n) $, while循环的复杂度为 $ O(n) $ , 循环内操作的复杂度为 $ O(1) $。</p>
    </div>
    <footer>
      <p>本文主要参考了Mike Bostock的 <a href="https://bost.ocks.org/mike/shuffle/" target="_blank" rel="external">"Fisher–Yates Shuffle"</a></p>
      <p><span class="lib-name">可视化</span>使用了<a href="https://d3js.org/" target="_blank" rel="external">D3.js</a></p>
      <p><span class="lib-name">语法高亮</span>使用了<a href="https://www.highlightjs.org/" target="_blank" rel="external">highlightjs</a></p>
      <p><span class="lib-name">数学公式引擎</span>使用了<a href="https://www.mathjax.org/" target="_blank" rel="external">MathJax</a></p>
    </footer>
  </div>

  <script>
    var n = 200;

    var margin = {
      top: 10,
      right: 0,
      bottom: 10,
      left: 0
    };

    var width = 960;
    var height = 80;

    var areaWidth = width - margin.left - margin.right;
    var areaHeight = height - margin.top - margin.bottom;

    var barOffset = areaWidth / n;
    var barWidth = 2;
    var barHeight = areaHeight;
    var minBarHeight = 10;

    function x(d) {
      return d * barOffset;
    }

    /**
     * Create a chart of bars to demonstrate algorithm
     * @param options.update - callback of update d3 chart
     * @param options.y - Y offset of chart
     */
    function createChart(options) {

      var update = options.update;
      var y = options.y || 0;


      var chart = d3.select(options.chart)
        .append('g')
        .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');

      var bar = chart.selectAll('rect')
        .data(d3.range(n))
        .enter().append('rect')
        .attr('x', 0)
        .attr('y', function(d, i) {
          return (1 - i / n) * (barHeight - minBarHeight);
        })
        .attr('width', barWidth)
        .attr('height', function(d, i) {
          return minBarHeight + i / n * (barHeight - minBarHeight);
        })
        .style('fill', function(d, i) {
          var h = 420 - i / n * 60;
          h = h >= 360 ? h - 360 : h;
          return d3.hsl(h, 1, 0.5);
        })
        .style('stroke', '#000')
        .style('stroke-width', 0);

      reset(chart);

      if (options.play) {
        var play = chart.append('g')
          .attr("class", "play")
          .on("click", start);

        play.append("path")
          .attr("d", "M-30,-30L30,0L-30,30Z")
          .attr("transform", "translate(" + areaWidth / 2 + "," + (y + areaHeight / 2) + ")scale(.4)");

        play.append("rect")
          .attr("width", areaWidth)
          .attr("height", areaHeight);
      }
      
      return chart;

      function start() {
        play.style("display", "none");
        var m = n;
        if (bar.shuffled) {
          reset(chart);
          bar.shuffled = false;
        }
        bar = chart.selectAll('rect');
        var interval = setInterval(function() {
          m = update(bar, m, y);
          if (m == 0) {
            setTimeout(function() {
              play.style("display", null);
            }, 1000);
            bar.shuffled = true;
            clearInterval(interval);
          }
        }, 100);
      }

      function reset(chart) {
        chart.selectAll("rect")
          .attr("transform", function(d, i) {
            return "translate(" + x(i) + "," + y + ")";
          });
      }
    }

    // unshuffled
    createChart({
      chart: '.unshuffled'
    });

    // naive-shuffle
    createChart({
      y: height,
      chart: '.naive-shuffle',
      play: true,
      update: function(bar, m, y) {
        var i = Math.floor(Math.random() * m);
        var a = bar[0].splice(i, 1)[0];

        d3.select(a)
          .style('stroke-width', '2px')
          .transition()
          .duration(1000)
          .style('stroke-width', '0')
          .attr("transform", "translate(" + x(n - m) + "," + 0 + ")");

        bar.attr("transform", function(d, i) {
          return "translate(" + x(i) + "," + y + ")";
        });
        return --m;
      }
    });

    // Fisher–Yates Shuffle
    createChart({
      chart: '.fisher-yates-shuffle',
      play: true,

      update: function(bar, m) {
        var i = Math.floor(Math.random() * m);
        m--;
        var a = bar[0][i];
        var b = bar[0][m];

        //        console.log('i: ' + i + ', m: ' + m);

        bar[0][i] = b;
        bar[0][m] = a;

        d3.select(b)
          .transition()
          .duration(1000)
          .style('stroke-width', '0')
          .attr("transform", "translate(" + x(i) + "," + 0 + ")");

        d3.select(a) // in position m
          .style('stroke-width', '2px')
          .transition()
          .duration(1000)
          .style('stroke-width', '0')
          .attr("transform", "translate(" + x(m) + "," + 0 + ")")

        return m;
      }
    });
  </script>
</body>

<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.2.0/styles/default.min.css">
<script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.2.0/highlight.min.js"></script>
<script>
  hljs.initHighlightingOnLoad();
</script>

</html>
            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="/2016/03/05/hello-world/" itemprop="url">
                  Hello Hexo
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            Posted on
            <time itemprop="dateCreated" datetime="2016-03-05T20:39:30+08:00" content="2016-03-05">
              2016-03-05
            </time>
          </span>

          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  

 </div>

        

        
      </div>

      
        
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" src="/images/default_avatar.jpg" alt="Jason Wang" itemprop="image"/>
          <p class="site-author-name" itemprop="name">Jason Wang</p>
        </div>
        <p class="site-description motion-element" itemprop="description"></p>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">9</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            
              <span class="site-state-item-count">0</span>
              <span class="site-state-item-name">categories</span>
              
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">12</span>
              <span class="site-state-item-name">tags</span>
              </a>
          </div>

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
        </div>

      </section>

      

    </div>
  </aside>


      
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner"> <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="icon-next-heart fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jason Wang</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="http://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT
  </a>
</div>


 </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  
  
    
    

  


  
  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.5.2"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.5.2"></script>
  

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/js/motion_global.js?v=0.4.5.2" id="motion.global"></script>




  <script type="text/javascript" src="/js/nav-toggle.js?v=0.4.5.2"></script>
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  

  <script type="text/javascript">
    $(document).ready(function () {
      if (CONFIG.sidebar === 'always') {
        displaySidebar();
      }
      if (isMobile()) {
        FastClick.attach(document.body);
      }

      motionIntegrator.bootstrap();
    });
  </script>

  
  

  
  

  
  <script type="text/javascript" src="/js/lazyload.js"></script>
  <script type="text/javascript">
    $(function () {
      $("#posts").find('img').lazyload({
        placeholder: "/images/loading.gif",
        effect: "fadeIn"
      });
    });
  </script>
</body>
</html>
