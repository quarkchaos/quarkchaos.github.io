<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="Play Fun">
<meta property="og:type" content="website">
<meta property="og:title" content="Jason Wang's Playground">
<meta property="og:url" content="https://quarkchaos.github.com/page/2/index.html">
<meta property="og:site_name" content="Jason Wang's Playground">
<meta property="og:description" content="Play Fun">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Jason Wang's Playground">
<meta name="twitter:description" content="Play Fun">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: 'Author'
    }
  };
</script>

  <title> Jason Wang's Playground </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  



  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?ea2c42d3a5f14cd212a7a74fe032f86d";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>








  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Jason Wang's Playground</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            公益404
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/03/24/introduction-of-json/" itemprop="url">
                  Introduction of JSON
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-03-24T20:32:32+08:00" content="2016-03-24">
              2016-03-24
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1-JSON-&#x7B80;&#x4ECB;"><a href="#1-JSON-&#x7B80;&#x4ECB;" class="headerlink" title="1 JSON &#x7B80;&#x4ECB;"></a>1 JSON &#x7B80;&#x4ECB;</h1><p>JSON&#xFF1A;JavaScript &#x5BF9;&#x8C61;&#x8868;&#x793A;&#x6CD5;&#xFF08;JavaScript Object Notation&#xFF09;&#x3002;</p>
<p>&#x5B83;&#x57FA;&#x4E8E;ECMAScript&#x7684;&#x4E00;&#x4E2A;&#x5B50;&#x96C6;&#xFF0C;&#x91C7;&#x7528;&#x5B8C;&#x5168;&#x72EC;&#x7ACB;&#x4E8E;&#x8BED;&#x8A00;&#x7684;&#x6587;&#x672C;&#x683C;&#x5F0F;&#x3002;&#x6613;&#x4E8E;&#x4EBA;&#x9605;&#x8BFB;&#x548C;&#x7F16;&#x5199;&#xFF0C;&#x540C;&#x65F6;&#x4E5F;&#x6613;&#x4E8E;&#x673A;&#x5668;&#x89E3;&#x6790;&#x548C;&#x751F;&#x6210;(&#x4E00;&#x822C;&#x7528;&#x4E8E;&#x63D0;&#x5347;&#x7F51;&#x7EDC;&#x4F20;&#x8F93;&#x901F;&#x7387;)&#x3002;
&#x7C7B;&#x4F3C;&#x4E8E; XML&#xFF0C;&#x4F46;&#x6BD4; XML &#x66F4;&#x5C0F;&#x3001;&#x66F4;&#x5FEB;&#xFF0C;&#x66F4;&#x6613;&#x89E3;&#x6790;&#x3002;&#x662F;&#x4E00;&#x79CD;&#x7406;&#x60F3;&#x7684;&#x6570;&#x636E;&#x4EA4;&#x6362;&#x8BED;&#x8A00;&#x3002;</p>
<h2 id="&#x7279;&#x70B9;&#xFF1A;"><a href="#&#x7279;&#x70B9;&#xFF1A;" class="headerlink" title="&#x7279;&#x70B9;&#xFF1A;"></a>&#x7279;&#x70B9;&#xFF1A;</h2><ul>
<li>JSON &#x6307;&#x7684;&#x662F; JavaScript &#x5BF9;&#x8C61;&#x8868;&#x793A;&#x6CD5;&#xFF08;JavaScript Object Notation&#xFF09;</li>
<li>JSON &#x662F;&#x8F7B;&#x91CF;&#x7EA7;&#x7684;&#x6587;&#x672C;&#x6570;&#x636E;&#x4EA4;&#x6362;&#x683C;&#x5F0F;</li>
<li>JSON &#x72EC;&#x7ACB;&#x4E8E;&#x8BED;&#x8A00;</li>
<li>JSON &#x5177;&#x6709;&#x81EA;&#x6211;&#x63CF;&#x8FF0;&#x6027;&#xFF0C;&#x6613;&#x7406;&#x89E3;</li>
</ul>
<h2 id="Example"><a href="#Example" class="headerlink" title="Example:"></a>Example:</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">  name: <span class="string">&quot;World&quot;</span></span><br><span class="line">  countries: [</span><br><span class="line">    {</span><br><span class="line">      name: <span class="string">&quot;United States&quot;</span>,</span><br><span class="line">      capital: <span class="string">&quot;Washington, D.C.&quot;</span></span><br><span class="line">    }, {</span><br><span class="line">      name: <span class="string">&quot;United Kingdom&quot;</span>,</span><br><span class="line">      capital: <span class="string">&quot;London&quot;</span></span><br><span class="line">    }</span><br><span class="line">  ]</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h1 id="2-JSON-&#x8BED;&#x6CD5;"><a href="#2-JSON-&#x8BED;&#x6CD5;" class="headerlink" title="2 JSON &#x8BED;&#x6CD5;"></a>2 JSON &#x8BED;&#x6CD5;</h1><h2 id="JSON-&#x8BED;&#x6CD5;&#x89C4;&#x5219;"><a href="#JSON-&#x8BED;&#x6CD5;&#x89C4;&#x5219;" class="headerlink" title="JSON &#x8BED;&#x6CD5;&#x89C4;&#x5219;"></a>JSON &#x8BED;&#x6CD5;&#x89C4;&#x5219;</h2><p>JSON &#x8BED;&#x6CD5;&#x662F; JavaScript &#x5BF9;&#x8C61;&#x8868;&#x793A;&#x8BED;&#x6CD5;&#x7684;&#x5B50;&#x96C6;&#x3002;</p>
<ul>
<li><p>&#x6570;&#x636E;&#x5728;&#x952E;&#x503C;&#x5BF9;&#x4E2D;</p>
<blockquote>
<p>&#x201C;firstName&#x201D;:&#x201D;John&#x201D;</p>
</blockquote>
</li>
<li><p>&#x6570;&#x636E;&#x7531;&#x9017;&#x53F7;&#x5206;&#x9694;</p>
<blockquote>
<p>&#x201C;firstName&#x201D;:&#x201D;John&#x201D;, &#x201C;lastName&#x201D;:&#x201D;Lock&#x201D;</p>
</blockquote>
</li>
<li><p>&#x82B1;&#x62EC;&#x53F7;&#x4FDD;&#x5B58;&#x5BF9;&#x8C61;</p>
<blockquote>
<p>{&#x201C;firstName&#x201D;:&#x201D;John&#x201D;}</p>
</blockquote>
</li>
<li><p>&#x65B9;&#x62EC;&#x53F7;&#x4FDD;&#x5B58;&#x6570;&#x7EC4;</p>
<blockquote>
<p>[&#x201C;id&#x201D;:1}, {&#x201C;id&#x201D;:2}]</p>
</blockquote>
</li>
</ul>
<h2 id="JSON-&#x540D;&#x79F0;-&#x503C;&#x5BF9;"><a href="#JSON-&#x540D;&#x79F0;-&#x503C;&#x5BF9;" class="headerlink" title="JSON &#x540D;&#x79F0;/&#x503C;&#x5BF9;"></a>JSON &#x540D;&#x79F0;/&#x503C;&#x5BF9;</h2><p>JSON &#x6570;&#x636E;&#x7684;&#x4E66;&#x5199;&#x683C;&#x5F0F;&#x662F;&#xFF1A;&#x540D;&#x79F0;/&#x503C;&#x5BF9;&#x3002;
&#x540D;&#x79F0;/&#x503C;&#x5BF9;&#x7EC4;&#x5408;&#x4E2D;&#x7684;&#x540D;&#x79F0;&#x5199;&#x5728;&#x524D;&#x9762;&#xFF08;&#x5728;&#x53CC;&#x5F15;&#x53F7;&#x4E2D;&#xFF09;&#xFF0C;&#x503C;&#x5BF9;&#x5199;&#x5728;&#x540E;&#x9762;(&#x540C;&#x6837;&#x5728;&#x53CC;&#x5F15;&#x53F7;&#x4E2D;)&#xFF0C;&#x4E2D;&#x95F4;&#x7528;&#x5192;&#x53F7;&#x9694;&#x5F00;&#xFF1A;</p>
<pre><code>&quot;firstName&quot;:&quot;John&quot;
</code></pre><p>&#x7B49;&#x4EF7;&#x4E8E;&#x8FD9;&#x6761; JavaScript &#x8BED;&#x53E5;&#xFF1A;</p>
<pre><code>firstName = &quot;John&quot;;
</code></pre><p><strong>JSON &#x503C;</strong></p>
<p>JSON &#x503C;&#x53EF;&#x4EE5;&#x662F;&#xFF1A;</p>
<ul>
<li><p>&#x6570;&#x5B57;&#xFF08;&#x6574;&#x6570;&#x6216;&#x6D6E;&#x70B9;&#x6570;&#xFF09;</p>
<blockquote>
<p>height: 8848</p>
</blockquote>
</li>
<li><p>&#x5B57;&#x7B26;&#x4E32;&#xFF08;&#x5728;&#x53CC;&#x5F15;&#x53F7;&#x4E2D;&#xFF09;</p>
<blockquote>
<p>firstName: &#x201C;John&#x201D;</p>
</blockquote>
</li>
<li><p>&#x903B;&#x8F91;&#x503C;&#xFF08;true &#x6216; false&#xFF09;</p>
<blockquote>
<p>is_installed: false</p>
</blockquote>
</li>
<li><p>&#x6570;&#x7EC4;&#xFF08;&#x5728;&#x65B9;&#x62EC;&#x53F7;&#x4E2D;&#xFF09;</p>
</li>
<li>&#x5BF9;&#x8C61;&#xFF08;&#x5728;&#x82B1;&#x62EC;&#x53F7;&#x4E2D;&#xFF09;</li>
<li>null<blockquote>
<p>name: null</p>
</blockquote>
</li>
</ul>
<blockquote>
<p>&#x5373;&#x9664;&#x4E86;&#x4EE5;&#x4E0A;&#x51E0;&#x79CD;&#x5F62;&#x5F0F;&#x7684;JS&#x5BF9;&#x8C61;&#x4E0D;&#x662F;&#x5408;&#x6CD5;&#x7684;JSON&#x503C;&#xFF0C;&#x5982;<em>function</em>&#x5C31;&#x4E0D;&#x662F;&#x5408;&#x6CD5;&#x7684;JSON&#x503C;</p>
</blockquote>
<h2 id="&#x57FA;&#x7840;&#x7ED3;&#x6784;"><a href="#&#x57FA;&#x7840;&#x7ED3;&#x6784;" class="headerlink" title="&#x57FA;&#x7840;&#x7ED3;&#x6784;"></a>&#x57FA;&#x7840;&#x7ED3;&#x6784;</h2><p>JSON&#x7ED3;&#x6784;&#x6709;&#x4E24;&#x79CD;&#x7ED3;&#x6784;&#xFF0C;&#x7B80;&#x5355;&#x8BF4;&#x5C31;&#x662F;javascript&#x4E2D;&#x7684;&#x5BF9;&#x8C61;&#x548C;&#x6570;&#x7EC4;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x4E24;&#x79CD;&#x7ED3;&#x6784;&#x5C31;&#x662F;&#x5BF9;&#x8C61;&#x548C;&#x6570;&#x7EC4;&#x4E24;&#x79CD;&#x7ED3;&#x6784;&#xFF0C;&#x901A;&#x8FC7;&#x8FD9;&#x4E24;&#x79CD;&#x7ED3;&#x6784;&#x53EF;&#x4EE5;&#x8868;&#x793A;&#x5404;&#x79CD;&#x590D;&#x6742;&#x7684;&#x7ED3;&#x6784;&#x3002;</p>
<p>1&#x3001;&#x5BF9;&#x8C61;</p>
<p>&#x5BF9;&#x8C61;&#x5728;js&#x4E2D;&#x8868;&#x793A;&#x4E3A;&#x201C;{}&#x201D;&#x62EC;&#x8D77;&#x6765;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4E3A; {key&#xFF1A;value,key&#xFF1A;value,&#x2026;}&#x7684;&#x952E;&#x503C;&#x5BF9;&#x7684;&#x7ED3;&#x6784;&#x3002;</p>
<p>&#x5728;&#x9762;&#x5411;&#x5BF9;&#x8C61;&#x7684;&#x8BED;&#x8A00;&#x4E2D;&#xFF0C;key&#x4E3A;&#x5BF9;&#x8C61;&#x7684;&#x5C5E;&#x6027;&#xFF0C;value&#x4E3A;&#x5BF9;&#x5E94;&#x7684;&#x5C5E;&#x6027;&#x503C;&#xFF0C;&#x6240;&#x4EE5;&#x5F88;&#x5BB9;&#x6613;&#x7406;&#x89E3;&#xFF0C;&#x53D6;&#x503C;&#x65B9;&#x6CD5;&#x4E3A; &#x5BF9;&#x8C61; .key &#x83B7;&#x53D6;&#x5C5E;&#x6027;&#x503C;&#xFF0C;&#x8FD9;&#x4E2A;&#x5C5E;&#x6027;&#x503C;&#x7684;&#x7C7B;&#x578B;&#x53EF;&#x4EE5;&#x662F; &#x6570;&#x5B57;&#x3001;&#x5B57;&#x7B26;&#x4E32;&#x3001;&#x6570;&#x7EC4;&#x3001;&#x5BF9;&#x8C61;&#x51E0;&#x79CD;&#x3002;</p>
<p>2&#x3001;&#x6570;&#x7EC4;</p>
<p>&#x6570;&#x7EC4;&#x5728;js&#x4E2D;&#x662F;&#x4E2D;&#x62EC;&#x53F7;&#x201C;[]&#x201D;&#x62EC;&#x8D77;&#x6765;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4E3A; [&#x201C;java&#x201D;,&#x201D;javascript&#x201D;,&#x201D;vb&#x201D;,&#x2026;]&#xFF0C;&#x53D6;&#x503C;&#x65B9;&#x5F0F;&#x548C;&#x6240;&#x6709;&#x8BED;&#x8A00;&#x4E2D;&#x4E00;&#x6837;&#xFF0C;&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#x83B7;&#x53D6;&#xFF0C;&#x5B57;&#x6BB5;&#x503C;&#x7684;&#x7C7B;&#x578B;&#x53EF;&#x4EE5;&#x662F; &#x6570;&#x5B57;&#x3001;&#x5B57;&#x7B26;&#x4E32;&#x3001;&#x6570;&#x7EC4;&#x3001;&#x5BF9;&#x8C61;&#x51E0;&#x79CD;&#x3002;</p>
<p>&#x7ECF;&#x8FC7;&#x5BF9;&#x8C61;&#x3001;&#x6570;&#x7EC4;2&#x79CD;&#x7ED3;&#x6784;&#x5C31;&#x53EF;&#x4EE5;&#x7EC4;&#x5408;&#x6210;&#x590D;&#x6742;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4E86;&#x3002;</p>
<h1 id="3-JSON-&#x4F7F;&#x7528;"><a href="#3-JSON-&#x4F7F;&#x7528;" class="headerlink" title="3 JSON &#x4F7F;&#x7528;"></a>3 JSON &#x4F7F;&#x7528;</h1><h2 id="3-1-&#x5728;JavaScript&#x4E2D;&#x4F7F;&#x7528;JSON"><a href="#3-1-&#x5728;JavaScript&#x4E2D;&#x4F7F;&#x7528;JSON" class="headerlink" title="3.1 &#x5728;JavaScript&#x4E2D;&#x4F7F;&#x7528;JSON"></a>3.1 &#x5728;JavaScript&#x4E2D;&#x4F7F;&#x7528;JSON</h2><p>&#x5728;JavaScript&#x4E2D;&#xFF0C;&#x5904;&#x7406;JSON&#x4E0D;&#x9700;&#x8981;&#x4EFB;&#x4F55;&#x7279;&#x6B8A;&#x7684;API&#x6216;&#x5DE5;&#x5177;&#x5305;&#x3002;</p>
<h3 id="&#x5E8F;&#x5217;&#x5316;&#x4E0E;&#x53CD;&#x5E8F;&#x5217;&#x5316;"><a href="#&#x5E8F;&#x5217;&#x5316;&#x4E0E;&#x53CD;&#x5E8F;&#x5217;&#x5316;" class="headerlink" title="&#x5E8F;&#x5217;&#x5316;&#x4E0E;&#x53CD;&#x5E8F;&#x5217;&#x5316;"></a>&#x5E8F;&#x5217;&#x5316;&#x4E0E;&#x53CD;&#x5E8F;&#x5217;&#x5316;</h3><p>&#x8F83;&#x65B0;&#x7684;&#x6D4F;&#x89C8;&#x5668;&#x4E2D;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; <em>JSON.stringify</em> &#x548C; <em>JSON.parse</em> &#x6765;&#x5B9E;&#x73B0;&#x5E8F;&#x5217;&#x5316;&#x548C;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x3002;
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> world = {</span><br><span class="line">  name: <span class="string">&quot;World&quot;</span>,</span><br><span class="line">  countries: [</span><br><span class="line">    {</span><br><span class="line">      name: <span class="string">&quot;United States&quot;</span>,</span><br><span class="line">      capital: <span class="string">&quot;Washington, D.C.&quot;</span></span><br><span class="line">    }, {</span><br><span class="line">      name: <span class="string">&quot;United Kingdom&quot;</span>,</span><br><span class="line">      capital: <span class="string">&quot;London&quot;</span></span><br><span class="line">    }</span><br><span class="line">  ]</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="comment">// Serialization</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="built_in">JSON</span>.stringify(world);</span><br><span class="line"><span class="built_in">console</span>.log(str);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Deserialization</span></span><br><span class="line"><span class="keyword">var</span> parsedWorld = <span class="built_in">JSON</span>.parse(str);</span><br></pre></td></tr></table></figure></p>
<h3 id="&#x8BBF;&#x95EE;JSON&#x5143;&#x7D20;"><a href="#&#x8BBF;&#x95EE;JSON&#x5143;&#x7D20;" class="headerlink" title="&#x8BBF;&#x95EE;JSON&#x5143;&#x7D20;"></a>&#x8BBF;&#x95EE;JSON&#x5143;&#x7D20;</h3><p><strong>&#x8BBF;&#x95EE;&#x5143;&#x7D20;</strong></p>
<p>&#x901A;&#x8FC7; <em>.key</em> &#x8BBF;&#x95EE;&#x5BF9;&#x8C61;&#x5C5E;&#x6027;
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(world.name);</span><br></pre></td></tr></table></figure></p>
<p>&#x901A;&#x8FC7; [index] &#x8BBF;&#x95EE;&#x6570;&#x7EC4;&#x5143;&#x7D20;
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(world.countries[<span class="number">0</span>]);</span><br></pre></td></tr></table></figure></p>
<p><strong>&#x904D;&#x5386;&#x5143;&#x7D20;</strong></p>
<p>&#x901A;&#x8FC7; <em>for-in</em> &#x6765;&#x904D;&#x5386; JSON &#x6570;&#x636E;
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> world) {</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&apos;key: &apos;</span> + <span class="built_in">JSON</span>.stringify(world[key]));</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<h3 id="&#x4FEE;&#x6539;JSON&#x5143;&#x7D20;"><a href="#&#x4FEE;&#x6539;JSON&#x5143;&#x7D20;" class="headerlink" title="&#x4FEE;&#x6539;JSON&#x5143;&#x7D20;"></a>&#x4FEE;&#x6539;JSON&#x5143;&#x7D20;</h3><p><strong>&#x589E;&#x52A0;&#x5143;&#x7D20;</strong></p>
<p>&#x901A;&#x8FC7; <em>obj.key</em> &#x7684;&#x65B9;&#x6CD5;&#x589E;&#x52A0;&#x5C5E;&#x6027;
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">world.planet = <span class="string">&quot;Earth&quot;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(world));</span><br></pre></td></tr></table></figure></p>
<p>&#x901A;&#x8FC7; <em>obj[index]</em> &#x7684;&#x65B9;&#x6CD5;&#x589E;&#x52A0;&#x6570;&#x7EC4;&#x5143;&#x7D20;&#xFF0C;&#xFF08;index&#x4E0D;&#x5728;&#x5DF2;&#x6709;&#x6570;&#x7EC4;&#x7D22;&#x5F15;&#x8303;&#x56F4;&#x5185;&#xFF09;
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">world.countries[<span class="number">2</span>] = {</span><br><span class="line">  name: <span class="string">&quot;Japan&quot;</span>,</span><br><span class="line">  capital: <span class="string">&quot;Tokyo&quot;</span></span><br><span class="line">};</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(world));</span><br></pre></td></tr></table></figure></p>
<p><strong>&#x5220;&#x9664;&#x5143;&#x7D20;</strong></p>
<p>&#x901A;&#x8FC7; <em>delete obj.key</em> &#x7684;&#x65B9;&#x5F0F;&#x6765;&#x5220;&#x9664;&#x5C5E;&#x6027;:
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> world.planet;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(world));</span><br></pre></td></tr></table></figure></p>
<p>&#x901A;&#x8FC7; <em>array.splice</em> &#x5220;&#x9664;&#x6570;&#x7EC4;&#x5143;&#x7D20;
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">world.countries.splice(<span class="number">2</span>, <span class="number">1</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(world));</span><br></pre></td></tr></table></figure></p>
<p><strong>&#x4FEE;&#x6539;&#x5143;&#x7D20;</strong></p>
<p>&#x5728;&#x8BBF;&#x95EE;&#x65F6;&#x76F4;&#x63A5;&#x8D4B;&#x65B0;&#x503C;&#x5373;&#x53EF;&#x5B8C;&#x6210;&#x4FEE;&#x6539;</p>
<h2 id="3-2-&#x5728;-NET&#x4E2D;&#x4F7F;&#x7528;JSON"><a href="#3-2-&#x5728;-NET&#x4E2D;&#x4F7F;&#x7528;JSON" class="headerlink" title="3.2 &#x5728;.NET&#x4E2D;&#x4F7F;&#x7528;JSON"></a>3.2 &#x5728;.NET&#x4E2D;&#x4F7F;&#x7528;JSON</h2><p>&#x5728;.NET&#x4E2D;&#x6709;&#x4E09;&#x79CD;&#x5E38;&#x7528;&#x7684;JSON&#x5E8F;&#x5217;&#x5316;&#x7684;&#x7C7B;&#xFF0C;&#x5206;&#x522B;&#x662F;</p>
<ul>
<li>System.Web.Script.Serialization.JavaScriptSerializer&#x7C7B;</li>
<li>System.Runtime.Serialization.Json.DataContractJsonSerializer&#x7C7B;</li>
<li>Newtonsoft.Json.JsonConvert&#x7C7B;</li>
</ul>
<h3 id="&#x5B9A;&#x4E49;JSON&#x6570;&#x636E;&#x683C;&#x5F0F;&#x7C7B;"><a href="#&#x5B9A;&#x4E49;JSON&#x6570;&#x636E;&#x683C;&#x5F0F;&#x7C7B;" class="headerlink" title="&#x5B9A;&#x4E49;JSON&#x6570;&#x636E;&#x683C;&#x5F0F;&#x7C7B;"></a>&#x5B9A;&#x4E49;JSON&#x6570;&#x636E;&#x683C;&#x5F0F;&#x7C7B;</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">[DataContract]</span><br><span class="line"><span class="keyword">class</span> <span class="title">Country</span></span><br><span class="line">{</span><br><span class="line">    [DataMember] </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">string</span> Name { <span class="keyword">get</span>; <span class="keyword">set</span>; }</span><br><span class="line">    [DataMember]</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">string</span> Captital { <span class="keyword">get</span>; <span class="keyword">set</span>; }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Country</span>(<span class="params"></span>)</span><br><span class="line">    </span>{</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Country</span> (<span class="params"><span class="keyword">string</span> name, <span class="keyword">string</span> capital</span>)</span><br><span class="line">    </span>{</span><br><span class="line">        Name = name;</span><br><span class="line">        Captital = capital;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">[DataContract]</span><br><span class="line"><span class="keyword">class</span> <span class="title">World</span></span><br><span class="line">{</span><br><span class="line">    [DataMember]</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">string</span> Name { <span class="keyword">get</span>; <span class="keyword">set</span>; }</span><br><span class="line">    [DataMember]</span><br><span class="line">    <span class="keyword">public</span> List&lt;Country&gt; Countries {<span class="keyword">get</span>; <span class="keyword">set</span>; }</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">World</span>(<span class="params"></span>)</span><br><span class="line">    </span>{</span><br><span class="line">        Name = <span class="string">&quot;World&quot;</span>;</span><br><span class="line">        Countries = <span class="keyword">new</span> List&lt;Country&gt;();</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="keyword">string</span>[] args</span>)</span><br><span class="line"></span>{</span><br><span class="line">    World world = <span class="keyword">new</span> World();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Add elements</span></span><br><span class="line">    world.Countries.Add(<span class="keyword">new</span> Country(<span class="string">&quot;United States&quot;</span>, <span class="string">&quot;Washington, D.C.&quot;</span>));</span><br><span class="line">    world.Countries.Add(<span class="keyword">new</span> Country(<span class="string">&quot;United Kingdom&quot;</span>, <span class="string">&quot;London&quot;</span>));</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h3 id="&#x4F7F;&#x7528;System-Web-Script-Serialization-JavaScriptSerializer"><a href="#&#x4F7F;&#x7528;System-Web-Script-Serialization-JavaScriptSerializer" class="headerlink" title="&#x4F7F;&#x7528;System.Web.Script.Serialization.JavaScriptSerializer"></a>&#x4F7F;&#x7528;System.Web.Script.Serialization.JavaScriptSerializer</h3><blockquote>
<p>JavaScriptSerializer&#x662F;.NET&#x81EA;&#x5E26;&#x7684;&#x5904;&#x7406;JSON&#x7684;&#x7C7B;&#xFF0C;JavaScriptSerializer&#x7C7B;&#x5728;System.Web.Extensions.dll&#x4E2D;&#xFF0C;&#x9700;&#x8981;&#x6DFB;&#x52A0;&#x5F15;&#x7528;System.Web.Extensions.dll</p>
</blockquote>
<p>&#x793A;&#x4F8B;&#x5982;&#x4E0B;&#xFF1A;
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Web.Script.Serialization;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">json</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    {</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">UseJavaScriptSerializer</span>(<span class="params">World world</span>)</span><br><span class="line">        </span>{</span><br><span class="line">            <span class="comment">// JavaScriptSerializer&#x7C7B;&#x5728;System.Web.Extensions.dll&#x4E2D;&#xFF0C;&#x9700;&#x8981;&#x6DFB;&#x52A0;&#x5F15;&#x7528;System.Web.Extensions.dll</span></span><br><span class="line">            JavaScriptSerializer serializer = <span class="keyword">new</span> JavaScriptSerializer();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//JSON &#x5E8F;&#x5217;&#x5316;  </span></span><br><span class="line">            <span class="keyword">string</span> str = serializer.Serialize(world);</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;JavaScriptSerializer: after Serialization: {0}, length: {1}&quot;</span>, str, str.Length);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//JSON &#x53CD;&#x5E8F;&#x5217;&#x5316;  </span></span><br><span class="line">            World _world = serializer.Deserialize&lt;World&gt;(str);</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;JavaScriptSerializer: after Deserialization: Name: {0}, Countries Count: {1}&quot;</span>, _world.Name, _world.Countries.Count);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>&#x6267;&#x884C;&#x540E;&#x8F93;&#x51FA;&#xFF1A;
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">JavaScriptSerializer: after Serialization: {<span class="string">&quot;Name&quot;</span>:<span class="string">&quot;World&quot;</span>,<span class="string">&quot;Countries&quot;</span>:[{<span class="string">&quot;Name&quot;</span>:<span class="string">&quot;United States&quot;</span>,<span class="string">&quot;Captital&quot;</span>:<span class="string">&quot;Washington, D.C.&quot;</span>},{<span class="string">&quot;Name&quot;</span>:<span class="string">&quot;United Kingdom&quot;</span>,<span class="string">&quot;Captita</span><br><span class="line">l&quot;</span>:<span class="string">&quot;London&quot;</span>}]}, length: 131</span><br><span class="line">JavaScriptSerializer: after Deserialization: Name: World, Countries Count: 2</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>&#x6CE8;&#x610F;&#xFF1A;</p>
<p>&#x5982;&#x679C;&#x4E0D;&#x60F3;&#x5E8F;&#x5217;&#x5316;&#x67D0;&#x4E2A;&#x5B57;&#x6BB5;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;&#x5B57;&#x6BB5;&#x524D;&#x9762;&#x52A0;[JsonIgnore]&#x6807;&#x8BB0;&#x3002;</p>
</blockquote>
<h3 id="&#x4F7F;&#x7528;Newtonsoft-Json-JsonConvert"><a href="#&#x4F7F;&#x7528;Newtonsoft-Json-JsonConvert" class="headerlink" title="&#x4F7F;&#x7528;Newtonsoft.Json.JsonConvert"></a>&#x4F7F;&#x7528;Newtonsoft.Json.JsonConvert</h3><p>Newtonsoft.Json.JsonConvert&#x7C7B;&#x662F;&#x975E;&#x5FAE;&#x8F6F;&#x63D0;&#x4F9B;&#x7684;&#x4E00;&#x4E2A;JSON&#x5E8F;&#x5217;&#x5316;&#x548C;&#x53CD;&#x5E8F;&#x5217;&#x7684;&#x5F00;&#x6E90;&#x514D;&#x8D39;&#x7684;&#x7C7B;&#x5E93;&#xFF08;&#x4E0B;&#x8F7D;&#x7F51;&#x5740;&#x662F;&#xFF1A;<a href="https://github.com/JamesNK/Newtonsoft.Json/releases" target="_blank" rel="external">https://github.com/JamesNK/Newtonsoft.Json/releases</a>&#xFF09;&#xFF0C;&#x5B83;&#x63D0;&#x4F9B;&#x4E86;&#x66F4;&#x7075;&#x6D3B;&#x7684;&#x5E8F;&#x5217;&#x5316;&#x548C;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x63A7;&#x5236;&#x3002;&#x5E76;&#x4E14;&#x5982;&#x679C;&#x4F60;&#x7684;&#x5F00;&#x53D1;&#x73AF;&#x5883;&#x4F7F;&#x7528;&#x7684;&#x662F;.NET Framework3.5&#x53CA;&#x4EE5;&#x540E;&#x7248;&#x672C;&#x7684;&#x8BDD;&#xFF0C;&#x4F60;&#x5C31;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;Linq to JSON&#xFF0C;&#x53EA;&#x89E3;&#x6790;&#x51FA;&#x5173;&#x5FC3;&#x7684;&#x90A3;&#x90E8;&#x5206;&#x5373;&#x53EF;&#xFF0C;&#x975E;&#x5E38;&#x65B9;&#x4FBF;&#x3002; </p>
<blockquote>
<p>&#x9700;&#x8981;&#x4E0B;&#x8F7D;&#x5E76;&#x6DFB;&#x52A0;&#x5F15;&#x7528;Newtonsoft.Json.dll&#xFF1B; </p>
</blockquote>
<p>&#x793A;&#x4F8B;&#x5982;&#x4E0B;&#xFF1A;
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//JSON &#x5E8F;&#x5217;&#x5316;  </span></span><br><span class="line"><span class="keyword">string</span> str = JsonConvert.SerializeObject(world);</span><br><span class="line">Console.WriteLine(<span class="string">&quot;SerializeObject: after Serialization: {0}, length: {1}&quot;</span>, str, str.Length);</span><br><span class="line"></span><br><span class="line"><span class="comment">//JSON &#x53CD;&#x5E8F;&#x5217;&#x5316;  </span></span><br><span class="line">World _world = JsonConvert.DeserializeObject&lt;World&gt;(str);</span><br><span class="line">Console.WriteLine(<span class="string">&quot;JavaScriptSerializer: after Deserialization: Name: {0}, Countries Count: {1}&quot;</span>, _world.Name, _world.Countries.Count);</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>&#x6CE8;&#x610F;:</p>
<p>&#x5982;&#x679C;&#x9700;&#x8981;&#x5E8F;&#x5217;&#x5316;&#x5B9E;&#x4F53;</p>
<p>1&#x3001;&#x7C7B;&#x540D;&#x5FC5;&#x987B;&#x6DFB;&#x52A0;[DataContract]&#x6807;&#x8BB0;&#xFF1B;</p>
<p>2&#x3001;&#x7C7B;&#x5C5E;&#x6027;&#x6DFB;&#x52A0;[DataMember]&#x6807;&#x8BB0;&#xFF1B;</p>
<p>&#x5982;&#x679C;&#x6709;&#x4E0D;&#x9700;&#x8981;&#x5E8F;&#x5217;&#x5316;&#x7684;&#x5B57;&#x6BB5;&#xFF0C;&#x53EF;&#x4EE5;&#x7ED9;&#x8BE5;&#x5B57;&#x6BB5;&#x6DFB;&#x52A0;[JsonIgnore]&#x6807;&#x8BB0; </p>
</blockquote>
<h3 id="&#x6027;&#x80FD;&#x5BF9;&#x6BD4;"><a href="#&#x6027;&#x80FD;&#x5BF9;&#x6BD4;" class="headerlink" title="&#x6027;&#x80FD;&#x5BF9;&#x6BD4;"></a>&#x6027;&#x80FD;&#x5BF9;&#x6BD4;</h3><p><img src="http://download.codeplex.com/Download?ProjectName=json&amp;DownloadId=669163" alt="image"></p>
<h3 id="&#x5176;&#x4ED6;"><a href="#&#x5176;&#x4ED6;" class="headerlink" title="&#x5176;&#x4ED6;"></a>&#x5176;&#x4ED6;</h3><p>&#x5BF9;JSON&#x6570;&#x636E;&#x7684;&#x64CD;&#x4F5C;&#xFF08;&#x5982;&#x589E;&#x52A0;&#x3001;&#x5220;&#x9664;&#x3001;&#x66F4;&#x65B0;&#xFF09;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x5BF9;C#&#x7C7B;&#x7684;&#x64CD;&#x4F5C;&#x3002;</p>
<h1 id="4-JSON-&#x5C0F;&#x7ED3;"><a href="#4-JSON-&#x5C0F;&#x7ED3;" class="headerlink" title="4 JSON &#x5C0F;&#x7ED3;"></a>4 JSON &#x5C0F;&#x7ED3;</h1><h2 id="JSON&#x6587;&#x4EF6;"><a href="#JSON&#x6587;&#x4EF6;" class="headerlink" title="JSON&#x6587;&#x4EF6;"></a>JSON&#x6587;&#x4EF6;</h2><ul>
<li>&#x901A;&#x5E38;JSON &#x6587;&#x4EF6;&#x7684;&#x6587;&#x4EF6;&#x7C7B;&#x578B;&#x8BBE;&#x7F6E;&#x4E3A; &#x201C;.json&#x201D; &#xFF0C;&#x7528;&#x4E8E;&#x533A;&#x5206;&#x5176;&#x5B83;&#x683C;&#x5F0F;&#x7684;&#x6587;&#x672C;&#x6587;&#x4EF6;&#x3002;</li>
<li>JSON &#x6587;&#x672C;&#x7684; MIME &#x7C7B;&#x578B;&#x662F; &#x201C;application/json&#x201D;</li>
</ul>
<h2 id="&#x4E0E;-XML-&#x6BD4;&#x8F83;"><a href="#&#x4E0E;-XML-&#x6BD4;&#x8F83;" class="headerlink" title="&#x4E0E; XML &#x6BD4;&#x8F83;"></a>&#x4E0E; XML &#x6BD4;&#x8F83;</h2><ul>
<li><p>&#x53EF;&#x8BFB;&#x6027;</p>
<blockquote>
<p>JSON: &#x7B80;&#x6613;&#x7684;&#x8BED;&#x6CD5;&#xFF0C; XML: &#x89C4;&#x8303;&#x7684;&#x6807;&#x7B7E;&#x5F62;&#x5F0F;</p>
<p>&#x4E0D;&#x5206;&#x80DC;&#x8D1F;</p>
</blockquote>
</li>
<li><p>&#x53EF;&#x6269;&#x5C55;&#x6027;</p>
<blockquote>
<p>&#x4E0D;&#x5206;&#x80DC;&#x8D1F;</p>
</blockquote>
</li>
<li><p>&#x7F16;&#x89E3;&#x7801;&#x96BE;&#x5EA6;</p>
<blockquote>
<p>&#x5728;JS&#x4E2D;&#xFF0C;JSON&#x5177;&#x6709;&#x4F18;&#x52BF;</p>
</blockquote>
</li>
<li><p>&#x6570;&#x636E;&#x6548;&#x7387;</p>
<blockquote>
<p>JSON&#x4E0D;&#x9700;&#x8981;&#x6709;&#x4E25;&#x683C;&#x7684;&#x95ED;&#x5408;&#x6807;&#x7B7E;&#xFF0C;&#x6709;&#x6548;&#x6570;&#x636E;&#x91CF;&#x4E0E;&#x603B;&#x6570;&#x636E;&#x5305;&#x6BD4;&#x5927;&#x5927;&#x63D0;&#x5347;&#xFF0C;&#x4ECE;&#x800C;&#x51CF;&#x5C11;&#x540C;&#x7B49;&#x6570;&#x636E;&#x6D41;&#x91CF;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x7F51;&#x7EDC;&#x7684;&#x4F20;&#x8F93;&#x538B;&#x529B;</p>
</blockquote>
</li>
</ul>
<h2 id="&#x76F8;&#x5173;&#x94FE;&#x63A5;"><a href="#&#x76F8;&#x5173;&#x94FE;&#x63A5;" class="headerlink" title="&#x76F8;&#x5173;&#x94FE;&#x63A5;"></a>&#x76F8;&#x5173;&#x94FE;&#x63A5;</h2><p>&#x5728;&#x7EBF;JSON&#x7F16;&#x8F91;&#x5668;&#xFF1A;<a href="http://www.atool.org/jsoneditor.php" target="_blank" rel="external">http://www.atool.org/jsoneditor.php</a></p>
<h1 id="5-Reference"><a href="#5-Reference" class="headerlink" title="5 Reference"></a>5 Reference</h1><ol>
<li>JSON_&#x767E;&#x5EA6;&#x767E;&#x79D1;, <a href="http://baike.baidu.com/link?url=9Xh66e3k3V_8H0GXI2UreQ43jK5tX84PVIT1Bh6tgswhISJG6zzwNRhvryOkvFRp9pyXlJtSUyiId9DaDzHAyK" target="_blank" rel="external">http://baike.baidu.com/link?url=9Xh66e3k3V_8H0GXI2UreQ43jK5tX84PVIT1Bh6tgswhISJG6zzwNRhvryOkvFRp9pyXlJtSUyiId9DaDzHAyK</a></li>
<li>W3School_JSON&#x6559;&#x7A0B;, <a href="http://www.w3school.com.cn/json/index.asp" target="_blank" rel="external">http://www.w3school.com.cn/json/index.asp</a></li>
<li>&#x5728;.NET&#x4F7F;&#x7528;JSON&#x4F5C;&#x4E3A;&#x6570;&#x636E;&#x4EA4;&#x6362;&#x683C;&#x5F0F;, fangaoxin, <a href="http://blog.csdn.net/fangaoxin/article/details/7618152" target="_blank" rel="external">http://blog.csdn.net/fangaoxin/article/details/7618152</a></li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/03/22/gbs-build/" itemprop="url">
                  GBS Build
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-03-22T21:21:47+08:00" content="2016-03-22">
              2016-03-22
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>&#x672C;&#x6587;&#x662F; Tizen &#x7CFB;&#x7EDF;&#x7684; gbs build &#x7684;&#x7528;&#x6CD5;&#x7684;&#x4E2D;&#x82F1;&#x6587;&#x5BF9;&#x7167;&#x7248;&#xFF0C;&#x4E3B;&#x8981;&#x5185;&#x5BB9;&#x4E3A;&#x5982;&#x4F55;&#x4F7F;&#x7528; gbs build &#x547D;&#x4EE4;</p>
<p><em>Reference: <a href="https://source.tizen.org/documentation/reference/git-build-system/usage/gbs-build" target="_blank" rel="external">https://source.tizen.org/documentation/reference/git-build-system/usage/gbs-build</a></em></p>
</blockquote>
<h1 id="gbs-build"><a href="#gbs-build" class="headerlink" title="gbs build"></a>gbs build</h1><p>PUBLISHED 19 Oct 2014</p>
<p>By using &#x2018;gbs build&#x2019;, the developer can build the source code and generate rpm packages locally. For instructions on using the build subcommand, use this command: gbs build &#x2013;help</p>
<blockquote>
<p>&#x5F00;&#x53D1;&#x8005;&#x53EF;&#x4F7F;&#x7528;gbs build&#x5728;&#x672C;&#x5730;&#x7F16;&#x8BD1;&#x6E90;&#x4EE3;&#x7801;&#x7136;&#x540E;&#x751F;&#x6210;RPM&#x5305;&#x3002;&#x4F7F;&#x7528;&#x547D;&#x4EE4; gbs build &#x2013;help &#x53EF;&#x4EE5;&#x83B7;&#x53D6;&#x5173;&#x4E8E;&#x5B50;&#x547D;&#x4EE4; build &#x7684;&#x5E2E;&#x52A9;&#x6307;&#x5357;</p>
</blockquote>
<pre><code>$ gbs build -h
</code></pre><h2 id="gbs-build-workflow-gbs-build-&#x5DE5;&#x4F5C;&#x6D41;&#x7A0B;"><a href="#gbs-build-workflow-gbs-build-&#x5DE5;&#x4F5C;&#x6D41;&#x7A0B;" class="headerlink" title="gbs build workflow (gbs build &#x5DE5;&#x4F5C;&#x6D41;&#x7A0B;)"></a>gbs build workflow (gbs build &#x5DE5;&#x4F5C;&#x6D41;&#x7A0B;)</h2><h3 id="Input-of-gbs-build-gbs-build&#x7684;&#x8F93;&#x5165;"><a href="#Input-of-gbs-build-gbs-build&#x7684;&#x8F93;&#x5165;" class="headerlink" title="Input of gbs build (gbs build&#x7684;&#x8F93;&#x5165;)"></a>Input of gbs build (gbs build&#x7684;&#x8F93;&#x5165;)</h3><p>Below is the input for gbs build:</p>
<blockquote>
<p>&#x4EE5;&#x4E0B;&#x662F; gbs build &#x6240;&#x9700;&#x8F93;&#x5165;&#xFF1A;</p>
</blockquote>
<ul>
<li><p>git project(s) which contains rpm packaging files</p>
<blockquote>
<p>&#x5305;&#x542B;rpm packing&#x6587;&#x4EF6;&#x7684;git&#x9879;&#x76EE;</p>
</blockquote>
</li>
<li><p>binary rpm repositories (remote or local)</p>
<blockquote>
<p>&#x4E8C;&#x8FDB;&#x5236;rpm&#x5305;&#x4ED3;&#x5E93;</p>
</blockquote>
</li>
<li><p>project build configurations (macros, flags, etc)</p>
<blockquote>
<p>&#x9879;&#x76EE;&#x7F16;&#x8BD1;&#x914D;&#x7F6E;&#xFF0C;&#x5B8F;&#x5B9A;&#x4E49;&#x3001;&#x6807;&#x5FD7;&#x4F4D;&#x7B49;</p>
</blockquote>
</li>
</ul>
<p>The binary rpm repositories contain all the binary rpm packages which are used to create the chroot environment and build packages, which can be remote, like tizen release or snapshot repositories, or local repository. Local repository supports two types:</p>
<blockquote>
<p>&#x4E8C;&#x8FDB;&#x5236;rpm&#x5305;&#x4ED3;&#x5E93;&#x5305;&#x542B;&#x6240;&#x6709;rpm&#x5305;&#xFF0C;&#x8FD9;&#x4E9B;rpm&#x5305;&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x521B;&#x5EFA;chroot&#x73AF;&#x5883;&#x548C;&#x7F16;&#x8BD1;&#x8F6F;&#x4EF6;&#x5305;&#x3002;&#x5305;&#x4ED3;&#x5E93;&#x53EF;&#x4EE5;&#x662F;&#x8FDC;&#x7A0B;&#x7684;&#x6216;&#x8005;&#x662F;&#x672C;&#x5730;&#x7684;&#xFF0C;&#x8FDC;&#x7A0B;&#x7684;&#x5982;Tizen&#x7684;&#x53D1;&#x5E03;&#x6216;&#x5FEB;&#x7167;&#x4ED3;&#x5E93;&#xFF0C;&#x672C;&#x5730;&#x4ED3;&#x5E93;&#x652F;&#x6301;&#x4E24;&#x79CD;&#x7C7B;&#x578B;&#xFF0C;&#x5982;&#x4E0B;&#xFF1A;</p>
</blockquote>
<ul>
<li><p>A standard repository with repodata exists</p>
<blockquote>
<p>&#x5E26;repodata&#x7684;&#x6807;&#x51C6;&#x4ED3;&#x5E93;</p>
</blockquote>
</li>
<li><p>A normal directory contains RPM packages. GBS will find all RPM packages under this directory.</p>
<blockquote>
<p>&#x5305;&#x542B;RPM&#x5305;&#x7684;&#x666E;&#x901A;&#x76EE;&#x5F55;&#xFF0C;GBS&#x53EF;&#x4EE5;&#x5728;&#x6B64;&#x76EE;&#x5F55;&#x4E0B;&#x627E;&#x5230;&#x6240;&#x6709;&#x7684;RPM&#x5305;</p>
</blockquote>
</li>
</ul>
<p>Please refer to <a href="https://source.tizen.org/documentation/reference/git-build-system/configuration-file" target="_blank" rel="external">Configuration File</a> part to configure a repository.</p>
<blockquote>
<p>&#x8BF7;&#x53C2;&#x8003;<a href="https://source.tizen.org/documentation/reference/git-build-system/configuration-file" target="_blank" rel="external">&#x914D;&#x7F6E;&#x6587;&#x4EF6;</a>&#x6765;&#x914D;&#x7F6E;&#x4E00;&#x4E2A;&#x8F6F;&#x4EF6;&#x5305;&#x4ED3;&#x5E93;</p>
</blockquote>
<h3 id="Build-workflow-&#x7F16;&#x8BD1;&#x6D41;&#x7A0B;"><a href="#Build-workflow-&#x7F16;&#x8BD1;&#x6D41;&#x7A0B;" class="headerlink" title="Build workflow (&#x7F16;&#x8BD1;&#x6D41;&#x7A0B;)"></a>Build workflow (&#x7F16;&#x8BD1;&#x6D41;&#x7A0B;)</h3><p>The input and output of gbs build are all repositories.</p>
<blockquote>
<p>gbs build&#x7684;&#x8F93;&#x5165;&#x548C;&#x8F93;&#x51FA;&#x90FD;&#x662F;&#x4ED3;&#x5E93;</p>
</blockquote>
<p><strong>Note</strong>: All the rpm packages under the output repository (by default, ~/GBS-ROOT/local/repos/&lt;VERSION&gt;/) will be used when building packages. That is, all the packages under the output repository will be applied to the build environment, so make sure the output repository is clean if you don&#x2019;t want this behavior.</p>
<blockquote>
<p>&#x6CE8;&#x610F;&#xFF1A;&#x8F93;&#x51FA;&#x4ED3;&#x5E93;&#xFF08;&#x9ED8;&#x8BA4;&#x4E3A;~/GBS-ROOT/local/repos/&lt;VERSION&gt;/&#xFF09;&#x4E0B;&#x6240;&#x6709;&#x7684;rpm&#x5305;&#x5C06;&#x4F1A;&#x88AB;&#x7528;&#x4E8E;&#x7F16;&#x8BD1;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x4E0D;&#x5E0C;&#x671B;&#x4F7F;&#x7528;&#x8FD9;&#x4E9B;&#x5305;&#xFF0C;&#x8BF7;&#x6E05;&#x7406;&#x6389;&#x8F93;&#x51FA;&#x4ED3;&#x5E93;&#x4E2D;&#x7684;rpm&#x5305;&#x3002;</p>
</blockquote>
<p>Here&#x2019;s the basic gbs build workflow</p>
<blockquote>
<p>gbs build&#x7684;&#x57FA;&#x672C;&#x6D41;&#x7A0B;</p>
</blockquote>
<pre><code> ____________________
|                    |      ___________
| Source Code (GIT)  |----&gt;|           |      _________________________
|____________________|     |           |     |                         |
 ____________________      |           |     |  Local repository of    |
|                    |     |           |     |                         |
|    Build config    |----&gt;| GBS build |----&gt;|                         |
|____________________|     |           |     |                         |
 ____________________      |           |     |  build RPM packages     |
|                    |     |           |     |(~/GBS-ROOT/local/repos/)|
|Binary repositories |     |           |     |_________________________|
|in GBS conf         |----&gt;|___________|                  |
|(Remote or Local)   |           ^                        |
|____________________|           |________________________|
</code></pre><p>From the above diagram, we can see the input and input are all repositories and the output repository located at &#x2018;~/GBS-ROOT/locals/repos/&#x2018; by default. You can change the repo path by using &#x2018;&#x2013;buildroot&#x2019; to specify a different build root.</p>
<blockquote>
<p>&#x8F93;&#x51FA;&#x4ED3;&#x5E93;&#x9ED8;&#x8BA4;&#x4E3A;&#xFF1A;<em>~/GBS-ROOT/local/repos</em>&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; <strong>&#x2013;buildroot</strong> &#x6307;&#x5B9A;build root&#x6765;&#x6539;&#x53D8;&#x4ED3;&#x5E93;&#x8DEF;&#x5F84;&#x3002;</p>
</blockquote>
<p>Local repos in gbs build root (&#x2018;~/GBS-ROOT&#x2019; by default) will affect build results, so you must make sure that repos don&#x2019;t contains old or unnecessary RPM packages. While running gbs build, you can specify &#x2018;&#x2013;clean-repos&#x2019; to clean up local repos, which gbs created, before building. We recommend that gbs users set different gbs build root directories for different profiles. There are several ways:</p>
<blockquote>
<p>gbs build root&#x4E0B;&#x7684;&#x672C;&#x5730;&#x4ED3;&#x5E93;&#x4F1A;&#x5F71;&#x54CD;&#x7F16;&#x8BD1;&#x7ED3;&#x679C;&#xFF0C;&#x6240;&#x4EE5;&#x4F60;&#x5FC5;&#x987B;&#x8981;&#x4FDD;&#x8BC1;&#x4ED3;&#x5E93;&#x91CC;&#x6CA1;&#x6709;&#x65E7;&#x7684;&#x8F6F;&#x4EF6;&#x5305;&#x6216;&#x8005;&#x65E0;&#x5173;&#x7684;&#x8F6F;&#x4EF6;&#x5305;&#x3002;&#x5728;&#x7F16;&#x8BD1;&#x7684;&#x65F6;&#x5019;&#x53EF;&#x4EE5;&#x7528; &#x2013;clean-repos &#x9009;&#x9879;&#x5728;&#x5B9E;&#x9645;&#x7F16;&#x8BD1;&#x524D;&#x6E05;&#x7406; gbs &#x521B;&#x5EFA;&#x7684;&#x672C;&#x5730;&#x4ED3;&#x5E93;&#x3002;&#x5EFA;&#x8BAE; gbs &#x4F7F;&#x7528;&#x8005;&#x9488;&#x5BF9;&#x4E0D;&#x540C;&#x7684;&#x573A;&#x666F;&#x8BBE;&#x7F6E;&#x4E0D;&#x540C;&#x7684; build root &#x76EE;&#x5F55;&#x3002;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4EE5;&#x4E0B;&#x65B9;&#x6CD5;&#xFF1A;</p>
</blockquote>
<ul>
<li><p>By default, the GBS build will put all output files under ~/GBS-ROOT/.</p>
<blockquote>
<p>GBS build&#x9ED8;&#x8BA4;&#x4F1A;&#x628A;&#x6240;&#x6709;&#x7684;&#x8F93;&#x51FA;&#x6587;&#x4EF6;&#x90FD;&#x653E;&#x5728; <em>~/GBS-ROOT/</em> &#x91CC;</p>
</blockquote>
</li>
<li><p>If the environment variable TIZEN_BUILD_ROOT exists, ${TIZEN_BUILD_ROOT} will be used as output top dir</p>
<blockquote>
<p>&#x5982;&#x679C;&#x5B58;&#x5728;&#x73AF;&#x5883;&#x53D8;&#x91CF; TIZEN_BUILD_ROOT&#xFF0C;&#x5176;&#x503C; $(TIZEN_BUILD_ROOT) &#x5C06;&#x4F1A;&#x4F5C;&#x4E3A; build root</p>
</blockquote>
</li>
<li><p>If -B option is specified, then the specified directory is used, even if ${TIZEN_BUILD_ROOT} exists</p>
<blockquote>
<p>&#x5982;&#x679C;&#x4F7F;&#x7528; -B &#x9009;&#x9879;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x5176;&#x53C2;&#x6570;&#x5C06;&#x4F5C;&#x4E3A; build root &#xFF0C;&#x5373;&#x4F7F;&#x73AF;&#x5883;&#x53D8;&#x91CF; $(TIZEN_BUILD_ROOT) &#x5B58;&#x5728;</p>
</blockquote>
</li>
</ul>
<h3 id="Output-of-gbs-build-gbs-build-&#x8F93;&#x51FA;"><a href="#Output-of-gbs-build-gbs-build-&#x8F93;&#x51FA;" class="headerlink" title="Output of gbs build (gbs build &#x8F93;&#x51FA;)"></a>Output of gbs build (gbs build &#x8F93;&#x51FA;)</h3><p>Structure of a GBS build root directory</p>
<blockquote>
<p>GBS build root&#x7684;&#x76EE;&#x5F55;&#x7ED3;&#x6784;</p>
</blockquote>
<pre><code>gbs output top dir
|-- local
| |-- cache # repodata and RPMs from remote repositories
| |-- repos # generated local repo top directory
| | |-- tizen # distro one: tizen
| | | |-- armv7l # store armv7l RPM packages
| | | |-- i586 # store x86 RPM packages
| | `-- tizen2.0 # build for distro two: tizen2.0
| | `-- i586 # the same as above
| |-- scratch.armv7l.0 # first build root for arm build
| |-- scratch.i586.0 # second build root for x86 build
| |-- scratch.i586.1 # third build root for x86 build
| |-- scratch.i586.2 # fourth build root for x86 build
| |-- scratch.i586.3 # fifth build root for x86 build
| | # The above build root dir can be used by gbs chroot &lt;build root dir&gt;
| `-- sources # sources generated for build, including tarball, spec, patches, etc.
| |-- tizen
| `-- tizen2.0
`-- meta # meta data used by gbs
</code></pre><h2 id="GBS-Build-Examples-Basic-Usage-GBS-Build&#x793A;&#x4F8B;&#xFF0C;&#x57FA;&#x672C;&#x7528;&#x6CD5;"><a href="#GBS-Build-Examples-Basic-Usage-GBS-Build&#x793A;&#x4F8B;&#xFF0C;&#x57FA;&#x672C;&#x7528;&#x6CD5;" class="headerlink" title="GBS Build Examples (Basic Usage) (GBS Build&#x793A;&#x4F8B;&#xFF0C;&#x57FA;&#x672C;&#x7528;&#x6CD5;)"></a>GBS Build Examples (Basic Usage) (GBS Build&#x793A;&#x4F8B;&#xFF0C;&#x57FA;&#x672C;&#x7528;&#x6CD5;)</h2><p>1 Build a single package.</p>
<blockquote>
<p>&#x7F16;&#x8BD1;&#x5355;&#x4E2A;&#x5305;</p>
</blockquote>
<pre><code>$ cd package1
$ gbs build -A i586
</code></pre><p>2 Build a package for different architectures.</p>
<blockquote>
<p>&#x4E3A;&#x4E0D;&#x540C;&#x7684;&#x67B6;&#x6784;&#x7F16;&#x8BD1;&#x5305;</p>
</blockquote>
<p><strong>Note</strong>: Supported architectures include: x86_64, i586, armv6l, armv7hl, armv7l, aarch64, mips, mipsel.</p>
<blockquote>
<p>&#x6CE8;&#x610F;&#xFF1A;&#x652F;&#x6301;&#x7684;&#x67B6;&#x6784;&#x6709;&#xFF1A; x86_64, i586, armv6l, armv7hl, armv7l, aarch64, mips, mipsel.</p>
</blockquote>
<pre><code>$ gbs build -A armv7l #build package for armv7l
$ gbs build -A i586 #build package for i586
</code></pre><p>3 Make a clean build by deleting the old build root. This option must be specified if the repo has been changed, for example, changed to another release.</p>
<blockquote>
<p>&#x5220;&#x9664;&#x65E7;&#x7684;build root&#xFF0C;&#x5168;&#x65B0;&#x7F16;&#x8BD1;&#x3002;&#x5F53;&#x8F6F;&#x4EF6;&#x5305;&#x4ED3;&#x5E93;&#x6709;&#x53D8;&#x5316;&#x65F6;&#xFF0C;&#x5FC5;&#x987B;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#x9009;&#x9879;&#xFF0C;&#x6BD4;&#x5982;&#x6539;&#x6210;&#x4F7F;&#x7528;&#x53E6;&#x4E00;&#x4E2A;&#x53D1;&#x884C;&#x7248;&#x7684;&#x8F6F;&#x4EF6;&#x4ED3;&#x5E93;&#x65F6;.</p>
</blockquote>
<pre><code>$ gbs build -A armv7l --clean
</code></pre><p>4 Build the package with a specific commit.</p>
<blockquote>
<p>&#x4E3A;&#x7279;&#x5B9A;&#x63D0;&#x4EA4;&#x7F16;&#x8BD1;&#x5305;</p>
</blockquote>
<pre><code>$ gbs build -A armv7l --commit=&lt;COMMIT_ID&gt;
</code></pre><p>5 Use &#x2013;overwrite to trigger a rebuild.</p>
<blockquote>
<p>&#x7528;&#x2013;overwrite&#x89E6;&#x53D1;&#x4E00;&#x6B21;&#x91CD;&#x65B0;&#x7F16;&#x8BD1;</p>
</blockquote>
<p>If you have already built before, and want to rebuild, &#x2013;overwrite should be specified, or the packages will be skipped.</p>
<blockquote>
<p>&#x5982;&#x679C;&#x4EE5;&#x524D;&#x5DF2;&#x7ECF;&#x7F16;&#x8BD1;&#x8FC7;&#xFF0C;&#x5E76;&#x4E14;&#x60F3;&#x91CD;&#x65B0;&#x7F16;&#x8BD1;&#xFF0C;&#x5E94;&#x8BE5;&#x4F7F;&#x7528;&#x2013;overwrite&#xFF0C;&#x5426;&#x5219;&#x5DF2;&#x7ECF;&#x7F16;&#x8FC7;&#x7684;&#x5305;&#x4F1A;&#x88AB;&#x8DF3;&#x8FC7;</p>
</blockquote>
<pre><code>$ gbs build -A i586 --overwrite
</code></pre><p>If you change the commit or specify &#x2013;include-all option, it will always rebuild, so &#x2013;overwrite is not needed.</p>
<blockquote>
<p>&#x5982;&#x679C;&#x6709;&#x65B0;&#x63D0;&#x4EA4;&#x6216;&#x8005;&#x5E26;&#x9009;&#x9879;&#x2013;include-all&#xFF0C;&#x5219;GBS&#x603B;&#x662F;&#x4F1A;&#x91CD;&#x65B0;&#x7F16;&#x8BD1;&#xFF0C;&#x6B64;&#x65F6;&#x6EF4;&#x5FC5;&#x8981;&#x4F7F;&#x7528;&#x2013;overwrite</p>
</blockquote>
<p>6 Output the debug info.</p>
<blockquote>
<p>&#x8F93;&#x51FA;&#x8C03;&#x8BD5;&#x4FE1;&#x606F;</p>
</blockquote>
<pre><code>$ gbs build -A i586 --debug
</code></pre><p>7 Build against a local repository. You can config the local repo at .gbs.conf file or through the command line.</p>
<pre><code>$ gbs build -R /path/to/repo/dir/ -A i586
</code></pre><p>8 Use &#x2013;noinit to build package in offline mode.</p>
<blockquote>
<p>&#x4F7F;&#x7528; &#x2013;noinit &#x9009;&#x9879;&#xFF0C;&#x5728;&#x79BB;&#x7EBF;&#x6A21;&#x5F0F;&#x4E0B;&#x7F16;&#x8BD1;</p>
</blockquote>
<p>&#x2013;noinit option can only be used if build root is ready. With &#x2013;noinit option, gbs will not connect the remote repo, and skip parsing &amp; checking repo and initialize build environment. rpmbuild will be used to build the package directly. Here&#x2019;s an example:</p>
<blockquote>
<p>&#x5728;build root&#x51C6;&#x5907;&#x597D;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x9009;&#x9879; &#x2013;noinit&#x3002;&#x4F7F;&#x7528; &#x2013;noinit &#x9009;&#x9879;&#x65F6;&#xFF0C;gbs&#x4E0D;&#x4F1A;&#x8FDE;&#x63A5;&#x8FDC;&#x7A0B;&#x4ED3;&#x5E93;&#x5E76;&#x4E14;&#x4F1A;&#x8DF3;&#x8FC7;&#x89E3;&#x6790;/&#x68C0;&#x67E5;&#x4ED3;&#x5E93;&#x548C;&#x521D;&#x59CB;&#x5316;&#x7F16;&#x8BD1;&#x73AF;&#x5883;&#xFF0C;&#x76F4;&#x63A5;&#x4F7F;&#x7528;rpmbuild&#x7F16;&#x8BD1;&#x5305;. </p>
<p><strong>&#x91CD;&#x8981;</strong>&#xFF1A;&#x6B64;&#x9009;&#x9879;&#x53EF;&#x7528;&#x4E8E;&#x5FEB;&#x901F;&#x7F16;&#x8BD1;</p>
</blockquote>
<pre><code>$ gbs build -A i586 # build first and create build environment
$ gbs build -A i586 --noinit # use --noinit to start building directly
</code></pre><p>9 Build with all uncommitted changes using &#x2013;include-all.</p>
<blockquote>
<p>&#x4F7F;&#x7528; &#x2013;include-all &#x9009;&#x9879;&#x7F16;&#x8BD1;&#x6240;&#x6709;&#x7684;&#x672A;&#x63D0;&#x4EA4;&#x7684;&#x6539;&#x52A8;</p>
<p><strong>&#x91CD;&#x8981;</strong>&#xFF0C;&#x6B64;&#x9009;&#x9879;&#x4E3A;&#x5E38;&#x7528;&#x9009;&#x9879;&#xFF0C;&#x5F53;&#x7528;&#x6237;&#x672C;&#x5730;&#x6709;&#x4FEE;&#x6539;&#x53C8;&#x6CA1;&#x6709;&#x63D0;&#x4EA4;&#x65F6;&#xFF0C;&#x7ECF;&#x5E38;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x6B64;&#x9009;&#x9879;&#x7528;&#x4E8E;&#x6D4B;&#x8BD5;&#x65B0;&#x4EE3;&#x7801;</p>
</blockquote>
<p>For example, the git tree contains one modified file and two extra files:</p>
<blockquote>
<p>&#x4F8B;&#x5982;&#xFF0C;git&#x76EE;&#x5F55;&#x4E2D;&#x5305;&#x542B;&#x4E00;&#x4E2A;&#x6539;&#x52A8;&#x7684;&#x6587;&#x4EF6;&#x548C;&#x4E8C;&#x4E2A;&#x65B0;&#x52A0;&#x7684;&#x6587;&#x4EF6;</p>
</blockquote>
<pre><code>$ git status -s
M ail.pc.in
?? base.repo
?? main.repo
</code></pre><p><strong>Build without the &#x2013;include-all option</strong></p>
<blockquote>
<p>&#x4E0D;&#x7528;&#x2013;include-all&#x7F16;&#x8BD1;</p>
</blockquote>
<p>Builds committed files only. All the modified files, which are not committed nor added, will NOT be built:</p>
<blockquote>
<p>&#x4EC5;&#x7F16;&#x8BD1;&#x5DF2;&#x63D0;&#x4EA4;&#x7684;&#x6587;&#x4EF6;&#x3002;&#x6240;&#x6709;&#x672A;&#x63D0;&#x4EA4;&#x6216;&#x672A;&#x6DFB;&#x52A0;&#x5230;&#x7248;&#x672C;&#x63A7;&#x5236;&#x7684;&#x6587;&#x4EF6;&#x90FD;&#x4E0D;&#x4F1A;&#x88AB;&#x7F16;&#x8BD1;:</p>
</blockquote>
<pre><code>$ gbs build -A i586
warning: the following untracked files would NOT be included: base.repo main.repo
warning: the following uncommitted changes would NOT be included: ail.pc.in
warning: you can specify &apos;--include-all&apos; option to include these uncommitted and untracked files.
....
info: Binaries RPM packages can be found here:
/home/test/GBS-ROOT/local/scratch.i586.0/home/abuild/rpmbuild/RPMS/
info: Done
</code></pre><p><strong>Build with the &#x2013;include-all option builds all the files</strong></p>
<blockquote>
<p>&#x4F7F;&#x7528;&#x2013;include-all&#x6765;&#x7F16;&#x8BD1;&#x6240;&#x6709;&#x7684;&#x6587;&#x4EF6;</p>
</blockquote>
<pre><code>$ gbs build -A i586 --include-all
info: the following untracked files would be included: base.repo main.repo
info: the following un-committed changes would be included: ail.pc.in
info: export tar ball and packaging files
...
...
[build finished]
</code></pre><p><strong>Use .gitignore to ignore specific files, when using the &#x2013;include-all option.</strong></p>
<blockquote>
<p>&#x5F53;&#x4F7F;&#x7528;&#x2013;incldue-all&#x65F6;&#x53EF;&#x4EE5;&#x7528;.gitignore&#x6765;&#x5FFD;&#x7565;&#x7279;&#x5B9A;&#x7684;&#x6587;&#x4EF6;</p>
</blockquote>
<p>If you want to ignore some files types, you can update your .gitignore. For example:</p>
<blockquote>
<p>&#x5982;&#x679C;&#x8981;&#x60F3;&#x5FFD;&#x7565;&#x67D0;&#x7C7B;&#x578B;&#x6587;&#x4EF6;&#x53EF;&#x4EE5;&#x4FEE;&#x6539;.gitignore&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;</p>
</blockquote>
<pre><code>$ cat .gitignore
.*
*/.*
*.pyc
*.patch*
</code></pre><h2 id="Incremental-build"><a href="#Incremental-build" class="headerlink" title="Incremental build"></a>Incremental build</h2><blockquote>
<p>&#x589E;&#x91CF;&#x7F16;&#x8BD1;</p>
</blockquote>
<h3 id="Incremental-Concept"><a href="#Incremental-Concept" class="headerlink" title="Incremental Concept"></a>Incremental Concept</h3><blockquote>
<p>&#x589E;&#x91CF;&#x7684;&#x6982;&#x5FF5;</p>
</blockquote>
<p>Starting from gbs 0.10, the gbs build subcommand supports building incrementally, which can be enabled by specifying the &#x2018;&#x2013;incremental&#x2019; option.</p>
<blockquote>
<p>&#x4ECE;gbs 0.10&#x5F00;&#x59CB;&#xFF0C;gbs build&#x5C31;&#x652F;&#x6301;&#x589E;&#x91CF;&#x5F0F;&#x7684;&#x7F16;&#x8BD1;&#xFF0C;&#x901A;&#x8FC7;&#x6307;&#x5B9A;&#x2013;incremental&#x9009;&#x9879;&#x6765;&#x542F;&#x7528;&#x3002;</p>
</blockquote>
<p>This mode is designed for development and verification of single packages. It is not intended to replace the standard mode. Only one package can be built at a time using this mode.</p>
<blockquote>
<p>&#x8FD9;&#x79CD;&#x6A21;&#x5F0F;&#x4E3B;&#x8981;&#x7528;&#x6765;&#x5F00;&#x53D1;&#x548C;&#x9A8C;&#x8BC1;&#x5355;&#x4E2A;&#x8F6F;&#x4EF6;&#x5305;&#xFF0C;&#x4E0D;&#x662F;&#x7528;&#x6765;&#x66FF;&#x4EE3;&#x6807;&#x51C6;&#x7684;&#x7F16;&#x8BD1;&#x6A21;&#x5F0F;&#x3002;&#x5728;&#x6B64;&#x6A21;&#x5F0F;&#x4E0B;&#xFF0C;&#x4E00;&#x6B21;&#x53EA;&#x80FD;&#x7F16;&#x8BD1;&#x4E00;&#x4E2A;&#x5305;&#x3002;</p>
</blockquote>
<p>This mode will set up the build environment in multiple steps, finishing by mounting the local Git tree of a package in the chroot build environment.</p>
<blockquote>
<p>&#x8FD9;&#x79CD;&#x6A21;&#x5F0F;&#x5206;&#x6210;&#x591A;&#x6B65;&#x6765;&#x8BBE;&#x7F6E;&#x7F16;&#x8BD1;&#x73AF;&#x5883;&#xFF0C;&#x628A;&#x672C;&#x5730;&#x7684;&#x8F6F;&#x4EF6;&#x5305;&#x7684;Git&#x76EE;&#x5F55;&#x7ED1;&#x5B9A;&#x5230;chroot&#x7684;&#x7F16;&#x8BD1;&#x76EE;&#x5F55;&#x540E;&#x5C31;&#x5B8C;&#x6210;&#x4E86;&#x3002;</p>
</blockquote>
<p>Note: Because gbs will mount your git tree to the build root, be very careful when you remove your build root. You need to make sure you&#x2019;ve already umounted the source tree manually before you remove it.</p>
<blockquote>
<p>&#x6CE8;&#x610F;&#xFF1A;&#x56E0;&#x4E3A;gbs&#x4F1A;&#x628A;git&#x76EE;&#x5F55;&#x7ED1;&#x5B9A;&#x5230;buid root&#xFF0C;&#x6240;&#x4EE5;&#x5F53;&#x8981;&#x5220;&#x9664;build root&#x65F6;&#x8981;&#x975E;&#x5E38;&#x5C0F;&#x5FC3;&#xFF0C;&#x5220;&#x9664;&#x524D;&#x8981;&#x786E;&#x5B9A;&#x5DF2;&#x7ECF;&#x624B;&#x52A8;&#x5730;&#x628A;&#x6E90;&#x7801;&#x89E3;&#x7ED1;&#x5B9A;&#x3002;</p>
</blockquote>
<p>This has the following benefits:</p>
<blockquote>
<p>&#x8FD9;&#x79CD;&#x6A21;&#x5F0F;&#x6709;&#x4EE5;&#x4E0B;&#x4F18;&#x70B9;&#xFF1A;</p>
</blockquote>
<ul>
<li><p>The build environment uses the latest source code and changes to source do not trigger a new build environment (in the chroot).</p>
<blockquote>
<p>&#x7F16;&#x8BD1;&#x73AF;&#x5883;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x6700;&#x65B0;&#x7684;&#x6E90;&#x4EE3;&#x7801;&#xFF0C;&#x5E76;&#x4E14;&#x4EE3;&#x7801;&#x7684;&#x6539;&#x52A8;&#x4E0D;&#x4F1A;&#x4FEE;&#x6539;&#x7F16;&#x8BD1;&#x73AF;&#x5883;</p>
</blockquote>
</li>
<li><p>The Git source tree becomes the source of the builds. Any change made in the Git repository followed by invocation of the build script will build the changed sources</p>
<blockquote>
<p>git&#x76EE;&#x5F55;&#x53D8;&#x6210;&#x4E86;&#x7F16;&#x8BD1;&#x7684;&#x6E90;&#x76EE;&#x5F55;&#xFF0C;&#x53EA;&#x8981;&#x5728;git&#x4E2D;&#x7684;&#x4EFB;&#x4F55;&#x6539;&#x52A8;&#x4E4B;&#x540E;&#xFF0C;&#x8C03;&#x7528;&#x7F16;&#x8BD1;&#x547D;&#x4EE4;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x7F16;&#x8BD1;&#x6539;&#x52A8;&#x8FC7;&#x7684;&#x6E90;&#x4EE3;&#x7801;</p>
</blockquote>
</li>
<li><p>If the build fails for some reason, the build script will continue from the spot where it has failed, once the code has been changed to fix the problem causing the failure.</p>
<blockquote>
<p>&#x7F16;&#x8BD1;&#x5931;&#x8D25;&#x540E;&#xFF0C;&#x4E00;&#x65E6;&#x5BFC;&#x81F4;&#x7F16;&#x8BD1;&#x5931;&#x8D25;&#x7684;&#x9519;&#x8BEF;&#x88AB;&#x4FEE;&#x6B63;&#xFF0C;&#x7F16;&#x8BD1;&#x811A;&#x672C;&#x4F1A;&#x4ECE;&#x5148;&#x524D;&#x5931;&#x8D25;&#x7684;&#x5730;&#x65B9;&#x63A5;&#x7740;&#x7F16;&#x8BD1;</p>
</blockquote>
</li>
</ul>
<p>This mode is, in many ways, similar to traditional code development, where changes are made to sources, followed by running make to test and compile the changes. However, it enables development using the build environment of the target, instead of the host OS.</p>
<blockquote>
<p>&#x4ECE;&#x4E0D;&#x540C;&#x7684;&#x65B9;&#x9762;&#x8BF4;&#xFF0C;&#x8FD9;&#x79CD;&#x6A21;&#x5F0F;&#x7C7B;&#x4F3C;&#x4E8E;&#x4F20;&#x7EDF;&#x7684;&#x4EE3;&#x7801;&#x5F00;&#x53D1;&#xFF1A;&#x4FEE;&#x6539;&#x4EE3;&#x7801;&#x7136;&#x540E;&#x8FD0;&#x884C;make&#x7F16;&#x8BD1;&#x6539;&#x52A8;&#x3002;&#x4E0D;&#x540C;&#x7684;&#x5730;&#x65B9;&#x5728;&#x4E8E;&#xFF0C;&#x589E;&#x91CF;&#x7F16;&#x8BD1;&#x4F7F;&#x7528;&#x7F16;&#x8BD1;&#x73AF;&#x5883;&#x800C;&#x4E0D;&#x662F;&#x5BBF;&#x4E3B;&#x673A;&#x5668;&#x7684;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;</p>
</blockquote>
<p>This method has some limitations, mostly related to packaging and how the sources are maintained. Among others, it depends on how the RPM spec file is composed:</p>
<blockquote>
<p>&#x8FD9;&#x79CD;&#x6A21;&#x5F0F;&#x6709;&#x4E00;&#x4E9B;&#x9650;&#x5236;&#xFF0C;&#x90FD;&#x662F;&#x5173;&#x4E8E;&#x6253;&#x5305;&#x548C;&#x4EE3;&#x7801;&#x7684;&#x7BA1;&#x7406;&#x3002;&#x5C24;&#x5176;&#x662F;&#x4F9D;&#x8D56;&#x4E8E;RPM&#x7684;spec&#x6587;&#x4EF6;</p>
</blockquote>
<ul>
<li><p>It does not support patches in the spec file. All source has to be maintained as part of the Git tree</p>
<blockquote>
<p>&#x4E0D;&#x652F;&#x6301;spec&#x6587;&#x4EF6;&#x4E2D;&#x7684;patches&#xFF0C;&#x6240;&#x6709;&#x7684;&#x6E90;&#x7801;&#x5FC5;&#x987B;&#x662F;git&#x76EE;&#x5F55;&#x7684;&#x4E00;&#x90E8;&#x5206;</p>
</blockquote>
</li>
<li><p>It requires a clean packaging workflow. Exotic workflows in the spec files might not work well, because this mode expects the following model:</p>
<blockquote>
<p>&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x6574;&#x6D01;&#x7684;&#x6253;&#x5305;&#x6D41;&#x7A0B;&#x3002;spec&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x6781;&#x7279;&#x6B8A;&#x7684;&#x6D41;&#x7A0B;&#x53EF;&#x80FD;&#x4E0D;&#x4F1A;&#x6709;&#x6548;&#xFF0C;&#x56E0;&#x4E3A;&#x8FD9;&#x79CD;&#x6A21;&#x5F0F;&#x9884;&#x671F;&#x4EE5;&#x4E0B;&#x6A21;&#x578B;&#xFF1A;</p>
</blockquote>
<ol>
<li>Code preparation (%prep) &#xFF08;&#x4EE3;&#x7801;&#x51C6;&#x5907;&#xFF09;</li>
<li>Code building (%build) &#xFF08;&#x4EE3;&#x7801;&#x7F16;&#x8BD1;&#xFF09;</li>
<li>Code installation (%install) &#xFF08;&#x4EE3;&#x7801;&#x5B89;&#x88C5;&#xFF09;</li>
</ol>
</li>
</ul>
<ul>
<li><p>Because we run the %build section every time, if the %build script has configuration scripts (auto-tools), binaries might be regenerated, causing a complete build every time. To avoid this, you are encouraged to use the following macros, which can be overridden using the &#x2013;no-configure option:</p>
<blockquote>
<p>&#x56E0;&#x4E3A;&#x6BCF;&#x6B21;&#x90FD;&#x8FD0;&#x884C;&#x7F16;&#x8BD1;&#x90E8;&#x5206;&#xFF0C;&#x5982;&#x679C;%build&#x811A;&#x672C;&#x6709;&#x81EA;&#x52A8;&#x914D;&#x7F6E;&#x811A;&#x672C;&#xFF0C;&#x4E8C;&#x8FDB;&#x5236;&#x6587;&#x4EF6;&#x4F1A;&#x88AB;&#x91CD;&#x65B0;&#x751F;&#x6210;&#xFF0C;&#x5BFC;&#x81F4;&#x6BCF;&#x6B21;&#x90FD;&#x5B8C;&#x5168;&#x7F16;&#x8BD1;&#x3002;&#x4E3A;&#x4E86;&#x907F;&#x514D;&#x8FD9;&#x6837;&#x60C5;&#x51B5;&#x53D1;&#x751F;&#xFF0C;&#x63A8;&#x8350;&#x4F7F;&#x7528;&#x4E0B;&#x9762;&#x7684;&#x5B8F;&#xFF0C;&#x8FD9;&#x4E9B;&#x5B8F;&#x80FD;&#x591F;&#x7528;&#x2013;no-configure&#x9009;&#x9879;&#x6765;&#x8986;&#x76D6;</p>
</blockquote>
<ol>
<li>%configure: runs the configure script with pre-defined paths and options.</li>
<li>%reconfigure: regenerates the scripts and runs %configure</li>
<li>%autogen: runs the autogen script</li>
</ol>
</li>
</ul>
<h3 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h3><p>In this example, we use dlog source code. First, we need to build with &#x2013;incremental, then just modify one source file, and trigger the incremental build again. We will see that only modified source code has been compiled during the incremental build.</p>
<pre><code>$ cd dlog
# first build:
$ gbs build -A i586 --incremental
$ vim log.c # change code
# second build:
$ gbs build -A i586 --incremental
info: generate repositories ...
info: build conf has been downloaded at:
/var/tmp/test-gbs/tizen.conf
info: Start building packages from: /home/test/packages/dlog (git)
info: Prepare sources...
info: Retrieving repo metadata...
info: Parsing package data...
info: *** overwriting dlog-0.4.1-5.1 i586 ***
info: Next pass:
dlog
info: *** building dlog-0.4.1-5.1 i586 tizen (worker: 0) ***
info: Doing incremental build
[ 0s] Memory limit set to 10854336KB
[ 0s] Using BUILD_ROOT=/home/test/GBS-ROOT/local/scratch.i586.0
[ 0s] Using BUILD_ARCH=i686:i586:i486:i386:noarch
[ 0s] test-desktop started &quot;build dlog.spec&quot; at Thu Sep 13 07:36:14 UTC 2012.
[ 0s] -----------------------------------------------------------------
[ 0s] ----- building dlog.spec (user abuild)
[ 0s] -----------------------------------------------------------------
[ 0s] -----------------------------------------------------------------
[ 0s] + rpmbuild --short-circuit -bc /home/abuild/rpmbuild/SOURCES/dlog.spec
[ 0s] Executing(%build): /bin/sh -e /var/tmp/rpm-tmp.XLz8je
[ 0s] + umask 022
[ 0s] + export LD_AS_NEEDED
[ 4s] + make -j4
[ 4s] make all-am
[ 4s] make[1]: Entering directory /home/abuild/rpmbuild/BUILD/dlog-0.4.1
[ 4s] /bin/sh ./libtool --tag=CC --mode=compile gcc -c -o log.lo log.c
[ 4s] mv -f .deps/log.Tpo .deps/log.Plo
[ 4s] /bin/sh ./libtool --tag=CC --mode=link gcc -o libdlog.la /usr/lib log.lo
[ 4s] libtool: link: gcc -shared .libs/log.o -o .libs/libdlog.so.0.0.0
[ 4s] libtool: link: ar cru .libs/libdlog.a log.o
[ 4s] libtool: link: ranlib .libs/libdlog.a
[ 4s] make[1]: Leaving directory /home/abuild/rpmbuild/BUILD/dlog-0.4.1
[ 4s] + exit 0
[ 4s] finished &quot;build dlog.spec&quot; at Thu Sep 13 07:36:18 UTC 2012.
[ 4s]
info: finished incremental building dlog
info: Local repo can be found here:
/home/test/GBS-ROOT/local/repos/tizen/
info: Done
</code></pre><p>From the buildlog, we can see that only log.c has been re-compiled. That&#x2019;s the incremental build behavior.</p>
<p>&#x2013;noinit option can be used together with &#x2013;incremental to make a build more quickly, like:</p>
<pre><code>$ gbs build --incremental --noinit
</code></pre><h3 id="Limitations-of-Incremental-Build"><a href="#Limitations-of-Incremental-Build" class="headerlink" title="Limitations of Incremental Build"></a>Limitations of Incremental Build</h3><blockquote>
<p>&#x589E;&#x91CF;&#x7F16;&#x8BD1;&#x7684;&#x9650;&#x5236;</p>
</blockquote>
<p>Incremental build doesn&#x2019;t support all packages. Here are some limitations:</p>
<blockquote>
<p>&#x589E;&#x91CF;&#x7F16;&#x8BD1;&#x4E0D;&#x652F;&#x6301;&#x6240;&#x6709;&#x7684;&#x5305;&#x3002;&#x4E00;&#x4E9B;&#x9650;&#x5236;&#x5982;&#x4E0B;:</p>
</blockquote>
<ul>
<li><p>Incremental build currently supports building only a single package. It doesn&#x2019;t support building multiple packages in parallel</p>
<blockquote>
<p>&#x53EA;&#x652F;&#x6301;&#x5355;&#x4E2A;&#x5305;</p>
</blockquote>
</li>
<li><p>The tarball&#x2019;s name in the spec file should be %{name}-%{version}.{tar.gz|tar.bz2|zip|&#x2026;}, otherwise GBS can&#x2019;t mount source code to build the root correctly</p>
<blockquote>
<p>spec&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x538B;&#x7F29;&#x5305;&#x540D;&#x5B57;&#x5FC5;&#x987B;&#x662F;%{name}-%{version}.{tar.gz|tar.bz2|zip|&#x2026;}&#xFF0C;&#x5426;&#x5219;GBS&#x65E0;&#x6CD5;&#x6B63;&#x786E;&#x628A;&#x6E90;&#x7801;&#x7ED1;&#x5B9A;&#x5230;build root&#x4E2D;</p>
</blockquote>
</li>
<li><p>%prep section should only contains %setup macro to unpack tarball, and should not contains other source code related operations, such as unpack another source, apply patches, etc.</p>
<blockquote>
<p>%prep&#x90E8;&#x5206;&#x5E94;&#x8BE5;&#x4EC5;&#x5305;&#x542B;&#x7528;&#x4E8E;&#x89E3;&#x5727;&#x538B;&#x7F29;&#x5305;&#x7684;%setup&#x5B8F;&#xFF0C;&#x800C;&#x4E0D;&#x5E94;&#x8BE5;&#x542B;&#x6709;&#x5BF9;&#x6E90;&#x4EE3;&#x7801;&#x7684;&#x5176;&#x4ED6;&#x64CD;&#x4F5C;&#xFF0C;&#x6BD4;&#x5982;&#x89E3;&#x538B;&#x5176;&#x4ED6;&#x6E90;&#x7801;&#x6216;&#x6253;patch&#x7B49;&#x90FD;&#x4E0D;&#x5141;&#x8BB8;</p>
</blockquote>
</li>
</ul>
<h2 id="Multiple-packages-build-dependency-build-&#x591A;&#x5305;&#x7F16;&#x8BD1;"><a href="#Multiple-packages-build-dependency-build-&#x591A;&#x5305;&#x7F16;&#x8BD1;" class="headerlink" title="Multiple packages build (dependency build) (&#x591A;&#x5305;&#x7F16;&#x8BD1;)"></a>Multiple packages build (dependency build) (&#x591A;&#x5305;&#x7F16;&#x8BD1;)</h2><p>Multiple package build has been supported since gbs 0.10. If packages have dependencies on each other, gbs will build packages in the correct order calculated by dependency relationship. Previously built out RPMs will be used to build the following packages that depend on them, which is the dependency build.</p>
<blockquote>
<p>&#x4ECE;gbs 0.10&#x5F00;&#x59CB;&#x5C31;&#x652F;&#x6301;&#x591A;&#x5305;&#x7F16;&#x8BD1;&#x3002;&#x5982;&#x679C;&#x5305;&#x6709;&#x76F8;&#x4E92;&#x7684;&#x4F9D;&#x8D56;&#xFF0C;gbs&#x4F1A;&#x8BA1;&#x7B97;&#x51FA;&#x5B83;&#x4EEC;&#x4E4B;&#x95F4;&#x7684;&#x5173;&#x7CFB;&#x7136;&#x540E;&#x6309;&#x6B63;&#x786E;&#x7684;&#x987A;&#x5E8F;&#x6765;&#x7F16;&#x8BD1;&#x3002;&#x4F5C;&#x4E3A;&#x4F9D;&#x8D56;&#x7F16;&#x8BD1;&#xFF0C;&#x5148;&#x524D;&#x7F16;&#x8BD1;&#x51FA;&#x7684;RPM&#x5305;&#x4F1A;&#x7528;&#x6765;&#x7F16;&#x8BD1;&#x540E;&#x9762;&#x7684;&#x6709;&#x4F9D;&#x8D56;&#x9700;&#x6C42;&#x7684;&#x5305;</p>
</blockquote>
<p>Examples:</p>
<p>1 Build all packages under a specified package directory</p>
<blockquote>
<p>&#x7F16;&#x8BD1;&#x6307;&#x5B9A;&#x76EE;&#x5F55;&#x4E0B;&#x7684;&#x6240;&#x6709;&#x7684;&#x5305;</p>
</blockquote>
<pre><code>$ mkdir tizen-packages
$ cp package1 package2 package3 ... tizen-packages/
$ gbs build -A i586 tizen-packages # build all packages under tizen-packages
</code></pre><p>2 Build multiple packages in parallel with &#x2013;threads</p>
<blockquote>
<p>&#x4F7F;&#x7528;&#x2013;threads&#x9009;&#x9879;&#x6765;&#x5E76;&#x884C;&#x7F16;&#x8BD1;&#x591A;&#x4E2A;&#x5305;</p>
</blockquote>
<pre><code># current directory have multiple packages, --threads can be used to set the max build worker at the same time
$ gbs build -A armv7l --threads=4
</code></pre><p>3 Select a group of packages to be built</p>
<blockquote>
<p>&#x9009;&#x62E9;&#x7F16;&#x8BD1;&#x4E00;&#x7EC4;&#x5305;</p>
</blockquote>
<p>The &#x2013;binary-from-file option specifies a text file that contains a name list of RPM packages to be built. The format in the text file is one package per line.</p>
<p>The &#x2013;binary-list option specifies a list in which the package names are separated by comma.</p>
<p>When the number of packages is small, thus the packages can be clearly presented in command line, it is recommended to use the &#x2013;binary-list option for simplicity.</p>
<pre><code>$ gbs build -A i586 --binary-from-file=/path/to/packages.list
$ gbs build -A i586 --binary-list=&lt;pkg1&gt;,&lt;pkg2&gt;
</code></pre><p>4 Exclude certain packages.</p>
<blockquote>
<p>&#x6392;&#x9664;&#x67D0;&#x4E9B;&#x5305;</p>
</blockquote>
<p>The &#x2013;exclude option specifies a list in which the names of packages to be ignored are separated by comma. The &#x2013;exclude-from-file option specifies a text file that contains a name list of packages to be ignored.</p>
<pre><code>$ gbs build -A i586 tizen-packages --exclude=&lt;pkg1&gt;
$ gbs build -A i586 tizen-packages --exclude=&lt;pkg1&gt;,&lt;pkg2&gt;
$ gbs build -A i586 tizen-packages --exclude-from-file=/path/to/packages.list
</code></pre><p>5 Build packages based on dependencies.</p>
<blockquote>
<p>&#x57FA;&#x4E8E;&#x4F9D;&#x8D56;&#x6765;&#x7F16;&#x8BD1;&#x5305;</p>
</blockquote>
<p>The &#x2013;deps option enables GBS to build specific packages, together with all the related packages on which they depend.The &#x2013;rdep option enables GBS to build specific packages, together with all the related packages that depend on them.</p>
<p>The specific packages can be included by the &#x2013;binary-from-file option or the &#x2013;binary-list option, and be excluded by the &#x2013;exclude option or the &#x2013;exclude-from-file option.</p>
<p>These two options are compatible. When added at the same time, besides the specific packages, GBS will build not only the related packages on which they depend, but also all the related packages that depend on them.</p>
<pre><code>$ gbs build -A i586 --binary-list=&lt;pkg1&gt;,&lt;pkg2&gt; --deps
$ gbs build -A i586 --binary-list=&lt;pkg1&gt;,&lt;pkg2&gt; --rdeps
$ gbs build -A i586 --binary-list=&lt;pkg1&gt;,&lt;pkg2&gt; --deps --rdeps
</code></pre><h2 id="Other-useful-options-&#x5176;&#x4ED6;&#x6709;&#x7528;&#x7684;&#x9009;&#x9879;"><a href="#Other-useful-options-&#x5176;&#x4ED6;&#x6709;&#x7528;&#x7684;&#x9009;&#x9879;" class="headerlink" title="Other useful options (&#x5176;&#x4ED6;&#x6709;&#x7528;&#x7684;&#x9009;&#x9879;)"></a>Other useful options (&#x5176;&#x4ED6;&#x6709;&#x7528;&#x7684;&#x9009;&#x9879;)</h2><h3 id="Install-extra-packages-to-build-root"><a href="#Install-extra-packages-to-build-root" class="headerlink" title="Install extra packages to build root"></a>Install extra packages to build root</h3><blockquote>
<p>&#x5B89;&#x88C5;&#x989D;&#x5916;&#x7684;&#x5305;&#x5230;build root&#x4E2D;</p>
</blockquote>
<p>&#x2013;extra-packs=<pkgs list="" sep="" by="" comma=""> can be used to install extra packages:</pkgs></p>
<pre><code>$ gbs build --extra-packs=vim,zypper,gcc,gdb ...
</code></pre><h3 id="Keep-all-packages-in-build-root"><a href="#Keep-all-packages-in-build-root" class="headerlink" title="Keep all packages in build root"></a>Keep all packages in build root</h3><blockquote>
<p>&#x4FDD;&#x7559;&#x6240;&#x6709;build root&#x4E2D;&#x7684;&#x5305;</p>
</blockquote>
<p>Generally, gbs build will remove unnecessary packages in build root. While transferring to build another package, you can use &#x2013;keep-packs to keep all unnecessary packages, and just install missing build required packages. This option can be used to speed up build multiple packages.</p>
<blockquote>
<p>&#x901A;&#x5E38;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;gbs build&#x4F1A;&#x628A;build root&#x4E2D;&#x7684;&#x4E0D;&#x9700;&#x8981;&#x7684;&#x5305;&#x5220;&#x9664;&#x6389;&#x3002;&#x5F53;&#x8981;&#x7F16;&#x8BD1;&#x53E6;&#x5916;&#x7684;&#x5305;&#x65F6;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x2013;keep-packs&#x9009;&#x9879;&#x6765;&#x4FDD;&#x7559;&#x4E0D;&#x518D;&#x9700;&#x8981;&#x7684;&#x5305;&#x800C;&#x53EA;&#x5B89;&#x88C5;&#x7F3A;&#x5931;&#x7684;&#x4F9D;&#x8D56;&#x5305;&#x3002;&#x8FD9;&#x4E2A;&#x9009;&#x9879;&#x53EF;&#x4EE5;&#x52A0;&#x901F;&#x591A;&#x4E2A;&#x5305;&#x7684;&#x7F16;&#x8BD1;&#x3002;</p>
<p><strong>&#x91CD;&#x8981;</strong>&#xFF1A;&#x91CD;&#x8981;&#x9009;&#x9879;&#xFF0C;&#x53EF;&#x4EE5;&#x8282;&#x7701;&#x7F16;&#x8BD1;&#x65F6;&#x95F4;</p>
</blockquote>
<pre><code>$ gbs build --keep-packs
</code></pre><p>&#x2013;keep-packs can be used to create one build root for building multiple packages. Once the build root is ready, you can use &#x2013;noinit to build these packages quickly.</p>
<blockquote>
<p>&#x2013;keep-packs&#x9009;&#x9879;&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x4E3A;&#x591A;&#x4E2A;&#x5305;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;build root&#x3002;&#x4E00;&#x65E6;build root&#x51C6;&#x5907;&#x597D;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x7528; &#x2013;noinit &#x9009;&#x9879;&#x6765;&#x5FEB;&#x901F;&#x7684;&#x7F16;&#x8BD1;&#x8FD9;&#x4E9B;&#x5305;</p>
<p><strong>&#x91CD;&#x8981;</strong>&#xFF1A;&#x2013;keep-packs &#x914D;&#x5408; &#x2013;noinit&#xFF0C;&#x53EF;&#x4EE5;&#x8282;&#x7701;&#x7F16;&#x8BD1;&#x65F6;&#x95F4;</p>
</blockquote>
<pre><code>$ gbs build pkg1/ --keep-packs -A i586
$ gbs build pkg2/ --keep-packs -A i586
$ gbs build pkg3/ --keep-packs -A i586
</code></pre><p>Now, the build root (~/GBS-ROOT/local/scratch.i586.0) is ready for building pkg1, pkg2, and pkg3. You can use &#x2013;noinit to build them offline, and don&#x2019;t need waste time to check repo updates and build root.</p>
<pre><code>$ gbs build pkg1 --noinit
$ gbs build pkg2 --noinit
$ gbs build pkg3 --noinit
</code></pre><h2 id="Fetch-the-project-build-conf-and-customize-build-root-for-Advanced-Users-&#xFF08;&#x9AD8;&#x7EA7;&#x7528;&#x6237;&#xFF0C;&#x83B7;&#x53D6;&#x9879;&#x76EE;&#x7684;&#x7F16;&#x8BD1;&#x914D;&#x7F6E;&#x548C;&#x5B9A;&#x5236;build-root&#xFF09;"><a href="#Fetch-the-project-build-conf-and-customize-build-root-for-Advanced-Users-&#xFF08;&#x9AD8;&#x7EA7;&#x7528;&#x6237;&#xFF0C;&#x83B7;&#x53D6;&#x9879;&#x76EE;&#x7684;&#x7F16;&#x8BD1;&#x914D;&#x7F6E;&#x548C;&#x5B9A;&#x5236;build-root&#xFF09;" class="headerlink" title="Fetch the project build conf and customize build root (for Advanced Users) &#xFF08;&#x9AD8;&#x7EA7;&#x7528;&#x6237;&#xFF0C;&#x83B7;&#x53D6;&#x9879;&#x76EE;&#x7684;&#x7F16;&#x8BD1;&#x914D;&#x7F6E;&#x548C;&#x5B9A;&#x5236;build root&#xFF09;"></a>Fetch the project build conf and customize build root (for Advanced Users) &#xFF08;&#x9AD8;&#x7EA7;&#x7528;&#x6237;&#xFF0C;&#x83B7;&#x53D6;&#x9879;&#x76EE;&#x7684;&#x7F16;&#x8BD1;&#x914D;&#x7F6E;&#x548C;&#x5B9A;&#x5236;build root&#xFF09;</h2><p>Project build conf describes the project build configurations for the project, including pre-defined macros/packages/flags in the build environment. In Tizen releases, the build conf is released together with the released repo. You can find an example at: <a href="http://download.tizen.org/releases/daily/trunk/ivi/latest/builddata/xxx-build.conf" target="_blank" rel="external">http://download.tizen.org/releases/daily/trunk/ivi/latest/builddata/xxx-build.conf</a></p>
<pre><code>gbs build will fetch the build conf automatically
</code></pre><p>Starting from gbs 0.7.1, by default, gbs will fetch the build conf from a remote repo, if you specify the remote Tizen repo, and then store it in your temp environment. Here&#x2019;s the build log:</p>
<pre><code>$ gbs build -A i586
info: generate repositories ...
info: build conf has been downloaded at:
/var/tmp/&lt;user&gt;-gbs/tizen2.0.conf
info: generate tar ball: packaging/acpid-2.0.14.tar.bz2
[sudo] password for &lt;user&gt;:

build the package using your own project build conf, using the -D option
</code></pre><p>You can save it and modify it, and then use it for your purposes:</p>
<pre><code>cp /var/tmp/&lt;user&gt;-gbs/tizen2.0.conf ~/tizen2.0.conf
$ gbs build -A i586 -D ~/tizen2.0.conf
</code></pre><p>If you need to customize the build config, refer to: <a href="http://en.opensuse.org/openSUSE:Build_Service_prjconf" target="_blank" rel="external">http://en.opensuse.org/openSUSE:Build_Service_prjconf</a></p>
<p><em>Reference: <a href="https://source.tizen.org/documentation/reference/git-build-system/usage/gbs-build" target="_blank" rel="external">https://source.tizen.org/documentation/reference/git-build-system/usage/gbs-build</a></em></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/03/13/setup-proxy-for-node-gyp/" itemprop="url">
                  node-gyp 设置 Proxy
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-03-13T20:24:54+08:00" content="2016-03-13">
              2016-03-13
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="node-gyp-&#x8BBE;&#x7F6E;-Proxy"><a href="#node-gyp-&#x8BBE;&#x7F6E;-Proxy" class="headerlink" title="node-gyp &#x8BBE;&#x7F6E; Proxy"></a>node-gyp &#x8BBE;&#x7F6E; Proxy</h1><p>node-gyp &#x63D0;&#x4F9B; 4 &#x79CD;&#x65B9;&#x5F0F;&#x901A;&#x8FC7;Proxy&#x8FDE;&#x63A5;</p>
<p>1) &#x4F7F;&#x7528;&#x547D;&#x4EE4;&#x884C;&#x53C2;&#x6570; <code>&#x2013;proxy=http://proxy_address:proxy_port</code></p>
<p>2) &#x4F7F;&#x7528;&#x73AF;&#x5883;&#x53D8;&#x91CF; <code>http_proxy</code></p>
<p>3) &#x4F7F;&#x7528;&#x73AF;&#x5883;&#x53D8;&#x91CF; <code>HTTP_PROXY</code></p>
<p>4) &#x4F7F;&#x7528;&#x73AF;&#x5883;&#x53D8;&#x91CF; <code>npm_config_proxy</code></p>
<blockquote>
<p><strong>&#x6CE8;&#x610F;</strong>&#xFF1A;Proxy&#x7684; <strong>http://</strong> &#x4E0D;&#x80FD;&#x7701;&#x7565;</p>
</blockquote>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/03/13/how-to-download-chrome-installation-package/" itemprop="url">
                  如何下载离线版Windows Chrome安装文件
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-03-13T19:36:54+08:00" content="2016-03-13">
              2016-03-13
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="&#x5982;&#x4F55;&#x4E0B;&#x8F7D;&#x79BB;&#x7EBF;&#x7248;Windows-Chrome&#x5B89;&#x88C5;&#x6587;&#x4EF6;"><a href="#&#x5982;&#x4F55;&#x4E0B;&#x8F7D;&#x79BB;&#x7EBF;&#x7248;Windows-Chrome&#x5B89;&#x88C5;&#x6587;&#x4EF6;" class="headerlink" title="&#x5982;&#x4F55;&#x4E0B;&#x8F7D;&#x79BB;&#x7EBF;&#x7248;Windows Chrome&#x5B89;&#x88C5;&#x6587;&#x4EF6;"></a>&#x5982;&#x4F55;&#x4E0B;&#x8F7D;&#x79BB;&#x7EBF;&#x7248;Windows Chrome&#x5B89;&#x88C5;&#x6587;&#x4EF6;</h1><p><strong>&#x65B9;&#x6CD5;&#x5982;&#x4E0B;&#xFF1A;</strong></p>
<p>&#x5BF9;&#x4E8E;Stable Chrome&#x6765;&#x8BF4;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x5728;Chrome&#x7684;&#x201C;&#x6700;&#x7EC8;&#x7528;&#x6237;&#x8BB8;&#x53EF;&#x534F;&#x8BAE;&#x201D;&#x9875;&#x9762;&#x94FE;&#x63A5;&#x540E;&#x9762;&#x6DFB;&#x52A0;<strong>&#x201D;?standalone=1&#x2033;</strong>&#x5373;&#x53EF;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#xFF1A;</p>
<p><a href="http://www.google.com/chrome/eula.html?standalone=1" target="_blank" rel="external">http://www.google.com/chrome/eula.html?standalone=1</a></p>
<p>&#x5BF9;&#x4E8E;&#x7279;&#x5B9A;&#x7248;&#x672C;&#x7684;Chrome&#x6765;&#x8BF4;&#xFF0C;&#x6309;&#x4EE5;&#x4E0B;&#x5730;&#x5740;&#xFF1A;</p>
<p><a href="http://dl.google.com/chrome/install/{version" target="_blank" rel="external">http://dl.google.com/chrome/install/{version</a> number}/chrome_installer.exe</p>
<p>&#x5176;&#x4E2D;&#x7684; <strong>version number</strong> &#x4EE3;&#x8868;&#x4F60;&#x8981;&#x4E0B;&#x8F7D;&#x7684;Chrome&#x7248;&#x672C;&#x53F7;&#x7684;&#x540E;&#x9762;&#x4E24;&#x4E2A;&#x6570;&#x5B57;&#xFF0C;&#x6BD4;&#x5982;4.0.223.11&#x7684;&#x79BB;&#x7EBF;&#x5305;&#x4E0B;&#x8F7D;&#x5730;&#x5740;&#x5C31;&#x662F;</p>
<p><a href="http://dl.google.com/chrome/install/223.11/chrome_installer.exe" target="_blank" rel="external">http://dl.google.com/chrome/install/223.11/chrome_installer.exe</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/03/13/design-pattern/" itemprop="url">
                  设计模式
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-03-13T19:33:39+08:00" content="2016-03-13">
              2016-03-13
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>March 13, 2016 / Jason Wang</p>
<h1 id="Design-Pattern"><a href="#Design-Pattern" class="headerlink" title="Design Pattern"></a>Design Pattern</h1><p>&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#xFF08;Design pattern&#xFF09;&#x662F;&#x4E00;&#x5957;&#x88AB;&#x53CD;&#x590D;&#x4F7F;&#x7528;&#x3001;&#x591A;&#x6570;&#x4EBA;&#x77E5;&#x6653;&#x7684;&#x3001;&#x7ECF;&#x8FC7;&#x5206;&#x7C7B;&#x7F16;&#x76EE;&#x7684;&#x3001;&#x4EE3;&#x7801;&#x8BBE;&#x8BA1;&#x7ECF;&#x9A8C;&#x7684;&#x603B;&#x7ED3;&#x3002;&#x4F7F;&#x7528;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x662F;&#x4E3A;&#x4E86;&#x53EF;&#x91CD;&#x7528;&#x4EE3;&#x7801;&#x3001;&#x8BA9;&#x4EE3;&#x7801;&#x66F4;&#x5BB9;&#x6613;&#x88AB;&#x4ED6;&#x4EBA;&#x7406;&#x89E3;&#x3001;&#x4FDD;&#x8BC1;&#x4EE3;&#x7801;&#x53EF;&#x9760;&#x6027;&#x3002; &#x6BEB;&#x65E0;&#x7591;&#x95EE;&#xFF0C;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x4E8E;&#x5DF1;&#x4E8E;&#x4ED6;&#x4EBA;&#x4E8E;&#x7CFB;&#x7EDF;&#x90FD;&#x662F;&#x591A;&#x8D62;&#x7684;&#xFF1B;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x4F7F;&#x4EE3;&#x7801;&#x7F16;&#x5236;&#x771F;&#x6B63;&#x5DE5;&#x7A0B;&#x5316;&#xFF1B;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x662F;&#x8F6F;&#x4EF6;&#x5DE5;&#x7A0B;&#x7684;&#x57FA;&#x77F3;&#x8109;&#x7EDC;&#xFF0C;&#x5982;&#x540C;&#x5927;&#x53A6;&#x7684;&#x7ED3;&#x6784;&#x4E00;&#x6837;&#x3002;</p>
<h2 id="&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;4&#x8981;&#x7D20;"><a href="#&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;4&#x8981;&#x7D20;" class="headerlink" title="&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;4&#x8981;&#x7D20;"></a>&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;4&#x8981;&#x7D20;</h2><p><strong>1. &#x6A21;&#x5F0F;&#x540D;&#x79F0; (pattern name)</strong>
&#x7528;&#x4E00;&#x4E24;&#x4E2A;&#x8BCD;&#x6765;&#x63CF;&#x8FF0;&#x6A21;&#x5F0F;&#x7684;&#x95EE;&#x9898;&#x3001;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x548C;&#x6548;&#x679C;&#x3002;</p>
<p><strong>2. &#x95EE;&#x9898;(problem)</strong>
&#x63CF;&#x8FF0;&#x4E86;&#x5E94;&#x5F53;&#x5728;&#x4F55;&#x65F6;&#x4F7F;&#x7528;&#x6A21;&#x5F0F;</p>
<p><strong>3. &#x89E3;&#x51B3;&#x65B9;&#x6848;(solution)</strong>
&#x63CF;&#x8FF0;&#x4E86;&#x8BBE;&#x8BA1;&#x7684;&#x7EC4;&#x6210;&#x90E8;&#x5206;</p>
<p><strong>4. &#x6548;&#x679C;(consequences)</strong>
&#x63CF;&#x8FF0;&#x4E86;&#x5E94;&#x7528;&#x6A21;&#x5F0F;&#x7684;&#x6548;&#x679C;&#x548C;&#x4F7F;&#x7528;&#x6A21;&#x5F0F;&#x5E94;&#x6743;&#x8861;&#x7684;&#x95EE;&#x9898;</p>
<h2 id="&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x7C7B;&#x578B;"><a href="#&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x7C7B;&#x578B;" class="headerlink" title="&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x7C7B;&#x578B;"></a>&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x7C7B;&#x578B;</h2><p>&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x5206;&#x4E3A;&#x4E09;&#x79CD;&#x7C7B;&#x578B;&#xFF0C;&#x5171;23&#x79CD;&#x3002;</p>
<table>
<thead>
<tr>
<th>&#x521B;&#x5EFA;&#x578B;</th>
<th>&#x7ED3;&#x6784;&#x578B;</th>
<th>&#x884C;&#x4E3A;&#x578B;</th>
</tr>
</thead>
<tbody>
<tr>
<td>Factory Method</td>
<td>Bridge</td>
<td>Template Method</td>
</tr>
<tr>
<td>Abstract Factory</td>
<td>Adapter</td>
<td>Strategy</td>
</tr>
<tr>
<td>Singleton</td>
<td>Decorator</td>
<td>Observer</td>
</tr>
<tr>
<td>Builder</td>
<td>Composite</td>
<td>Memento</td>
</tr>
<tr>
<td>Prototype</td>
<td>Flyweight</td>
<td>Mediator</td>
</tr>
<tr>
<td></td>
<td>Facade</td>
<td>Command</td>
</tr>
<tr>
<td></td>
<td>Proxy</td>
<td>Visitor</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Chain of Responsibilty</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Iterator</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Interpreter</td>
</tr>
</tbody>
</table>
<p><strong>&#x521B;&#x5EFA;&#x578B;&#x6A21;&#x5F0F;&#x4E0E;&#x5BF9;&#x8C61;&#x7684;&#x521B;&#x5EFA;&#x6709;&#x5173;&#xFF1B;&#x7ED3;&#x6784;&#x578B;&#x6A21;&#x5F0F;&#x5904;&#x7406;&#x7C7B;&#x6216;&#x5BF9;&#x8C61;&#x7684;&#x7EC4;&#x5408;&#xFF1B;&#x884C;&#x4E3A;&#x578B;&#x6A21;&#x5F0F;&#x5BF9;&#x7C7B;&#x6216;&#x5BF9;&#x8C61;&#x600E;&#x6837;&#x4EA4;&#x4E92;&#x548C;&#x600E;&#x6837;&#x5206;&#x914D;&#x804C;&#x8D23;&#x8FDB;&#x884C;&#x63CF;&#x8FF0;</strong></p>
<h1 id="&#x521B;&#x5EFA;&#x578B;&#x6A21;&#x5F0F;"><a href="#&#x521B;&#x5EFA;&#x578B;&#x6A21;&#x5F0F;" class="headerlink" title="&#x521B;&#x5EFA;&#x578B;&#x6A21;&#x5F0F;"></a>&#x521B;&#x5EFA;&#x578B;&#x6A21;&#x5F0F;</h1><table>
<thead>
<tr>
<th>Pattern</th>
<th>Descriptions</th>
</tr>
</thead>
<tbody>
<tr>
<td>Factory Method(&#x5DE5;&#x5382;&#x6A21;&#x5F0F;)</td>
<td>&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x7528;&#x4E8E;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x8BA9;&#x5B50;&#x7C7B;&#x51B3;&#x5B9A;&#x5C06;&#x54EA;&#x4E00;&#x4E2A;&#x7C7B;&#x5B9E;&#x4F8B;&#x5316;&#x3002;Factory Method&#x4F7F;&#x4E00;&#x4E2A;&#x7C7B;&#x7684;&#x5B9E;&#x4F8B;&#x5316;&#x5EF6;&#x8FDF;&#x5230;&#x5176;&#x5B50;&#x7C7B;&#x3002;</td>
</tr>
<tr>
<td>Abstract Factory(&#x62BD;&#x8C61;&#x5DE5;&#x5382;&#x6A21;&#x5F0F;)</td>
<td>&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;&#x521B;&#x5EFA;&#x4E00;&#x7CFB;&#x5217;&#x76F8;&#x5173;&#x6216;&#x76F8;&#x4E92;&#x4F9D;&#x8D56;&#x5BF9;&#x8C61;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x800C;&#x65E0;&#x9700;&#x6307;&#x5B9A;&#x5B83;&#x4EEC;&#x5177;&#x4F53;&#x7684;&#x7C7B;&#x3002;</td>
</tr>
<tr>
<td>Singleton(&#x5355;&#x4F8B;&#x6A21;&#x5F0F;)</td>
<td>&#x4FDD;&#x8BC1;&#x4E00;&#x4E2A;&#x7C7B;&#x4EC5;&#x6709;&#x4E00;&#x4E2A;&#x5B9E;&#x4F8B;&#xFF0C;&#x5E76;&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;&#x8BBF;&#x95EE;&#x5B83;&#x7684;&#x5168;&#x5C40;&#x8BBF;&#x95EE;&#x70B9;&#x3002;</td>
</tr>
<tr>
<td>Builder(&#x5EFA;&#x9020;&#x8005;&#x6A21;&#x5F0F;)</td>
<td>&#x5C06;&#x4E00;&#x4E2A;&#x590D;&#x6742;&#x5BF9;&#x8C61;&#x7684;&#x6784;&#x5EFA;&#x4E0E;&#x5B83;&#x7684;&#x8868;&#x793A;&#x5206;&#x79BB;&#xFF0C;&#x4F7F;&#x5F97;&#x540C;&#x6837;&#x7684;&#x6784;&#x5EFA;&#x8FC7;&#x7A0B;&#x53EF;&#x4EE5;&#x521B;&#x5EFA;&#x4E0D;&#x540C;&#x7684;&#x8868;&#x793A;&#x3002;</td>
</tr>
<tr>
<td>Prototype(&#x539F;&#x578B;&#x6A21;&#x5F0F;)</td>
<td>&#x7528;&#x539F;&#x578B;&#x5B9E;&#x4F8B;&#x6307;&#x5B9A;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#x7684;&#x79CD;&#x7C7B;&#xFF0C;&#x5E76;&#x4E14;&#x901A;&#x8FC7;&#x62F7;&#x8D1D;&#x8FD9;&#x4E2A;&#x539F;&#x578B;&#x6765;&#x521B;&#x5EFA;&#x65B0;&#x7684;&#x5BF9;&#x8C61;&#x3002;</td>
</tr>
</tbody>
</table>
<h1 id="&#x7ED3;&#x6784;&#x578B;&#x6A21;&#x5F0F;"><a href="#&#x7ED3;&#x6784;&#x578B;&#x6A21;&#x5F0F;" class="headerlink" title="&#x7ED3;&#x6784;&#x578B;&#x6A21;&#x5F0F;"></a>&#x7ED3;&#x6784;&#x578B;&#x6A21;&#x5F0F;</h1><table>
<thead>
<tr>
<th>Pattern</th>
<th>Descriptions</th>
</tr>
</thead>
<tbody>
<tr>
<td>Bridge(&#x6865;&#x63A5;&#x6A21;&#x5F0F;)</td>
<td>&#x5C06;&#x62BD;&#x8C61;&#x90E8;&#x5206;&#x4E0E;&#x5B83;&#x7684;&#x5B9E;&#x73B0;&#x90E8;&#x5206;&#x5206;&#x79BB;&#xFF0C;&#x4F7F;&#x5B83;&#x4EEC;&#x90FD;&#x53EF;&#x4EE5;&#x72EC;&#x7ACB;&#x5730;&#x53D8;&#x5316;&#x3002;</td>
</tr>
<tr>
<td>Adapter(&#x9002;&#x914D;&#x5668;&#x6A21;&#x5F0F;)</td>
<td>&#x5C06;&#x4E00;&#x4E2A;&#x7C7B;&#x7684;&#x63A5;&#x53E3;&#x8F6C;&#x6362;&#x6210;&#x5BA2;&#x6237;&#x5E0C;&#x671B;&#x7684;&#x53E6;&#x5916;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#x3002;Adapter&#x6A21;&#x5F0F;&#x4F7F;&#x5F97;&#x539F;&#x672C;&#x7531;&#x4E8E;&#x63A5;&#x53E3;&#x4E0D;&#x517C;&#x5BB9;&#x800C;&#x4E0D;&#x80FD;&#x4E00;&#x8D77;&#x5DE5;&#x4F5C;&#x7684;&#x90A3;&#x4E9B;&#x7C7B;&#x53EF;&#x4EE5;&#x4E00;&#x8D77;&#x5DE5;&#x4F5C;&#x3002;</td>
</tr>
<tr>
<td>Decorator(&#x88C5;&#x9970;&#x5668;&#x6A21;&#x5F0F;)</td>
<td>&#x52A8;&#x6001;&#x5730;&#x7ED9;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x6DFB;&#x52A0;&#x4E00;&#x4E9B;&#x989D;&#x5916;&#x7684;&#x804C;&#x8D23;&#x3002;&#x5C31;&#x6269;&#x5C55;&#x529F;&#x80FD;&#x800C;&#x8A00;&#xFF0C; &#x5B83;&#x6BD4;&#x751F;&#x6210;&#x5B50;&#x7C7B;&#x65B9;&#x5F0F;&#x66F4;&#x4E3A;&#x7075;&#x6D3B;&#x3002;</td>
</tr>
<tr>
<td>Composite(&#x7EC4;&#x5408;&#x6A21;&#x5F0F;)</td>
<td>&#x5C06;&#x5BF9;&#x8C61;&#x7EC4;&#x5408;&#x6210;&#x6811;&#x5F62;&#x7ED3;&#x6784;&#x4EE5;&#x8868;&#x793A;&#x201C;&#x90E8;&#x5206;-&#x6574;&#x4F53;&#x201D;&#x7684;&#x5C42;&#x6B21;&#x7ED3;&#x6784;&#x3002;&#x5B83;&#x4F7F;&#x5F97;&#x5BA2;&#x6237;&#x5BF9;&#x5355;&#x4E2A;&#x5BF9;&#x8C61;&#x548C;&#x590D;&#x5408;&#x5BF9;&#x8C61;&#x7684;&#x4F7F;&#x7528;&#x5177;&#x6709;&#x4E00;&#x81F4;&#x6027;&#x3002;</td>
</tr>
<tr>
<td>Flyweight(&#x4EAB;&#x5143;&#x6A21;&#x5F0F;)</td>
<td>&#x8FD0;&#x7528;&#x5171;&#x4EAB;&#x6280;&#x672F;&#x6709;&#x6548;&#x5730;&#x652F;&#x6301;&#x5927;&#x91CF;&#x7EC6;&#x7C92;&#x5EA6;&#x7684;&#x5BF9;&#x8C61;&#x3002;</td>
</tr>
<tr>
<td>Facade(&#x5916;&#x89C2;&#x6A21;&#x5F0F;)</td>
<td>&#x4E3A;&#x5B50;&#x7CFB;&#x7EDF;&#x4E2D;&#x7684;&#x4E00;&#x7EC4;&#x63A5;&#x53E3;&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;&#x4E00;&#x81F4;&#x7684;&#x754C;&#x9762;&#xFF0C;Facade&#x6A21;&#x5F0F;&#x5B9A;&#x4E49;&#x4E86;&#x4E00;&#x4E2A;&#x9AD8;&#x5C42;&#x63A5;&#x53E3;&#xFF0C;&#x8FD9;&#x4E2A;&#x63A5;&#x53E3;&#x4F7F;&#x5F97;&#x8FD9;&#x4E00;&#x5B50;&#x7CFB;&#x7EDF;&#x66F4;&#x52A0;&#x5BB9;&#x6613;&#x4F7F;&#x7528;&#x3002;</td>
</tr>
<tr>
<td>Proxy(&#x4EE3;&#x7406;&#x6A21;&#x5F0F;)</td>
<td>&#x4E3A;&#x5176;&#x4ED6;&#x5BF9;&#x8C61;&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;&#x4EE3;&#x7406;&#x4EE5;&#x63A7;&#x5236;&#x5BF9;&#x8FD9;&#x4E2A;&#x5BF9;&#x8C61;&#x7684;&#x8BBF;&#x95EE;&#x3002;</td>
</tr>
</tbody>
</table>
<h1 id="&#x884C;&#x4E3A;&#x578B;&#x6A21;&#x5F0F;"><a href="#&#x884C;&#x4E3A;&#x578B;&#x6A21;&#x5F0F;" class="headerlink" title="&#x884C;&#x4E3A;&#x578B;&#x6A21;&#x5F0F;"></a>&#x884C;&#x4E3A;&#x578B;&#x6A21;&#x5F0F;</h1><table>
<thead>
<tr>
<th>Pattern</th>
<th>Descriptions</th>
</tr>
</thead>
<tbody>
<tr>
<td>Template Method(&#x6A21;&#x677F;&#x65B9;&#x6CD5;&#x6A21;&#x5F0F;)</td>
<td>&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x64CD;&#x4F5C;&#x4E2D;&#x7684;&#x7B97;&#x6CD5;&#x7684;&#x9AA8;&#x67B6;&#xFF0C;&#x800C;&#x5C06;&#x4E00;&#x4E9B;&#x6B65;&#x9AA4;&#x5EF6;&#x8FDF;&#x5230;&#x5B50;&#x7C7B;&#x4E2D;&#x3002;Template Method&#x4F7F;&#x5F97;&#x5B50;&#x7C7B;&#x53EF;&#x4EE5;&#x4E0D;&#x6539;&#x53D8;&#x4E00;&#x4E2A;&#x7B97;&#x6CD5;&#x7684;&#x7ED3;&#x6784;&#x5373;&#x53EF;&#x91CD;&#x5B9A;&#x4E49;&#x8BE5;&#x7B97;&#x6CD5;&#x7684;&#x67D0;&#x4E9B;&#x7279;&#x5B9A;&#x6B65;&#x9AA4;&#x3002;</td>
</tr>
<tr>
<td>Strategy(&#x7B56;&#x7565;&#x6A21;&#x5F0F;)</td>
<td>&#x5B9A;&#x4E49;&#x4E00;&#x7CFB;&#x5217;&#x7684;&#x7B97;&#x6CD5;,&#x628A;&#x5B83;&#x4EEC;&#x4E00;&#x4E2A;&#x4E2A;&#x5C01;&#x88C5;&#x8D77;&#x6765;, &#x5E76;&#x4E14;&#x4F7F;&#x5B83;&#x4EEC;&#x53EF;&#x76F8;&#x4E92;&#x66FF;&#x6362;&#x3002;&#x672C;&#x6A21;&#x5F0F;&#x4F7F;&#x5F97;&#x7B97;&#x6CD5;&#x7684;&#x53D8;&#x5316;&#x53EF;&#x72EC;&#x7ACB;&#x4E8E;&#x4F7F;&#x7528;&#x5B83;&#x7684;&#x5BA2;&#x6237;&#x3002;</td>
</tr>
<tr>
<td>Observer(&#x89C2;&#x5BDF;&#x8005;&#x6A21;&#x5F0F;)</td>
<td>&#x5B9A;&#x4E49;&#x5BF9;&#x8C61;&#x95F4;&#x7684;&#x4E00;&#x79CD;&#x4E00;&#x5BF9;&#x591A;&#x7684;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;,&#x4EE5;&#x4FBF;&#x5F53;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x7684;&#x72B6;&#x6001;&#x53D1;&#x751F;&#x6539;&#x53D8;&#x65F6;,&#x6240;&#x6709;&#x4F9D;&#x8D56;&#x4E8E;&#x5B83;&#x7684;&#x5BF9;&#x8C61;&#x90FD;&#x5F97;&#x5230;&#x901A;&#x77E5;&#x5E76;&#x81EA;&#x52A8;&#x5237;&#x65B0;&#x3002;</td>
</tr>
<tr>
<td>Memento(&#x5907;&#x5FD8;&#x5F55;&#x6A21;&#x5F0F;)</td>
<td>&#x5728;&#x4E0D;&#x7834;&#x574F;&#x5C01;&#x88C5;&#x6027;&#x7684;&#x524D;&#x63D0;&#x4E0B;&#xFF0C;&#x6355;&#x83B7;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x7684;&#x5185;&#x90E8;&#x72B6;&#x6001;&#xFF0C;&#x5E76;&#x5728;&#x8BE5;&#x5BF9;&#x8C61;&#x4E4B;&#x5916;&#x4FDD;&#x5B58;&#x8FD9;&#x4E2A;&#x72B6;&#x6001;&#x3002;&#x8FD9;&#x6837;&#x4EE5;&#x540E;&#x5C31;&#x53EF;&#x5C06;&#x8BE5;&#x5BF9;&#x8C61;&#x6062;&#x590D;&#x5230;&#x4FDD;&#x5B58;&#x7684;&#x72B6;&#x6001;&#x3002;</td>
</tr>
<tr>
<td>Mediator(&#x4E2D;&#x4ECB;&#x6A21;&#x5F0F;)</td>
<td>&#x7528;&#x4E00;&#x4E2A;&#x4E2D;&#x4ECB;&#x5BF9;&#x8C61;&#x6765;&#x5C01;&#x88C5;&#x4E00;&#x7CFB;&#x5217;&#x7684;&#x5BF9;&#x8C61;&#x4EA4;&#x4E92;&#x3002;&#x4E2D;&#x4ECB;&#x8005;&#x4F7F;&#x5404;&#x5BF9;&#x8C61;&#x4E0D;&#x9700;&#x8981;&#x663E;&#x5F0F;&#x5730;&#x76F8;&#x4E92;&#x5F15;&#x7528;&#xFF0C;&#x4ECE;&#x800C;&#x4F7F;&#x5176;&#x8026;&#x5408;&#x677E;&#x6563;&#xFF0C;&#x800C;&#x4E14;&#x53EF;&#x4EE5;&#x72EC;&#x7ACB;&#x5730;&#x6539;&#x53D8;&#x5B83;&#x4EEC;&#x4E4B;&#x95F4;&#x7684;&#x4EA4;&#x4E92;&#x3002;</td>
</tr>
<tr>
<td>Command(&#x547D;&#x4EE4;&#x6A21;&#x5F0F;)</td>
<td>&#x5C06;&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#x5C01;&#x88C5;&#x4E3A;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#xFF0C;&#x4ECE;&#x800C;&#x4F7F;&#x4F60;&#x53EF;&#x7528;&#x4E0D;&#x540C;&#x7684;&#x8BF7;&#x6C42;&#x5BF9;&#x5BA2;&#x6237;&#x8FDB;&#x884C;&#x53C2;&#x6570;&#x5316;&#xFF1B;&#x5BF9;&#x8BF7;&#x6C42;&#x6392;&#x961F;&#x6216;&#x8BB0;&#x5F55;&#x8BF7;&#x6C42;&#x65E5;&#x5FD7;&#xFF0C;&#x4EE5;&#x53CA;&#x652F;&#x6301;&#x53EF;&#x53D6;&#x6D88;&#x7684;&#x64CD;&#x4F5C;&#x3002;</td>
</tr>
<tr>
<td>Visitor(&#x8BBF;&#x95EE;&#x8005;&#x6A21;&#x5F0F;)</td>
<td>&#x8868;&#x793A;&#x4E00;&#x4E2A;&#x4F5C;&#x7528;&#x4E8E;&#x67D0;&#x5BF9;&#x8C61;&#x7ED3;&#x6784;&#x4E2D;&#x7684;&#x5404;&#x5143;&#x7D20;&#x7684;&#x64CD;&#x4F5C;&#x3002;&#x5B83;&#x4F7F;&#x4F60;&#x53EF;&#x4EE5;&#x5728;&#x4E0D;&#x6539;&#x53D8;&#x5404;&#x5143;&#x7D20;&#x7684;&#x7C7B;&#x7684;&#x524D;&#x63D0;&#x4E0B;&#x5B9A;&#x4E49;&#x4F5C;&#x7528;&#x4E8E;&#x8FD9;&#x4E9B;&#x5143;&#x7D20;&#x7684;&#x65B0;&#x64CD;&#x4F5C;&#x3002;</td>
</tr>
<tr>
<td>Chain of Responsibilty(&#x804C;&#x8D23;&#x94FE;&#x6A21;&#x5F0F;)</td>
<td>&#x4E3A;&#x89E3;&#x9664;&#x8BF7;&#x6C42;&#x7684;&#x53D1;&#x9001;&#x8005;&#x548C;&#x63A5;&#x6536;&#x8005;&#x4E4B;&#x95F4;&#x8026;&#x5408;&#xFF0C;&#x800C;&#x4F7F;&#x591A;&#x4E2A;&#x5BF9;&#x8C61;&#x90FD;&#x6709;&#x673A;&#x4F1A;&#x5904;&#x7406;&#x8FD9;&#x4E2A;&#x8BF7;&#x6C42;&#x3002;&#x5C06;&#x8FD9;&#x4E9B;&#x5BF9;&#x8C61;&#x8FDE;&#x6210;&#x4E00;&#x6761;&#x94FE;&#xFF0C;&#x5E76;&#x6CBF;&#x7740;&#x8FD9;&#x6761;&#x94FE;&#x4F20;&#x9012;&#x8BE5;&#x8BF7;&#x6C42;&#xFF0C;&#x76F4;&#x5230;&#x6709;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x5904;&#x7406;&#x5B83;&#x3002;</td>
</tr>
<tr>
<td>Iterator(&#x8FED;&#x4EE3;&#x5668;&#x6A21;&#x5F0F;)</td>
<td>&#x63D0;&#x4F9B;&#x4E00;&#x79CD;&#x65B9;&#x6CD5;&#x987A;&#x5E8F;&#x8BBF;&#x95EE;&#x4E00;&#x4E2A;&#x805A;&#x5408;&#x5BF9;&#x8C61;&#x4E2D;&#x5404;&#x4E2A;&#x5143;&#x7D20;&#xFF0C;&#x800C;&#x53C8;&#x4E0D;&#x9700;&#x66B4;&#x9732;&#x8BE5;&#x5BF9;&#x8C61;&#x7684;&#x5185;&#x90E8;&#x8868;&#x793A;&#x3002;</td>
</tr>
<tr>
<td>Interpreter(&#x89E3;&#x6790;&#x5668;&#x6A21;&#x5F0F;)</td>
<td>&#x7ED9;&#x5B9A;&#x4E00;&#x4E2A;&#x8BED;&#x8A00;, &#x5B9A;&#x4E49;&#x5B83;&#x7684;&#x6587;&#x6CD5;&#x7684;&#x4E00;&#x79CD;&#x8868;&#x793A;&#xFF0C;&#x5E76;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x89E3;&#x91CA;&#x5668;, &#x8BE5;&#x89E3;&#x91CA;&#x5668;&#x4F7F;&#x7528;&#x8BE5;&#x8868;&#x793A;&#x6765;&#x89E3;&#x91CA;&#x8BED;&#x8A00;&#x4E2D;&#x7684;&#x53E5;&#x5B50;&#x3002;</td>
</tr>
</tbody>
</table>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/03/12/configure-PPTP-VPN-in-Ubuntu/" itemprop="url">
                  Ubuntu下配置PPTP VPN
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-03-12T15:22:29+08:00" content="2016-03-12">
              2016-03-12
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Configure-PPTP-VPN-in-Ubuntu"><a href="#Configure-PPTP-VPN-in-Ubuntu" class="headerlink" title="Configure PPTP VPN in Ubuntu"></a>Configure PPTP VPN in Ubuntu</h1><h2 id="&#x5B89;&#x88C5;pptpd"><a href="#&#x5B89;&#x88C5;pptpd" class="headerlink" title="&#x5B89;&#x88C5;pptpd"></a>&#x5B89;&#x88C5;pptpd</h2><pre><code>$ sudo apt-get install pptpd
</code></pre><h2 id="&#x914D;&#x7F6E;"><a href="#&#x914D;&#x7F6E;" class="headerlink" title="&#x914D;&#x7F6E;"></a>&#x914D;&#x7F6E;</h2><p><strong>&#x7F16;&#x8F91;pptpd.conf</strong></p>
<pre><code>$ sudo vi /etc/pptpd.conf
</code></pre><p>&#x4FEE;&#x6539;&#x5982;&#x4E0B;&#x4E24;&#x884C;&#xFF1A;</p>
<pre><code>localip xxx.xxx.xxx.xxx
remoteip 192.168.1.100-200
</code></pre><blockquote>
<p>localip: Ubuntu&#x4E3B;&#x673A;&#x7684;IP</p>
<p>remoteip: &#x5206;&#x914D;&#x7ED9;Client&#x7684;IP&#x6BB5;</p>
</blockquote>
<p><strong>&#x8BBE;&#x7F6E;Windows Client&#x7684;DNS</strong></p>
<pre><code>$ sudo vi /etc/ppp/pptpd-options
</code></pre><p>&#x4FEE;&#x6539;<code>ms-dns</code>&#xFF0C;&#x4FEE;&#x6539;&#x4E3A;google&#x7684;dns&#xFF1A;</p>
<pre><code>ms-dns 8.8.8.8
ms-dns 8.8.4.4
</code></pre><p><strong>&#x8BBE;&#x7F6E;&#x8D26;&#x53F7;</strong></p>
<pre><code>$ sudo vi /etc/ppp/chap-secrets
</code></pre><p>&#x6DFB;&#x52A0;&#x4E00;&#x884C;&#xFF0C;&#x4F9D;&#x6B21;&#x4E3A;&#xFF1A;&#x7528;&#x6237;&#x540D;&#xFF0C;&#x670D;&#x52A1;&#xFF0C;&#x5BC6;&#x7801;&#xFF0C;&#x9650;&#x5236;ip&#xFF1A;</p>
<pre><code>&quot;user&quot; pptpd &quot;user&quot; *
</code></pre><p>&#x6216;</p>
<pre><code>username * password *
</code></pre><p><strong>&#x91CD;&#x542F;&#x670D;&#x52A1;</strong></p>
<pre><code>$ sudo /etc/init.d/pptpd restart
</code></pre><p>&#x6267;&#x884C;&#x4EE5;&#x4E0A;&#x6B65;&#x9AA4;&#x540E;VPN&#x5373;&#x53EF;&#x8FDE;&#x63A5;&#x4E0A;&#x4E86;&#xFF0C;&#x4F46;&#x662F;&#x8FD8;&#x65E0;&#x6CD5;&#x4E0A;&#x7F51;&#x3002;</p>
<h2 id="&#x8BBE;&#x7F6E;IP&#x8F6C;&#x53D1;"><a href="#&#x8BBE;&#x7F6E;IP&#x8F6C;&#x53D1;" class="headerlink" title="&#x8BBE;&#x7F6E;IP&#x8F6C;&#x53D1;"></a>&#x8BBE;&#x7F6E;IP&#x8F6C;&#x53D1;</h2><p><strong>&#x5141;&#x8BB8;&#x8F6C;&#x53D1;</strong></p>
<pre><code>$ sudo vi /etc/sysctl.conf
</code></pre><p>&#x53BB;&#x6389;&#x6587;&#x4EF6;&#x4E2D;&#x8FD9;&#x4E00;&#x884C;&#x7684;&#x6CE8;&#x91CA;&#xFF1A;</p>
<pre><code>net.ipv4.ip_forward=1
</code></pre><p>&#x4F7F;&#x8BBE;&#x7F6E;&#x751F;&#x6548;&#xFF1A;</p>
<pre><code>$ sudo sysctl -p
</code></pre><p><strong>&#x8BBE;&#x7F6E;<code>NAT</code></strong></p>
<pre><code>$ sudo iptables -t nat -A POSTROUTING -s 192.168.1.0/24 -o eth0 -j MASQUERADE
</code></pre><p>&#x8BBE;&#x7F6E;MTU&#xFF0C;&#x9632;&#x6B62;&#x5305;&#x8FC7;&#x5927;&#xFF1A;</p>
<pre><code>$ sudo iptables -A FORWARD -s 192.168.1.0/24 -p tcp -m tcp --tcp-flags SYN,RST SYN -j TCPMSS --set-mss 1200
</code></pre><p><strong>&#x4FDD;&#x5B58;&#x8BBE;&#x7F6E;</strong></p>
<pre><code>$ sudo iptables-save
</code></pre><p>&#x5C06;&#x8F93;&#x51FA;&#x4FDD;&#x5B58;&#x5230;&#x4EE5;&#x4E0B;&#x6587;&#x4EF6;&#x4E2D;</p>
<pre><code>$ sudo /etc/iptables-rules
</code></pre><p><strong>&#x81EA;&#x52A8;&#x52A0;&#x8F7D;&#x89C4;&#x5219;</strong></p>
<p>&#x7F16;&#x8F91;&#x7F51;&#x5361;&#x6587;&#x4EF6;&#xFF0C;&#x52A0;&#x8F7D;&#x7F51;&#x5361;&#x65F6;&#x81EA;&#x52A8;&#x52A0;&#x8F7D;&#x89C4;&#x5219;</p>
<pre><code>$ sudo vi  /etc/network/interfaces
</code></pre><p>&#x6DFB;&#x52A0;&#x4E00;&#x884C;&#xFF1A;</p>
<pre><code>pre-up iptables-restore &lt; /etc/iptables-rules
</code></pre><blockquote>
<p>Fin</p>
</blockquote>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/03/12/create-github-page-with-hexo/" itemprop="url">
                  在Github上利用Hexo创建博客
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-03-12T13:49:00+08:00" content="2016-03-12">
              2016-03-12
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="&#x5728;Github&#x4E0A;&#x5229;&#x7528;Hexo&#x521B;&#x5EFA;&#x535A;&#x5BA2;"><a href="#&#x5728;Github&#x4E0A;&#x5229;&#x7528;Hexo&#x521B;&#x5EFA;&#x535A;&#x5BA2;" class="headerlink" title="&#x5728;Github&#x4E0A;&#x5229;&#x7528;Hexo&#x521B;&#x5EFA;&#x535A;&#x5BA2;"></a>&#x5728;Github&#x4E0A;&#x5229;&#x7528;Hexo&#x521B;&#x5EFA;&#x535A;&#x5BA2;</h1><blockquote>
<p><a href="https://hexo.io" title="https://hexo.io" target="_blank" rel="external">Hexo</a>&#x662F;&#x4E00;&#x6B3E;&#x57FA;&#x4E8E;Nodejs&#x7684;&#xFF0C;&#x5FEB;&#x901F;&#x3001;&#x7B80;&#x5355;&#x4E14;&#x529F;&#x80FD;&#x5F3A;&#x5927;&#x7684;&#x535A;&#x5BA2;&#x6846;&#x67B6;&#x3002;&#x652F;&#x6301;&#x591A;&#x7EBF;&#x7A0B;&#xFF0C;&#x652F;&#x6301;markdown&#x7F16;&#x5199;&#x6587;&#x7AE0;&#xFF0C;&#x53EF;&#x4EE5;&#x65B9;&#x4FBF;&#x7684;&#x751F;&#x6210;&#x9759;&#x6001;&#x7F51;&#x9875;&#x6258;&#x7BA1;&#x5728;github&#x4E0A;&#x3002;</p>
</blockquote>
<h2 id="Install-Hexo"><a href="#Install-Hexo" class="headerlink" title="Install Hexo"></a>Install Hexo</h2><p>&#x6B65;&#x9AA4;&#xFF1A;</p>
<p>1 &#x5B89;&#x88C5; Git</p>
<blockquote>
<p>&#x4E0B;&#x8F7D;&#x5E76;&#x5B89;&#x88C5; msysgit</p>
</blockquote>
<p>2 &#x5B89;&#x88C5; node.js &#x548C; npm</p>
<blockquote>
<p>&#x4E0B;&#x8F7D;&#x5E76;&#x5B89;&#x88C5; nodejs</p>
</blockquote>
<p>3 &#x5B89;&#x88C5; Hexo</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-cli -g</span><br></pre></td></tr></table></figure>
<p>4 &#x521B;&#x5EFA;Hexo&#x6587;&#x4EF6;&#x5939;</p>
<blockquote>
<p>&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x5939;&#x7528;&#x4E8E;&#x7F16;&#x5199;&#x672C;&#x5730;&#x535A;&#x5BA2;&#xFF0C;&#x5982;&#xFF08;<code>E:\hexo</code>&#xFF09;&#x3002;</p>
</blockquote>
<p>&#x5728;&#x6B64;&#x6587;&#x4EF6;&#x5939;&#x4E2D;&#x8F93;&#x5165;&#x4EE5;&#x4E0B;&#x547D;&#x4EE4;&#x8FDB;&#x884C;&#x521D;&#x59CB;&#x5316;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo init</span><br></pre></td></tr></table></figure>
<p>5 &#x5B89;&#x88C5;&#x4F9D;&#x8D56;&#x5305;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install</span><br></pre></td></tr></table></figure>
<p>&#x81F3;&#x6B64;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x5B89;&#x88C5;&#x597D;Hexo&#x4E86;&#xFF0C;&#x5E76;&#x4E14;&#x53EF;&#x4EE5;&#x5F00;&#x59CB;&#x64B0;&#x5199;&#x672C;&#x5730;&#x535A;&#x5BA2;&#x4E86;&#x3002;</p>
<h2 id="Using-Hexo"><a href="#Using-Hexo" class="headerlink" title="Using Hexo"></a>Using Hexo</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Usage: hexo &lt;<span class="built_in">command</span>&gt;</span><br><span class="line"></span><br><span class="line">Commands:</span><br><span class="line">  clean     Removed generated files and cache.</span><br><span class="line">  config    Get or <span class="built_in">set</span> configurations.</span><br><span class="line">  deploy    Deploy your website.</span><br><span class="line">  generate  Generate static files.</span><br><span class="line">  <span class="built_in">help</span>      Get <span class="built_in">help</span> on a command.</span><br><span class="line">  init      Create a new Hexo folder.</span><br><span class="line">  list      List the information of the site</span><br><span class="line">  migrate   Migrate your site from other system to Hexo.</span><br><span class="line">  new       Create a new post.</span><br><span class="line">  publish   Moves a draft post from _drafts to _posts folder.</span><br><span class="line">  render    Render files with renderer plugins.</span><br><span class="line">  server    Start the server.</span><br><span class="line">  version   Display version information.</span><br></pre></td></tr></table></figure>
<p><strong>&#x5E38;&#x7528;&#x547D;&#x4EE4;&#xFF1A;</strong></p>
<p>&#x521B;&#x5EFA;&#x4E00;&#x7BC7;&#x65B0;&#x7684;&#x535A;&#x5BA2;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo new</span><br><span class="line">or</span><br><span class="line">hexo n</span><br></pre></td></tr></table></figure>
<p>&#x751F;&#x6210;&#x9759;&#x6001;&#x535A;&#x5BA2;&#x6587;&#x4EF6;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo generate</span><br><span class="line">or</span><br><span class="line">hexo g</span><br></pre></td></tr></table></figure>
<p>&#x542F;&#x52A8;&#x672C;&#x5730;&#x670D;&#x52A1;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo server</span><br><span class="line">or</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure>
<p>&#x6267;&#x884C;&#x53EF;&#x4EE5;&#x5728;&#x6D4F;&#x89C8;&#x5668;&#x4E2D;&#x8F93;&#x5165;<a href="http://localhost:4000" title="localhost:4000" target="_blank" rel="external">localhost:4000</a> &#x9884;&#x89C8;&#x535A;&#x5BA2;&#x3002;</p>
<h2 id="Deploy"><a href="#Deploy" class="headerlink" title="Deploy"></a>Deploy</h2><p>&#x90E8;&#x7F72;&#x4E4B;&#x524D;&#x5148;&#x8981;&#x914D;&#x7F6E;&#x4E00;&#x4E0B;Hexo&#x3002;</p>
<p>1 &#x5B89;&#x88C5;<strong>hexo-deployer-git</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>
<p>2 &#x5728;&#x76EE;&#x5F55; <code>E:\hexo</code> &#x4E0B;&#xFF0C;&#x7F16;&#x8F91; <code>_config.yml</code>&#xFF08;&#x5C06;<strong>xyz</strong>&#x6362;&#x6210;&#x4F60;&#x81EA;&#x5DF1;&#x7684;github&#x7528;&#x6237;&#x540D;&#xFF09;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: git</span><br><span class="line">  repository: https://github.com/xyz/xyz.github.io.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure>
<p>&#x6267;&#x884C;&#x4E0B;&#x5217;&#x6307;&#x4EE4;&#x5373;&#x53EF;&#x5B8C;&#x6210;&#x90E8;&#x7F72;&#x3002;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo generate</span><br><span class="line">hexo deploy</span><br></pre></td></tr></table></figure>
<p>&#x4E2D;&#x9014;&#x4F1A;&#x63D0;&#x793A;&#x8F93;&#x5165;GitHub&#x8D26;&#x53F7;&#x548C;&#x5BC6;&#x7801;&#xFF0C;&#x6B63;&#x5E38;&#x8F93;&#x5165;&#x5373;&#x53EF;&#x3002;</p>
<h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><ol>
<li>&#x6BCF;&#x6B21;&#x4FEE;&#x6539;&#x672C;&#x5730;&#x6587;&#x4EF6;&#x540E;&#xFF0C;&#x9700;&#x8981;&#x6267;&#x884C; <code>hexo generate</code> &#x624D;&#x80FD;&#x751F;&#x6210;&#x65B0;&#x7684;&#x535A;&#x5BA2;&#x6587;&#x4EF6;&#x3002;</li>
<li>&#x6240;&#x6709;hexo&#x547D;&#x4EE4;&#x90FD;&#x8981;&#x5728; hexo &#x6587;&#x4EF6;&#x76EE;&#x5F55;&#x4E0B;&#x6267;&#x884C;&#x3002;</li>
<li>&#x53D1;&#x5E03;&#x540E;GitHub&#x4F1A;&#x6709;&#x4E00;&#x5B9A;&#x7684;&#x5EF6;&#x65F6;</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/03/05/shuffle-algorithm/" itemprop="url">
                  Shuffle Algorithm
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-03-05T21:22:50+08:00" content="2016-03-05">
              2016-03-05
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <html>

<head>
  <meta charset="utf-8">
  <title>Shuffle Algorithm</title>
  <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
  </script>
  <script type="text/javascript" async src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML">
  </script>

  <style>
    /* remove class of theme */
    /*.one-column .main-inner {
      width: 960px; 
    }
    .main-inner {
      width: 960px; 
    }*/
    
    div.shuffle-algorithm {
      background: #fcfcfa;
      color: #333;
      font-family: "Microsoft YaHei", Helvetica, sans-serif;
      margin: 1em auto 4em auto;
      position: relative;
      width: 960px;
    }
    
    .shuffle-algorithm header,
    .shuffle-algorithm footer {
      font-size: small;
    }
    
    .shuffle-algorithm footer {
      margin-top: 8em;
    }
    
    .shuffle-algorithm p,
    .shuffle-algorithm pre {
      width: 720px;
    }
    
    .shuffle-algorithm aside {
      width: 200px;
      position: absolute;
      right: 0;
      font-size: small;
    }
    
    .shuffle-algorithm h1 {
      font-size: 48px;
      font-weight: 100;
      margin-bottom: 1em;
    }
    
    .shuffle-algorithm .lib-name {
      color: firebrick;
    }
    
    .shuffle-algorithm .chart {
      width: 960px;
      height: 80px;
    }
    
    .shuffle-algorithm .naive-shuffle {
      height: 160px;
    }
    
    .shuffle-algorithm .play path {
      stroke: #fff;
      stroke-width: 6px;
      fill: #fc0;
    }
    
    .shuffle-algorithm .play:hover path {
      fill: red;
    }
    
    .shuffle-algorithm .play rect {
      fill: none;
      pointer-events: all;
      cursor: pointer;
    }
  </style>
</head>

<body>
  <div class="shuffle-algorithm">
    <header>
      <p>Febrary 28, 2016 / <a class="author" href="" rel="author">Jason Wang</a></p>
      <h1>&#x6D17;&#x724C;&#x7B97;&#x6CD5;</h1>
    </header>
    <div>
      <p>&#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x6253;&#x724C;&#x65F6;&#x7684;&#x516C;&#x5E73;&#x6027;&#xFF0C;&#x6D17;&#x724C;&#x540E;&#x7684;&#x724C;&#x5806;&#x5E94;&#x5F53;&#x662F;&#x5B8C;&#x5168;&#x968F;&#x673A;&#x7684;&#x3002;</p>
      <p>&#x4ECE;&#x6982;&#x7387;&#x7684;&#x89D2;&#x5EA6;&#x6765;&#x8BF4;&#xFF0C;&#x724C;&#x5806;&#x53EF;&#x4EE5;&#x770B;&#x6210;&#x4E00;&#x4E2A;&#x7F16;&#x53F7;&#x4E3A; $ 1 $ &#x5230; $ n $ &#x7684;&#x6570;&#x7684;&#x5E8F;&#x5217;&#xFF0C;&#x8FD9;&#x4E2A;&#x5E8F;&#x5217;&#x7684;&#x6392;&#x5217;&#x7EC4;&#x5408;&#x6570;&#x4E3A; $ n! $&#x3002;</p>

      <svg class="chart unshuffled">
      <aside>&#x6574;&#x9F50;&#x7684;&#x724C;&#x5806;</aside>
      <p>&#x5B8C;&#x5168;&#x968F;&#x673A;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x6BCF;&#x4E00;&#x79CD;&#x6392;&#x5217;&#x7EC4;&#x5408;&#x51FA;&#x73B0;&#x7684;&#x6982;&#x7387;&#x76F8;&#x7B49;&#xFF0C;&#x6982;&#x7387;&#x4E3A; $ \frac{1}{n!} $</p>


      <h3>&#x6734;&#x7D20;&#x6D17;&#x724C;&#x7B97;&#x6CD5;</h3>
      <p>&#x6240;&#x8C13;&#x6734;&#x7D20;&#xFF0C;&#x5C31;&#x662F;&#x8BF4;&#x6BCF;&#x6B21;&#x4ECE;&#x672A;&#x53D6;&#x51FA;&#x7684;&#x6570;&#x4E2D;&#x968F;&#x673A;&#x53D6;&#x51FA;&#x4E00;&#x4E2A;&#x6570;&#xFF0C;&#x6392;&#x6210;&#x5E8F;&#x5217;&#x3002;</p>

      <svg class="chart naive-shuffle">
      <aside>&#x70B9;&#x51FB;&#x5F00;&#x59CB;&#x6D17;&#x724C;</aside>

      <p>JavaScript&#x7684;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
      <pre>
        <code class="javascript">
function naiveShuffle(array) {
  var shuffle = [];
  var n = array.length;
  var i;

  while (n) {
    // Pick a random element
    i = Math.floor(Math.random() * n--);

    // Add the element to new pack
    // Re-order the left elements
    shuffle.push(array.splice(i, 1));
  }

  return shuffle;
}
        </code>
      </pre>

      <p>&#x53D6;&#x7B2C;&#x4E00;&#x4E2A;&#x6570;&#x65F6;&#xFF0C;&#x4ECE; $ n $ &#x4E2A;&#x6570;&#x4E2D;&#x968F;&#x673A;&#x53D6;&#x4E00;&#x4E2A;&#x6570;&#xFF08;&#x6709; $ n $ &#x79CD;&#x53EF;&#x80FD;&#xFF09;&#xFF1B;&#x53D6;&#x7B2C;&#x4E8C;&#x4E2A;&#x6570;&#x65F6;&#xFF0C;&#x4ECE;&#x5269;&#x4E0B;&#x7684; $ n - 1 $ &#x4E2A;&#x6570;&#x4E2D;&#x968F;&#x673A;&#x53D6;&#x4E00;&#x4E2A;&#x6570;&#xFF08;&#x6709; $n - 1$ &#x79CD;&#x53EF;&#x80FD;&#xFF09;&#xFF1B;&#x5982;&#x6B64;&#x91CD;&#x590D; $n$ &#x6B21;&#xFF0C;&#x5219;&#x53EF;&#x5F97;&#x5230;&#x4E00;&#x4E2A;&#x5E8F;&#x5217;&#x3002;</p>
      <p>&#x6B64;&#x5E8F;&#x5217;&#x7684;&#x6982;&#x7387;&#x4E3A; $ \frac{1}{n!} $ &#xFF0C; &#x4E0E;&#x5B8C;&#x5168;&#x968F;&#x673A;&#x7684;&#x6982;&#x7387;&#x4E00;&#x81F4;&#x3002;</p>
      <p>&#x5206;&#x6790;&#x4E00;&#x4E0B;&#x6B64;&#x7B97;&#x6CD5;&#x7684;&#x6027;&#x80FD;</p>
      <p>&#x7A7A;&#x95F4;: $ O(n) $, &#x9700;&#x8981;&#x4E00;&#x4E2A;&#x989D;&#x5916;&#x7684;&#x5927;&#x5C0F;&#x4E3A; $ n $ &#x7684;&#x7A7A;&#x95F4;&#x5B58;&#x50A8;&#x7ED3;&#x679C;</p>
      <p>&#x65F6;&#x95F4;: $ O(n^{2}) $, while&#x5FAA;&#x73AF;&#x7684;&#x590D;&#x6742;&#x5EA6;&#x4E3A; $ O(n) $ , &#x5FAA;&#x73AF;&#x5185;&#x6574;&#x7406;&#x724C;&#x5806;&#x7684;&#x590D;&#x6742;&#x5EA6;&#x4E5F;&#x4E3A; $ O(n) $&#x3002;</p>


      <h3>Fisher-Yates&#x7B97;&#x6CD5;</h3>
      <p>&#x63A5;&#x4E0B;&#x6765;&#x4ECB;&#x7ECD;&#x4E00;&#x79CD;&#x66F4;&#x4E3A;&#x6709;&#x6548;&#x7684;&#x7B97;&#x6CD5;&#x3002;</p>
      <svg class="chart fisher-yates-shuffle">
      <pre>
        <code class="javascript">
function fisherYatesShuffle(array) {
  var n = array.length;
  var i;

  while (n) {
    // Pick a random element
    i = Math.floor(Math.random() * n--);

    // Swap the random element with element in position n.
    t = array[n];
    array[n] = array[i];
    array[i] = t;
  }

  return array;
}
        </code>
      </pre>
      <p>&#x4ECE;&#x7B2C; $ 1 $ &#x5230; $ n $ &#x4E2A;&#x6570;&#x4E2D;&#x968F;&#x673A;&#x9009;&#x53D6;&#x4E00;&#x4E2A;&#x6570;&#xFF0C;&#x548C;&#x7B2C; $ n $ &#x4E2A;&#x6570;&#x4EA4;&#x6362;&#xFF0C;&#x6BCF;&#x6B21;&#x5C06; $ n $ &#x7684;&#x503C;&#x51CF; $ 1 $ &#xFF0C;&#x5982;&#x6B64;&#x91CD;&#x590D; $ n $ &#x6B21;&#xFF0C;&#x5219;&#x53EF;&#x5F97;&#x5230;&#x4E00;&#x4E2A;&#x5E8F;&#x5217;&#x3002;</p>
      <p>&#x6B64;&#x5E8F;&#x5217;&#x7684;&#x6982;&#x7387;&#x540C;&#x6837;&#x4E3A; $ \frac{1}{n!} $ &#x3002;</p>
      <p>&#x540C;&#x6837;&#x5206;&#x6790;&#x4E00;&#x4E0B;&#x6B64;&#x7B97;&#x6CD5;&#x7684;&#x6027;&#x80FD;</p>
      <p>&#x7A7A;&#x95F4;: $ O(0) $, &#x56E0;&#x4E3A;&#x5C06;&#x5F53;&#x524D;&#x4F4D;&#x7F6E;&#x7684;&#x6570;&#x5B58;&#x653E;&#x5728;&#x4E0E;&#x4E4B;&#x4EA4;&#x6362;&#x7684;&#x6570;&#x7684;&#x4F4D;&#x7F6E;&#x4E0A;&#xFF0C;&#x6240;&#x4EE5;&#x4E0D;&#x9700;&#x8981;&#x989D;&#x5916;&#x7684;&#x7A7A;&#x95F4;&#x3002;</p>
      <p>&#x65F6;&#x95F4;: $ O(n) $, while&#x5FAA;&#x73AF;&#x7684;&#x590D;&#x6742;&#x5EA6;&#x4E3A; $ O(n) $ , &#x5FAA;&#x73AF;&#x5185;&#x64CD;&#x4F5C;&#x7684;&#x590D;&#x6742;&#x5EA6;&#x4E3A; $ O(1) $&#x3002;</p>
    </svg></svg></svg></div>
    <footer>
      <p>&#x672C;&#x6587;&#x4E3B;&#x8981;&#x53C2;&#x8003;&#x4E86;Mike Bostock&#x7684; <a href="https://bost.ocks.org/mike/shuffle/" target="_blank" rel="external">&quot;Fisher&#x2013;Yates Shuffle&quot;</a></p>
      <p><span class="lib-name">&#x53EF;&#x89C6;&#x5316;</span>&#x4F7F;&#x7528;&#x4E86;<a href="https://d3js.org/" target="_blank" rel="external">D3.js</a></p>
      <p><span class="lib-name">&#x8BED;&#x6CD5;&#x9AD8;&#x4EAE;</span>&#x4F7F;&#x7528;&#x4E86;<a href="https://www.highlightjs.org/" target="_blank" rel="external">highlightjs</a></p>
      <p><span class="lib-name">&#x6570;&#x5B66;&#x516C;&#x5F0F;&#x5F15;&#x64CE;</span>&#x4F7F;&#x7528;&#x4E86;<a href="https://www.mathjax.org/" target="_blank" rel="external">MathJax</a></p>
    </footer>
  </div>

  <script>
    var n = 200;

    var margin = {
      top: 10,
      right: 0,
      bottom: 10,
      left: 0
    };

    var width = 960;
    var height = 80;

    var areaWidth = width - margin.left - margin.right;
    var areaHeight = height - margin.top - margin.bottom;

    var barOffset = areaWidth / n;
    var barWidth = 2;
    var barHeight = areaHeight;
    var minBarHeight = 10;

    function x(d) {
      return d * barOffset;
    }

    /**
     * Create a chart of bars to demonstrate algorithm
     * @param options.update - callback of update d3 chart
     * @param options.y - Y offset of chart
     */
    function createChart(options) {

      var update = options.update;
      var y = options.y || 0;


      var chart = d3.select(options.chart)
        .append('g')
        .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');

      var bar = chart.selectAll('rect')
        .data(d3.range(n))
        .enter().append('rect')
        .attr('x', 0)
        .attr('y', function(d, i) {
          return (1 - i / n) * (barHeight - minBarHeight);
        })
        .attr('width', barWidth)
        .attr('height', function(d, i) {
          return minBarHeight + i / n * (barHeight - minBarHeight);
        })
        .style('fill', function(d, i) {
          var h = 420 - i / n * 60;
          h = h >= 360 ? h - 360 : h;
          return d3.hsl(h, 1, 0.5);
        })
        .style('stroke', '#000')
        .style('stroke-width', 0);

      reset(chart);

      if (options.play) {
        var play = chart.append('g')
          .attr("class", "play")
          .on("click", start);

        play.append("path")
          .attr("d", "M-30,-30L30,0L-30,30Z")
          .attr("transform", "translate(" + areaWidth / 2 + "," + (y + areaHeight / 2) + ")scale(.4)");

        play.append("rect")
          .attr("width", areaWidth)
          .attr("height", areaHeight);
      }
      
      return chart;

      function start() {
        play.style("display", "none");
        var m = n;
        if (bar.shuffled) {
          reset(chart);
          bar.shuffled = false;
        }
        bar = chart.selectAll('rect');
        var interval = setInterval(function() {
          m = update(bar, m, y);
          if (m == 0) {
            setTimeout(function() {
              play.style("display", null);
            }, 1000);
            bar.shuffled = true;
            clearInterval(interval);
          }
        }, 100);
      }

      function reset(chart) {
        chart.selectAll("rect")
          .attr("transform", function(d, i) {
            return "translate(" + x(i) + "," + y + ")";
          });
      }
    }

    // unshuffled
    createChart({
      chart: '.unshuffled'
    });

    // naive-shuffle
    createChart({
      y: height,
      chart: '.naive-shuffle',
      play: true,
      update: function(bar, m, y) {
        var i = Math.floor(Math.random() * m);
        var a = bar[0].splice(i, 1)[0];

        d3.select(a)
          .style('stroke-width', '2px')
          .transition()
          .duration(1000)
          .style('stroke-width', '0')
          .attr("transform", "translate(" + x(n - m) + "," + 0 + ")");

        bar.attr("transform", function(d, i) {
          return "translate(" + x(i) + "," + y + ")";
        });
        return --m;
      }
    });

    // Fisher–Yates Shuffle
    createChart({
      chart: '.fisher-yates-shuffle',
      play: true,

      update: function(bar, m) {
        var i = Math.floor(Math.random() * m);
        m--;
        var a = bar[0][i];
        var b = bar[0][m];

        //        console.log('i: ' + i + ', m: ' + m);

        bar[0][i] = b;
        bar[0][m] = a;

        d3.select(b)
          .transition()
          .duration(1000)
          .style('stroke-width', '0')
          .attr("transform", "translate(" + x(i) + "," + 0 + ")");

        d3.select(a) // in position m
          .style('stroke-width', '2px')
          .transition()
          .duration(1000)
          .style('stroke-width', '0')
          .attr("transform", "translate(" + x(m) + "," + 0 + ")")

        return m;
      }
    });
  </script>
</body>

<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.2.0/styles/default.min.css">
<script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.2.0/highlight.min.js"></script>
<script>
  hljs.initHighlightingOnLoad();
</script>

</html>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/03/05/hello-world/" itemprop="url">
                  Hello Hexo
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-03-05T20:39:30+08:00" content="2016-03-05">
              2016-03-05
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/avatar.jpg"
               alt="Jason Wang" />
          <p class="site-author-name" itemprop="name">Jason Wang</p>
          <p class="site-description motion-element" itemprop="description">Play Fun</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">19</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">30</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jason Wang</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="http://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.1"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  



  
  
  

  

  

</body>
</html>
